# Yarn ğŸ§¶

## ä»€éº¼æ˜¯ Yarnï¼Ÿ

Yarn æ˜¯ä¸€å€‹åŠŸèƒ½å¼·å¤§çš„**å¥—ä»¶ç®¡ç†å™¨**ï¼ŒåŒæ™‚ä¹Ÿæ˜¯é …ç›®ç®¡ç†è€…ã€‚ç„¡è«–ä½ æ˜¯è™•ç†ç°¡å–®çš„é …ç›®é‚„æ˜¯å¤§å‹ monorepoï¼Œç„¡è«–ä½ æ˜¯é–‹æºé–‹ç™¼è€…é‚„æ˜¯ä¼æ¥­ç”¨æˆ¶ï¼ŒYarn éƒ½èƒ½ç‚ºä½ æä¾›å‡ºè‰²çš„æ”¯æŒã€‚

Yarn æ˜¯å°ˆé–€ç‚º JavaScript é …ç›®è¨­è¨ˆçš„ä¾è³´ç®¡ç†å·¥å…·ï¼Œå¹«åŠ©ä½ æ›´é«˜æ•ˆåœ°å®‰è£ã€æ›´æ–°ã€é…ç½®å’Œåˆªé™¤è»Ÿé«”åŒ…ã€‚å®ƒå°ˆæ³¨æ–¼**é€Ÿåº¦**ã€**æ­£ç¢ºæ€§**ã€**å®‰å…¨æ€§**å’Œ**é–‹ç™¼è€…é«”é©—**ï¼Œé€šéå‰µæ–°åŠŸèƒ½ï¼ˆå¦‚å·¥ä½œå€ã€é›¢ç·šç·©å­˜ã€ä¸¦è¡Œå®‰è£ã€ç¡¬åŒ–æ¨¡å¼ã€äº¤äº’å¼å‘½ä»¤ç­‰ï¼‰ä¸æ–·æ”¹é€²å„å€‹æ–¹é¢ã€‚

### Yarn çš„æ ¸å¿ƒç‰¹é»

- **å·¥ä½œå€ï¼ˆWorkspacesï¼‰**ï¼šé¦–å€‹å°ˆé–€ç‚ºå·¥ä½œå€è¨­è¨ˆçš„å¥—ä»¶ç®¡ç†å™¨
- **ç©©å®šæ€§**ï¼šYarn ä¿è¨¼ä»Šå¤©èƒ½æ­£å¸¸å·¥ä½œçš„å®‰è£åœ¨æœªä¾†ä¹Ÿèƒ½ä»¥ç›¸åŒæ–¹å¼é‹è¡Œ
- **å®Œå–„çš„æ–‡æª”**ï¼šæ¯å€‹æ–°ç‰ˆæœ¬éƒ½æœƒä¸æ–·æ”¹é€²æ–‡æª”
- **æ’ä»¶ç³»çµ±**ï¼šæä¾›å·¥å…·è®“ä½ è§£æ±ºé‡åˆ°çš„å•é¡Œ
- **å‰µæ–°ç²¾ç¥**ï¼šæŒ‘æˆ°ç¾ç‹€ï¼Œå§‹çµ‚ç«™åœ¨å‰æ²¿
- **å®Œå…¨ç¨ç«‹**ï¼šå®Œå…¨ç¨ç«‹çš„é–‹æºé …ç›®ï¼Œä¸å—ä»»ä½•å…¬å¸ç´„æŸ

---

## å¿«é€Ÿé–‹å§‹

### å®‰è£ Yarn

**ä½¿ç”¨ npmï¼š**

```bash
npm install -g yarn
```

**ä½¿ç”¨ corepackï¼ˆæ¨è–¦ï¼‰ï¼š**

```bash
corepack enable
corepack prepare yarn@stable --activate
```

### é©—è­‰å®‰è£

```bash
yarn --version
```

### åˆå§‹åŒ–é …ç›®

```bash
yarn init
```

### å®‰è£ä¾è³´

```bash
yarn install
```

---

## å¸¸ç”¨å‘½ä»¤

### æ·»åŠ ä¾è³´

```bash
# æ·»åŠ æ­£å¼ä¾è³´
yarn add lodash

# æ·»åŠ é–‹ç™¼ä¾è³´
yarn add -D typescript

# æ·»åŠ ç‰¹å®šç‰ˆæœ¬
yarn add lodash@4.17.21
```

### ç§»é™¤ä¾è³´

```bash
yarn remove lodash
```

### æ›´æ–°ä¾è³´

```bash
yarn up lodash
yarn up --all
```

### é‹è¡Œè…³æœ¬

```bash
yarn build
yarn dev
yarn test
```

---

## å·¥ä½œå€

å·¥ä½œå€æ˜¯ Yarn æœ€å¼·å¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œå…è¨±ä½ åœ¨å–®å€‹é …ç›®ä¸­ç®¡ç†å¤šå€‹åŒ…ã€‚

### é…ç½®å·¥ä½œå€

```json
{
  "workspaces": [
    "packages/*"
  ]
}
```

### å·¥ä½œå€å‘½ä»¤

```bash
yarn workspace @my-org/core add lodash
yarn workspaces foreach -pt run build
```

---

## é…ç½®

### .yarnrc.yml

Yarn 4+ ä½¿ç”¨ .yarnrc.ymlï¼š

```yaml
npmRegistryServer: "https://registry.npmjs.org"
nodeLinker: node-modules
```

---

## æœ€ä½³å¯¦è¸

1. å§‹çµ‚æäº¤ yarn.lock
2. åœ¨ CI ä¸­ä½¿ç”¨ --immutable
3. å®šæœŸæ›´æ–°ä¾è³´
4. ä½¿ç”¨å·¥ä½œå€ç°¡åŒ–ç®¡ç†
5. å®šæœŸæ¸…ç†ç·©å­˜

---

## ç›¸é—œè³‡æº

- å®˜æ–¹ç¶²ç«™ï¼šhttps://yarnpkg.com
- å®˜æ–¹æ–‡æª”ï¼šhttps://yarnpkg.com/docs
- GitHubï¼šhttps://github.com/yarnpkg/berry
