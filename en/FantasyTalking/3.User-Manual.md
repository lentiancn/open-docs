# FantasyTalking User Manual

Detailed usage guide and examples.

## Basic Usage

### Generate Video

```bash
python inference.py \
  --source_image face.jpg \
  --audio speech.wav \
  --output output.mp4
```

### Parameters

| Parameter | Short | Description | Default |
|-----------|-------|-------------|---------|
| --source_image | -s | Input image path | Required |
| --audio | -a | Input audio path | Required |
| --output | -o | Output video path | output.mp4 |
| --face_enhancer | -f | Face enhancer | None |
| --max_frames | -m | Max frames | 300 |
| --fps | -fps | Output FPS | 25 |

### Full Example

```bash
python inference.py \
  --source_image photos/person1.jpg \
  --audio audio/speech.wav \
  --output results/video1.mp4 \
  --face_enhancer realusf \
  --fps 30
```

## Advanced Usage

### Python API

```python
from fantasytalking import FantasyTalking

# Initialize model
ft = FantasyTalking(
    checkpoint_path="./models/checkpoint.pth",
    face_enhancer="realusf"
)

# Generate video
ft.generate(
    source_image="face.jpg",
    audio="speech.wav",
    output="output.mp4"
)
```

### Batch Processing

```python
import os
from fantasytalking import FantasyTalking

ft = FantasyTalking()

images_dir = "./images"
audio_dir = "./audio"
output_dir = "./output"

for image_file in os.listdir(images_dir):
    for audio_file in os.listdir(audio_dir):
        ft.generate(
            source_image=os.path.join(images_dir, image_file),
            audio=os.path.join(audio_dir, audio_file),
            output=os.path.join(output_dir, f"{image_file}_{audio_file}.mp4")
        )
```

### Web API

```bash
python api.py --port 8080
```

```bash
curl -X POST http://localhost:8080/generate \
  -F "image=@face.jpg" \
  -F "audio=@speech.wav" \
  -o output.mp4
```

## Input Requirements

### Image

- **Formats**: JPG, PNG, BMP
- **Resolution**: 512x512 or higher
- **Face**: Front-facing, clear, well-lit

### Audio

- **Formats**: WAV, MP3, FLAC
- **Sample Rate**: 16000 Hz or 44100 Hz
- **Duration**: 1-60 seconds

## Output Settings

### Resolution

```bash
python inference.py --size 512
```

Supported: 256, 512, 768, 1024

### FPS

```bash
python inference.py --fps 30
```

## Best Practices

1. Use clear, front-facing photos
2. Prepare clean audio without noise
3. Use face enhancer for better quality
4. Adjust resolution based on needs
