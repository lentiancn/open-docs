# OpenClaw 安装指南

## 环境要求

在安装 OpenClaw 之前，请确保你的系统满足以下要求：

### 基本要求

- **Node.js**：22 或更高版本
- **操作系统**：macOS、Linux、Windows
- **网络**：能够访问互联网（用于 API 调用）

### 检查 Node 版本

```bash
node --version
```

如果版本低于 22，需要先升级 Node.js。

## 安装方式

OpenClaw 支持多种安装方式，你可以根据实际需求选择最合适的一种。

### 方式一：官方安装脚本（推荐）

这是最简单的方式，脚本会自动检测你的系统并完成安装。

**macOS / Linux：**

```bash
curl -fsSL https://openclaw.ai/install.sh | bash
```

**Windows（PowerShell）：**

```powershell
iwr -useb https://openclaw.ai/install.ps1 | iex
```

### 方式二：npm 全局安装

如果你已经安装了 Node.js，可以使用 npm 安装：

```bash
npm install -g openclaw@latest
```

### 方式三：开发模式安装

如果你想参与开发或需要最新功能：

```bash
git clone https://github.com/openclaw/openclaw.git
cd openclaw
npm install
npm run build
```

## 初始化配置

安装完成后，需要运行初始化向导来配置 OpenClaw：

```bash
openclaw onboard --install-daemon
```

这个命令会：
1. 检查并安装系统服务（守护进程）
2. 配置认证信息（API 密钥）
3. 配置网关设置
4. 可选的通道配置（WhatsApp、Telegram 等）

## 启动 Gateway

### 方式一：作为服务运行

如果你已经安装了守护进程，Gateway 应该已经在运行：

```bash
# 查看 Gateway 状态
openclaw gateway status

# 启动 Gateway
openclaw gateway start

# 停止 Gateway
openclaw gateway stop

# 重启 Gateway
openclaw gateway restart
```

### 方式二：前台运行

用于快速测试或调试：

```bash
openclaw gateway --port 18789
```

## 验证安装

### 检查服务状态

```bash
openclaw gateway status
```

### 打开控制台 UI

```bash
# 命令方式打开
openclaw dashboard

# 或者直接访问
http://127.0.0.1:18789/
```

如果控制台 UI 能够正常加载，说明 Gateway 已经准备就绪。

## 配置通道

### WhatsApp 登录

```bash
openclaw channels login
```

按照提示完成 WhatsApp 扫码登录。

### Telegram 配置

需要先在 Telegram 中：
1. 搜索 @BotFather 创建机器人
2. 获取机器人 API Token
3. 在 OpenClaw 中配置：

```bash
openclaw channels add telegram
```

### Discord 配置

1. 在 Discord 开发者门户创建应用
2. 获取机器人 Token
3. 配置 OpenClaw：

```bash
openclaw channels add discord
```

## 可选配置

### 配置文件位置

OpenClaw 的配置文件位于 `~/.openclaw/openclaw.json`。

### 基础配置示例

```json
{
  "channels": {
    "whatsapp": {
      "allowFrom": ["+15555550123"]
    }
  },
  "messages": {
    "groupChat": {
      "mentionPatterns": ["@openclaw"]
    }
  }
}
```

### 环境变量

如果需要自定义配置或状态目录：

- `OPENCLAW_HOME`：设置主目录
- `OPENCLAW_STATE_DIR`：覆盖状态目录
- `OPENCLAW_CONFIG_PATH`：覆盖配置文件路径

## 卸载

### npm 卸载

```bash
npm uninstall -g openclaw
```

### 删除配置

```bash
rm -rf ~/.openclaw
```

## 常见问题

### 1. Node 版本过低

```bash
# 使用 nvm 升级
nvm install 22
nvm use 22
```

### 2. 端口被占用

如果 18789 端口被占用，可以指定其他端口：

```bash
openclaw gateway --port 18889
```

### 3. 无法连接

检查防火墙设置，确保 18789 端口可访问。

### 4. API 密钥问题

确保 API 密钥配置正确，可以在控制台 UI 中重新配置。

## 下一步

安装完成后，建议阅读《使用手册》了解如何配置路由、管理会话、使用插件等功能。
