# MySQL FAQ

This page answers frequently asked questions about MySQL.

---

## Installation

### Which version of MySQL should I use?

For production environments, MySQL 8.0.x or 8.4.x is recommended. MySQL 9.x is the latest innovation release but may have behavior changes.

### How do I install MySQL on Windows?

1. Download MySQL Installer from https://dev.mysql.com/downloads/installer/
2. Run the installer
3. Choose "Full" or "Custom" installation
4. Follow the wizard to configure the server

### How do I install MySQL on Linux?

For Ubuntu/Debian:
```bash
sudo apt update
sudo apt install mysql-server
```

For CentOS/RHEL:
```bash
sudo yum install mysql-community-server
```

### How do I install MySQL using Docker?

```bash
docker run -d --name mysql \
  -e MYSQL_ROOT_PASSWORD=your_password \
  -v mysql-data:/var/lib/mysql \
  -p 3306:3306 \
  mysql:8
```

### What are the default MySQL credentials?

The default username is `root`. On fresh installations, the password may be:
- Empty (macOS/Homebrew)
- Generated temporarily (Linux from RPM)
- Set during installation (Windows Installer)

---

## Connection

### How do I connect to MySQL from the command line?

```bash
mysql -u root -p
```

For Docker:
```bash
docker exec -it mysql mysql -u root -p
```

### How do I connect to a remote MySQL server?

```bash
mysql -h hostname -u root -p
```

Make sure the user has permission to connect remotely:
```sql
CREATE USER 'root'@'%' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%';
FLUSH PRIVILEGES;
```

### Can't connect to MySQL server error

1. Check if MySQL is running: `sudo systemctl status mysql`
2. Check firewall: `sudo firewall-cmd --list-all`
3. Verify port 3306 is open
4. Check bind-address in my.cnf

### Lost MySQL root password

**Linux:**
1. Stop MySQL: `sudo systemctl stop mysql`
2. Start in safe mode: `sudo mysqld_safe --skip-grant-tables`
3. Connect: `mysql -u root`
4. Reset password:
```sql
FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';
```
5. Restart MySQL

---

## Databases and Tables

### How do I create a database?

```sql
CREATE DATABASE myapp;
```

### How do I create a table?

```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE
);
```

### How do I see all tables in a database?

```sql
SHOW TABLES;
```

### How do I describe a table structure?

```sql
DESCRIBE table_name;
-- or
DESC table_name;
```

### How do I delete a table?

```sql
DROP TABLE table_name;
```

---

## Data Operations

### How do I insert data?

```sql
INSERT INTO users (username, email) VALUES ('john', 'john@example.com');
```

### How do I update data?

```sql
UPDATE users SET email = 'new@example.com' WHERE id = 1;
```

### How do I delete data?

```sql
DELETE FROM users WHERE id = 1;
```

### How do I select data?

```sql
SELECT * FROM users;
SELECT username, email FROM users WHERE status = 'active';
```

---

## Queries

### How do I join tables?

```sql
SELECT * FROM orders 
INNER JOIN users ON orders.user_id = users.id;
```

### How do I use LIMIT and OFFSET?

```sql
SELECT * FROM users LIMIT 10 OFFSET 20;
-- Or shorthand
SELECT * FROM users LIMIT 20, 10;
```

### How do I count rows?

```sql
SELECT COUNT(*) FROM users;
```

### How do I find duplicate records?

```sql
SELECT email, COUNT(*) as cnt
FROM users
GROUP BY email
HAVING cnt > 1;
```

---

## Indexes

### How do I create an index?

```sql
CREATE INDEX idx_email ON users(email);
```

### How do I see indexes on a table?

```sql
SHOW INDEX FROM users;
```

### When should I use indexes?

- Columns used in WHERE clauses
- Columns used in JOIN conditions
- Columns used in ORDER BY
- Columns with high cardinality (many unique values)

### When should I avoid indexes?

- Small tables
- Columns with low cardinality (few unique values)
- Frequently updated columns
- Columns rarely used in queries

---

## Performance

### MySQL is running slowly

1. Check for slow queries: `SHOW FULL PROCESSLIST;`
2. Analyze queries: `EXPLAIN SELECT ...`
3. Add indexes to frequently queried columns
4. Optimize configuration
5. Check server resources (CPU, memory, disk I/O)

### How do I enable the slow query log?

In my.cnf:
```ini
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2
```

### How do I analyze a query?

```sql
EXPLAIN SELECT * FROM users WHERE email = 'test@example.com';
```

### How do I optimize a table?

```sql
OPTIMIZE TABLE users;
```

---

## Backup and Restore

### How do I backup a database?

```bash
mysqldump -u root -p myapp > backup.sql
```

### How do I restore a database?

```bash
mysql -u root -p myapp < backup.sql
```

### How do I backup all databases?

```bash
mysqldump -u root -p --all-databases > full_backup.sql
```

### How do I schedule automatic backups?

Use cron on Linux:
```bash
0 2 * * * mysqldump -u root -p myapp > /backup/mydb_$(date +\%Y\%m\%d).sql
```

---

## Replication

### How do I set up master-slave replication?

1. Configure master in my.cnf:
```ini
[mysqld]
server-id=1
log-bin=mysql-bin
```

2. Configure slave in my.cnf:
```ini
[mysqld]
server-id=2
relay-log=relay-bin
read-only=1
```

3. On master:
```sql
CREATE USER 'repl'@'%' IDENTIFIED BY 'password';
GRANT REPLICATION SLAVE ON *.* TO 'repl'@'%';
```

4. On slave:
```sql
CHANGE MASTER TO MASTER_HOST='master_ip', MASTER_USER='repl', MASTER_PASSWORD='password', MASTER_LOG_FILE='mysql-bin.000001', MASTER_LOG_POS=1234;
START SLAVE;
```

### Replication lag is too high

- Check network between master and slave
- Optimize slave's slow queries
- Consider parallel replication
- Increase slave workers

---

## Storage parallel Engines

### What is the difference between InnoDB and MyISAM?

| Feature | InnoDB | MyISAM |
|----------|--------|--------|
| Transactions | Yes | No |
| Row-level locking | Yes | Table-level |
| Foreign keys | Yes | No |
| Crash recovery | Yes | No |
| Full-text search | Yes (5.6+) | Yes |
| Performance | Balanced | Read-fast |

### How do I change the storage engine?

```sql
ALTER TABLE mytable ENGINE = InnoDB;
```

### Which storage engine should I use?

Use **InnoDB** for most applications (transactions, foreign keys, concurrency).

Use **MyISAM** for read-heavy workloads that don't need transactions.

---

## User Management

### How do I create a new user?

```sql
CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';
```

### How do I grant privileges?

```sql
GRANT SELECT, INSERT, UPDATE ON myapp.* TO 'username'@'localhost';
```

### How do I see user privileges?

```sql
SHOW GRANTS FOR 'username'@'localhost';
```

### How do I reset a user password?

```sql
ALTER USER 'username'@'localhost' IDENTIFIED BY 'new_password';
```

---

## Errors and Troubleshooting

### "Too many connections"

Increase max_connections in my.cnf:
```ini
max_connections = 300
```

Or check for connection leaks in your application.

### "Table is full"

- Check disk space
- Increase tablespace size for InnoDB
- Check max_table_size configuration

### "Out of memory"

- Increase buffer pool size
- Optimize queries
- Add more RAM
- Check for large queries

### "Can't create/write to file"

- Check directory permissions
- Check disk space
- Check tmpdir configuration

---

## MySQL 8.0

### What's new in MySQL 8.0?

- Window functions
- CTEs (Common Table Expressions)
- JSON table functions
- Role management
- Improved security
- Better performance
- Unicode 9.0 support

### How do I upgrade from MySQL 5.7 to 8.0?

1. Backup all databases
2. Check for incompatible changes
3. Run MySQL upgrade script: `mysql_upgrade -u root -p`
4. Test application compatibility

---

## Resources

- Official Documentation: https://dev.mysql.com/doc/
- MySQL Forums: https://forums.mysql.com/
- Stack Overflow: https://stackoverflow.com/questions/tagged/mysql
