# Oracle データベース インストールガイド

Oracle データベースは、Oracle社が開発した関係データベース管理システムです。本ガイドではVarious various環境でのインストール方法について説明します。

## バージョン情報

| バージョン | ステータス | 説明 |
|------|------|------|
| Oracle 21c | ✅ 最新 | 最新バージョン |
| Oracle 19c | ✅ LTS | 長期サポートバージョン |
| Oracle 18c | ❌ 旧版 | サポート終了 |

> **重要**：本ガイドは **Oracle 19c/21c** を対象としています。

## システム要件

### ハードウェア要件

| 要件 | 最小構成 | 推奨構成 |
|------|----------|----------|
| CPU | 2 コア | 4+ コア |
| メモリ | 2 GB | 8+ GB |
| ディスク | 40 GB | 100+ GB |

### 対応OS

- **Linux**: Oracle Linux, RHEL, CentOS, SLES, Ubuntu
- **Windows**: Windows Server 2016+

## インストール方法

### 方法1：Linux へのインストール

#### 1. システムの準備

```bash
# ユーザーグループの作成
groupadd oinstall
groupadd dba
groupadd oper
groupadd backupdba
groupadd dgdba
groupadd kmdba
groupadd racdba
groupadd asmdba
groupadd asmoper
groupadd asmadmin

# Oracle ユーザーの作成
useradd -g oinstall -G dba,oper,backupdba,dgdba,kmdba,racdba,asmdba,asmoper,asmadmin oracle

# パスワードの設定
passwd oracle

# ディレクトリの作成
mkdir -p /u01/app/oracle/product/19.3.0/dbhome_1
mkdir -p /u01/app/oraInventory
mkdir -p /u01/app/oracle

# 権限の設定
chown -R oracle:oinstall /u01
chmod -R 775 /u01
```

#### 2. カーネルパラメータの設定

```bash
# /etc/sysctl.conf
cat >> /etc/sysctl.conf << EOF
kernel.shmmax = 68719476736
kernel.shmmni = 4096
kernel.shmall = 2097152
kernel.sem = 250 32000 100 128
fs.file-max = 6815744
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
fs.aio-max-nr = 1048576
EOF

# 適用
sysctl -p

# /etc/security/limits.conf
cat >> /etc/security/limits.conf << EOF
oracle soft nproc 2047
oracle hard nproc 16384
oracle soft nofile 1024
oracle hard nofile 65536
oracle soft stack 10240
oracle hard stack 32768
EOF
```

#### 3. 依存パッケージのインストール

```bash
# Oracle Linux
yum install -y libaio libaio-devel libXi libXtst libXext

# Ubuntu
apt-get install -y libaio1 libaio-dev libxi6 libxtst6 libxext6
```

#### 4. インストーラーの実行

```bash
# インストールファイルの展開
unzip -q LINUX.X64_193000_db_home.zip -d /u01/app/oracle/product/19.3.0/dbhome_1/

# oracle ユーザーで実行
cd /u01/app/oracle/product/19.3.0/dbhome_1
./runInstaller
```

### 方法2：Windows へのインストール

1. Oracle インストーラーをダウンロード
2. setup.exe を実行
3. インストールウィザードに従う：
   - 「単一インスタンスDBの作成と構成」を選択
   -「デスクトップクラス」または「サーバークラス」を選択
   - sys と system のパスワードを設定
   - インストール完了

### 方法3：Docker を使用

```bash
# イメージをプル
docker pull container-registry.oracle.com/database/express:21.3.0-xe

# コンテナを実行
docker run -d \
  --name oracle \
  -p 1521:1521 \
  -e ORACLE_PWD=MyPassword123 \
  -v oracle_data:/opt/oracle/oradata \
  container-registry.oracle.com/database/express:21.3.0-xe
```

## インストール後の設定

### 環境変数

```bash
# ~/.bash_profile
export ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
export ORACLE_SID=orcl
export PATH=$ORACLE_HOME/bin:$PATH
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
```

### データベースの起動

```bash
# リスナーの起動
lsnrctl start

# データベースの起動
sqlplus / as sysdba
STARTUP;
```

## よくある問題

### メモリ不足の場合

```bash
# メモリ確認
grep MemTotal /proc/meminfo

# swap の調整
```

### インストール失敗

ログを確認：
```bash
cat /u01/app/oraInventory/logs/installActions*.log
```

## 関連リンク

- [Oracle 公式ドキュメント](https://docs.oracle.com/)
- [Oracle ダウンロード](https://www.oracle.com/database/technologies/)