# Element Plus インストールガイド

Element Plusは、開発者、デザイナー、プロダクトマネージャー向けのVue 3コンポーネントライブラリです。

## バージョン概要

| バージョン | Vueバージョン | ステータス |
|---------|-------------|--------|
| Element Plus 2.x | Vue 3.2+ | 現行 - 推奨 |
| Element Plus 1.x | Vue 3.0+ | レガシー |
| Element UI 2.x | Vue 2.x | レガシー (Vue 2) |

**推奨：** すべての新しいVue 3プロジェクトにはElement Plus 2.xを使用してください。Element UIはVue 2プロジェクト専用です。

### バージョンの互換性

| Element Plus | Vueバージョン | Node.js | リリース日 |
|--------------|-------------|---------|--------------|
| 2.5.x | Vue 3.3+ | 16+ | 2024 |
| 2.4.x | Vue 3.2+ | 14+ | 2023 |
| 2.3.x | Vue 3.2+ | 14+ | 2023 |
| 2.2.x | Vue 3.2+ | 14+ | 2023 |

## 前提条件

### システム要件

| 要件 | 最小バージョン | 推奨バージョン |
|-------------|---------|-------------|
| Node.js | 16.x | 18.x または 20.x |
| npm | 8.x | 9.x または 10.x |
| Vue | 3.2+ | 3.4+ |
| Vite | 4.x | 5.x |

### ブラウザの互換性

Element Plusは、最新の2バージョンのブラウザをサポートしています：

| ブラウザ | 最小バージョン |
|--------|-----------------|
| Chrome | 64+ (2.5.0以上では85+) |
| Edge | 79+ (2.5.0以上では85+) |
| Firefox | 78+ (2.5.0以上では79+) |
| Safari | 12+ (2.5.0以上では14.1+) |

**注意：** Element PlusはIE11をサポートしていません。IE11サポートが必要な場合は、Vue 2のElement UIを使用してください。

## インストール方法

### 方法1：パッケージマネージャー（推奨）

#### npmを使用

```bash
npm install element-plus --save
```

#### yarnを使用

```bash
yarn add element-plus
```

#### pnpmを使用

```bash
pnpm install element-plus
```

#### cnpmを使用（中国ミラー）

```bash
# ミラーを設定
npm config set registry https://registry.npmmirror.com

# インストール
npm install element-plus --save
```

### 方法2：CDNインポート

#### unpkgを使用

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Element Plus CDNデモ</title>
  <!-- Vue 3をインポート -->
  <script src="//unpkg.com/vue@3"></script>
  <!-- Element Plusのスタイルをインポート -->
  <link rel="stylesheet" href="//unpkg.com/element-plus/dist/index.css">
  <!-- Element Plusをインポート -->
  <script src="//unpkg.com/element-plus"></script>
</head>
<body>
  <div id="app">
    <el-button>{{ message }}</el-button>
  </div>

  <script>
    const { createApp, ref } = Vue
    const app = createApp({
      setup() {
        const message = ref('Hello Element Plus!')
        return { message }
      }
    })
    app.use(ElementPlus)
    app.mount('#app')
  </script>
</body>
</html>
```

#### jsDelivrを使用

```html
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Element Plus CDNデモ</title>
  <!-- Vue 3をインポート -->
  <script src="//cdn.jsdelivr.net/npm/vue@3"></script>
  <!-- Element Plusのスタイルをインポート -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/element-plus/dist/index.css">
  <!-- Element Plusをインポート -->
  <script src="//cdn.jsdelivr.net/npm/element-plus"></script>
</head>
```

#### CDNでバージョンを固定

```html
<!-- 特定のバージョンに固定 -->
<link rel="stylesheet" href="//unpkg.com/element-plus@2.5.0/dist/index.css">
<script src="//unpkg.com/element-plus@2.5.0/dist/index.full.js"></script>
```

### 方法3：Nuxt.js統合

```bash
# Nuxtモジュールをインストール
npm install -D @element-plus/nuxt
# または
yarn add -D @element-plus/nuxt
# または
pnpm install -D @element-plus/nuxt
```

`nuxt.config.ts`で設定：

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@element-plus/nuxt'],
  elementPlus: {
    /** オプション */
  }
})
```

## プロジェクトセットアップ

### ステップ1：Vueプロジェクトを作成

#### Viteを使用（推奨）

```bash
# プロジェクトを作成
npm create vite@latest my-element-app -- --template vue-ts

# プロジェクトに移動
cd my-element-app

# 依存関係をインストール
npm install
```

#### Vue CLIを使用

```bash
# Vue CLIをインストール
npm install -g @vue/cli

# プロジェクトを作成
vue create my-element-app

# プロンプトでVue 3を選択
```

### ステップ2：Element Plusをインストール

```bash
npm install element-plus
```

### ステップ3：main.ts/main.jsで設定

#### 完全インポート（シンプルだがバンドルサイズ大）

```typescript
// main.ts
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import App from './App.vue'

const app = createApp(App)

app.use(ElementPlus)
app.mount('#app')
```

#### オン-demondインポート（本番推奨）

まず、自動インポートプラグインをインストール：

```bash
npm install -D unplugin-vue-components unplugin-auto-import
```

Viteを設定：

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
})
```

TypeScriptを設定：

```json
// tsconfig.json
{
  "compilerOptions": {
    // ... 他のオプション
    "types": ["element-plus/global"]
  }
}
```

Webpackを設定：

```javascript
// webpack.config.js
const AutoImport = require('unplugin-auto-import/webpack')
const Components = require('unplugin-vue-components/webpack')
const { ElementPlusResolver } = require('unplugin-vue-components/resolvers')

module.exports = {
  plugins: [
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
}
```

### ステップ4：コンポーネントを使用

```vue
<!-- App.vue -->
<template>
  <div>
    <h1>{{ message }}</h1>
    <el-button type="primary" @click="handleClick">
      クリックしてね
    </el-button>
    
    <el-input v-model="input" placeholder="テキストを入力"></el-input>
    
    <el-table :data="tableData" style="width: 100%">
      <el-table-column prop="name" label="名前"></el-table-column>
      <el-table-column prop="age" label="年齢"></el-table-column>
    </el-table>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const message = ref('Hello Element Plus!')
const input = ref('')
const tableData = ref([
  { name: '山田太郎', age: 25 },
  { name: '鈴木花子', age: 30 },
])
</script>
```

## スターターテンプレート

Element Plusは公式スターターテンプレートを提供しています：

| テンプレート | 説明 |
|----------|-------------|
| [Viteテンプレート](https://github.com/element-plus/element-plus-vite-starter) | 公式Vite + Vue 3スターター |
| [Nuxtテンプレート](https://github.com/element-plus/element-plus-nuxt-starter) | 公式Nuxt 3スターター |
| [Laravelテンプレート](https://github.com/element-plus/element-plus-in-laravel-starter) | Laravel + Vue 3スターター |

## グローバル設定

### デフォルトサイズとzIndexを設定

```typescript
// 完全インポート設定
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import App from './App.vue'

const app = createApp(App)
app.use(ElementPlus, { size: 'small', zIndex: 3000 })
```

### el-config-providerを使用

```vue
<template>
  <el-config-provider :size="size" :z-index="zIndex">
    <app />
  </el-config-provider>
</template>

<script setup>
import { ref } from 'vue'
import { ElConfigProvider } from 'element-plus'

const size = ref('default')
const zIndex = ref(3000)
</script>
```

## Sass/SCSS設定

バージョン2.8.5以降、Element PlusはSass 1.79.0+が必要です：

```typescript
// vite.config.ts
export default defineConfig({
  css: {
    preprocessorOptions: {
      scss: { api: 'modern-compiler' },
    }
  }
})
```

## トラブルシューティング

### コンポーネントが見つからない

**問題：** コンポーネントが表示されない、またはエラーが発生する

**解決策：**
1. Element Plusがインストールされていることを確認：`npm list element-plus`
2. main.tsでのインポートを確認
3. オン-demandインポートの場合、vite.config.tsのプラグイン設定を確認
4. 開発サーバーを再起動

### スタイルが適用されない

**問題：** コンポーネントのスタイルが正しくない

**解決策：**
1. CSSをインポート：`import 'element-plus/dist/index.css'`
2. プロジェクトでのCSS競合を確認
3. ビルドツールの設定を確認

### TypeScriptエラー

**問題：** TypeScriptがElement Plusの型を認識しない

**解決策：**
1. tsconfig.jsonに追加：`"types": ["element-plus/global"]`
2. `npm install -D @types/node`を実行
3. TypeScriptをアップデート：`npm install -D typescript@latest`

### メモリ問題

**問題：** ビルド中にメモリ不足が発生する

**解決策：**
1. Node.jsのメモリを増やす：`NODE_OPTIONS=--max_old_space_size=4096 npm run build`
2. オン-demandインポートを使用してバンドルサイズを削減
3. Node.jsを最新のLTSバージョンにアップデート

## Element UI（Vue 2）からの移行

### 主な違い

| Element UI (Vue 2) | Element Plus (Vue 3) |
|-------------------|---------------------|
| `el-button` | 同じ |
| `el-table` | 同じ |
| `el-form` | 同じ |
| `v-model` | 同じ構文 |
| `slot` | 同じ構文 |
| イベント | 同じ |

### パッケージ名の変更

```javascript
// Vue 2 + Element UI
import { Button, Table } from 'element-ui'

// Vue 3 + Element Plus
import { Button, Table } from 'element-plus'
```

### 重大な変更

1. **IE11のサポートを終了**
2. **Vue 3 Composition APIのサポート**
3. **TypeScriptサポートの改善**
4. **一部のコンポーネントpropsが名前変更**

## ベストプラクティス

1. **オン-demandインポートを使用** - バンドルサイズを大幅に削減
2. **Viteを使用** - より高速な開発とビルド時間
3. **バージョンを固定** - 本番環境では特定のバージョンを使用
4. **TypeScriptを使用** - より優れた型安全性とIDEサポート
5. **ブラウザサポートを確認** - ターゲットブラウザがサポートされていることを確認

## 関連リンク

- [公式サイト](https://element-plus.org)
- [GitHubリポジトリ](https://github.com/element-plus/element-plus)
- [コンポーネントドキュメント](https://element-plus.org/en-US/component/button.html)
- [npmパッケージ](https://www.npmjs.com/package/element-plus)
- [Vue 3ドキュメント](https://vuejs.org)
- [Viteドキュメント](https://vitejs.dev)
