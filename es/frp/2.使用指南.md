# Guía de usuario de frp

Esta guía explica cómo usar frp para穿透内网 (exposición de red interna) y mapeo de puertos.

## Inicio rápido

### Iniciar el servidor

```bash
# Iniciar frps
./frps -c frps.ini
```

### Iniciar el cliente

```bash
# Iniciar frpc
./frpc -c frpc.ini
```

## Detalles de configuración

### Configuración del servidor

#### Configuración básica

```ini
[common]
bind_port = 7000           # Puerto del servicio frp
dashboard_port = 7500      # Puerto del panel de control
token = password           # Token de autenticación
```

#### Mapeo de puertos

```ini
[common]
vhost_http_port = 80       # Puerto del host virtual HTTP
vhost_https_port = 443    # Puerto del host virtual HTTPS
```

#### Balanceo de carga

```ini
[common]
max_pool_count = 10        # Tamaño del pool de conexiones
max_ports_per_client = 0   # Límite de puertos por cliente
```

### Configuración del cliente

#### Mapeo TCP

```ini
# Mapear SSH local
[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000
```

#### Mapeo HTTP

```ini
# Mapear servicio web
[web]
type = http
local_port = 8080
custom_domains = example.com
```

#### Mapeo HTTPS

```ini
[web_https]
type = https
local_port = 8443
custom_domains = example.com
```

## Funciones avanzadas

### Balanceo de carga

```ini[test_http]
type = http
local_port = 8080
custom_domains = web.example.com
group = web_group
group_key = 123
```

### Plugins

#### Proxy HTTP

```ini
[http_proxy]
type = tcp
plugin = http_proxy
plugin_http_user = user
plugin_http_password = password
local_port = 8080
remote_port = 8000
```

#### Archivos estáticos

```ini
[static_file]
type = tcp
plugin = static_file
plugin_local_path = /var/www
pluginstrip_prefix = static
remote_port = 8000
```

## Configuración de seguridad

### Cifrado

```ini
[common]
use_encryption = true
```

### Compresión

```ini
[common]
use_compression = true
```

### Autenticación

```ini
[common]
authentication_method = token
token = your_secure_token
```

## Monitoreo

### Dashboard

```ini
[common]
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = admin
```

Acceda a http://your_server:7500 para ver el estado.

### Estadísticas de puertos

```ini
[common]
plugin = ports_stats
```

## Optimización de rendimiento

### Pool de conexiones

```ini
[common]
max_pool_count = 50
max_conn_per_proxy = 10
```

### Heartbeat

```ini
[common]
heartbeat_interval = 30
heartbeat_timeout = 90
```

### Nivel de registro

```ini
[common]
log_level = warn
log_max_days = 3
```

## Casos de uso

### 1. Acceso remoto a SSH interno

```ini
[ssh]
type = tcp
local_ip = 192.168.1.100
local_port = 22
remote_port = 6000
```

### 2. Exponer servicio web interno

```ini
[web]
type = http
local_port = 8080
custom_domains = yourdomain.com
```

### 3. Acceder a base de datos interna

```ini
[mysql]
type = tcp
local_ip = 192.168.1.100
local_port = 3306
remote_port = 13306
```

### 4. Callback de WeChat/Pago

```ini
[wechat]
type = http
local_port = 8080
custom_domains = callback.yourdomain.com
```

## Solución de problemas

### Problemas de conexión

1. Verifique los registros del servidor
2. Valide que los puertos estén abiertos
3. Revise el firewall

### Problemas de rendimiento

1. Ajuste el tamaño del pool de conexiones
2. Habilite la compresión
3. Verifique el ancho de banda de red

## Recursos relacionados

- [Documentación oficial de frp](https://gofrp.org/docs/)
- [GitHub](https://github.com/fatedier/frp)
