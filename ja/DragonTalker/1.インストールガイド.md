# DragonTalker インストールガイド

> DragonTalkerのインストール手順を詳しく記録
> 
> 更新日：2026年2月

---

## 一、背景紹介

DragonTalkerは、深層学習ベースのトークンヘッド生成ツールで、単一の人物画像と音声ファイルからリアルな動说话動画を合成できます。仮想主播、デジタル人客服、AI教育などのシーンに广泛应用されています。

### 1.1 コア技術

DragonTalkerはマルチステージパイプラインアーキテクチャを採用：首先、通过音声分析からメルスペクトログラム特徴を抽出；其次、3D顔ランドマーク検出技術を使って顔運動パラメータを取得；然后、画像レンダリング技術を使って連続した動画フレームを生成；最後に、顔修復ネットワークで画質を向上。整个过程不需要大量训练数据、デプロイが便利です。

### 1.2 主な特徴

- 音声駆動アニメーション：目標人物の提供只需要静态画像と音声ファイル即可生成同期の说话動画
- 3D運動推定：3D顔ランドマーク再構成技術に基づく、自然な頭部姿勢と表情変化
- マルチポース支持：45種以上の定義済み頭部ポジステンプレートを内蔵
- 顔強調：GFPGAN、RestoreFormer、CodeFormerなどの先进的な顔修復技術を統合
- Webデモインターフェース：ブラウザベースの操作入口を提供
- Python API：完全なプログラミング接口を提供し、セカンダリ開発とバッチ処理をサポート

---

## 二、システム要件

### 2.1 ハードウェア構成

| コンポーネント | 最低要件 | 推奨要件 |
|------|----------|----------|
| GPU | NVIDIA GTX 1060 (6GB VRAM) | NVIDIA RTX 3080以上 (16GB VRAM) |
| メモリ | 8GB | 32GB |
| ストレージ | 20GB | 50GB SSD |

### 2.2 ソフトウェア環境

| ソフトウェア | バージョン要件 | 説明 |
|------|----------|------|
| OS | Ubuntu 18.04/20.04/22.04, Windows 10/11, macOS 11+ | 64ビットを推奨 |
| Python | 3.8 - 3.10 | もっと高いバージョンは互換性问题がある可能性あり |
| CUDA | 11.7以上 | GPU推論に必需 |
| ffmpeg | 任意のバランスバージョン | 動画コーデックに必需 |

---

## 三、インストール手順

### 3.1 Ubuntu/Linux インストール

#### 3.1.1 システム依存関係のインストール

ターミナルを開いて、以下のコマンドを実行：

```bash
# ソフトウェアパッケージリストを更新
sudo apt-get update

# 基本的なビルドツールをインストール
sudo apt-get install -y build-essential git wget curl

# Pythonと関連ツールをインストール
sudo apt-get install -y python3.8 python3-pip python3-venv

# 動画処理依存関係をインストール
sudo apt-get install -y ffmpeg libsm6 libxext6 libxrender-dev libgl1-mesa-glx
```

#### 3.1.2 仮想環境の作成

```bash
cd DragonTalker
python3 -m venv venv
source venv/bin/activate
python --version
```

#### 3.1.3 Python依存関係のインストール

```bash
pip install --upgrade pip
pip install torch==1.12.1+cu113 torchvision==0.13.1+cu113 -f https://download.pytorch.org/whl/cu113
pip install -r requirements.txt
```

#### 3.1.4 事前学習モデルのダウンロード

```bash
bash scripts/download_models.sh
```

### 3.2 Windows インストール

1. **Pythonをインストール**：Python官网から3.8-3.10をダウンロード、「Add Python to PATH」にチェック

2. **Gitをインストール**

3. **CUDAをインストール**：NVIDIA官网からお使いのGPU对应バージョンをダウンロード

4. **ffmpegをインストール**：
```powershell
choco install ffmpeg
```

#### プロジェクトをクローンして設定

```powershell
git clone https://github.com/your-repo/DragonTalker.git
cd DragonTalker
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
```

### 3.3 macOS インストール

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
brew install ffmpeg python@3.10 git wget
git clone https://github.com/your-repo/DragonTalker.git
cd DragonTalker
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

---

## 四、インストール確認

```bash
source venv/bin/activate
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python inference.py \
  --source_image examples/source_image.jpg \
  --driven_audio examples/driven_audio.wav \
  --result_dir ./results \
  --enhancer gfpgan
```

---

## 五、Docker インストール（推奨）

```bash
docker build -t dragon-talker:latest .
docker run --gpus all -v $(pwd)/examples:/app/examples \
  -v $(pwd)/results:/app/results \
  dragon-talker:latest \
  python inference.py \
    --source_image /app/examples/source_image.jpg \
    --driven_audio /app/examples/driven_audio.wav \
    --result_dir /app/results
```

---

## 六、アンインストール

```bash
deactivate
rm -rf venv
docker rmi dragon-talker:latest
```

---

## 七 参考リソース

- 公式GitHub：https://github.com/your-repo/DragonTalker
- デモ：https://huggingface.co/spaces/dragon-talker
