# APISIX FAQ

よくある質問と回答。

## インストール

### Q: Docker コンテナが起動しない？

**解決策:**
1. Docker がインストールされ実行中か確認
```bash
docker --version
docker ps
```
2. ポートが使用中か確認
```bash
netstat -tlnp | grep 9080
```
3. コンテナログを確認
```bash
docker logs apisix
docker logs etcd
```

### Q: 起動失敗、etcd 接続エラー？

**解決策:**
1. etcd が実行中か確認
```bash
docker ps | grep etcd
```
2. etcd が正しいポートでリスニングか確認
3. 設定ファイルの etcd アドレスを確認

### Q: ポートが使用中？

**解決策:**
1. ポートを使用しているプロセスを特定
```bash
lsof -i:9080
```
2. プロセスを終了または APISIX ポートを変更
```yaml
apisix:
  node_listen: 9081
```

## 使用

### Q: ルートが効かない？

**解決策:**
1. ルート設定の形式を確認
2. ルートが正しく作成されたか確認
3. エラーログを確認
```bash
tail -f logs/error.log
```

### Q: プラグインが効かない？

**解決策:**
1. プラグインが有効か確認
2. プラグイン設定の形式を確認
3. プラグインの依存関係が満たされているか確認

### Q: アップストリームにアクセスできない？

**解決策:**
1. アップストリームサービスが実行中か確認
2. ネットワーク接続を確認
3. ファイアウォールルールを確認

## 設定

### Q: SSL/TLS 証明書を設定するには？

**解決策:**
1. SSL 証明書をアップロード
```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/ssls/1 \
  -H "X-API-KEY: 123456" \
  -d '{"cert":"証明書内容","key":"秘密鍵","sni":"example.com"}'
```

### Q: CORS を設定するには？

**解決策:**
cors プラグインを使用:

```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/routes/1 \
  -H "X-API-KEY: 123456" \
  -d '{"uri":"/api/*","plugins":{"cors":{}}}'
```

## パフォーマンス

### Q: メモリ使用量が 점점 增加？

**解決策:**
1. プラグインのメモリリークを確認
2. バッファサイズを制限

### Q: CPU 使用率が高い？

**解決策:**
1. リクエスト量が多いか確認
2. 正規表現マッチルールを最適化
3. プラグイン数を削減

## セキュリティ

### Q: Admin API を保護するには？

**解決策:**
1. 強力なキーを使用
2. アクセスIPを制限
3. HTTPS を有効化

### Q: 攻撃を防ぐには？

**解決策:**
1. レート制限プラグインを有効化
2. IPブラックリストを有効化
3. ファイアウォールを有効化
4. 異常リクエストを監視

## 学習リソース

### Q: APISIX はどこで学ぶ？

- 公式ドキュメント: https://apisix.apache.org/docs
- GitHub: https://github.com/apache/apisix
- コミュニティフォーラム: https://apisix.discourse.group
