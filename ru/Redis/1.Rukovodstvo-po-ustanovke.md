# Руководство по установке Redis

Полное руководство по установке Redis на всех основных платформах.

---

## Содержание

- [Что такое Redis?](#что-такое-redis)
- [Linux](#linux)
  - [Ubuntu / Debian](#ubuntu--debian)
  - [CentOS / RHEL](#centos--rhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Homebrew (Рекомендуется)](#homebrew-рекомендуется)
  - [MacPorts](#macports)
- [Windows](#windows)
  - [WSL2 (Рекомендуется)](#wsl2-рекомендуется)
  - [Memurai (Рекомендуемая альтернатива)](#memurai-рекомендуемая-альтернатива)
  - [Docker](#docker)
- [Проверка установки](#проверка-установки)
- [Настройка](#настройка)
- [Основные команды Redis CLI](#основные-команды-redis-cli)
- [Удаление](#удаление)
- [Следующие шаги](#следующие-шаги)

---

## Что такое Redis?

Redis — это хранилище структур данных в памяти с открытым исходным кодом, используемое в качестве базы данных, кэша и брокера сообщений. Поддерживает различные структуры данных: строки, хэши, списки, множества и отсортированные множества.

---

## Linux

### Ubuntu / Debian

#### Способ 1: APT (Рекомендуется)

```bash
# Обновить индекс пакетов
sudo apt update

# Установить Redis
sudo apt install redis-server

# Запустить Redis
sudo systemctl start redis-server

# Включить автозапуск
sudo systemctl enable redis-server
```

#### Способ 2: Компиляция из исходников

```bash
# Установить зависимости
sudo apt install build-essential tcl

# Скачать Redis
cd /tmp
wget https://github.com/redis/redis/archive/7.2.4.tar.gz
tar -zxvf 7.2.4.tar.gz
cd redis-7.2.4

# Скомпилировать и установить
make
sudo make install
```

### CentOS / RHEL

#### Использование YUM

```bash
# Установить репозиторий EPEL
sudo yum install epel-release

# Установить Redis
sudo yum install redis

# Запустить Redis
sudo systemctl start redis

# Включить автозапуск
sudo systemctl enable redis
```

### Fedora

```bash
# Установить Redis
sudo dnf install redis

# Запустить Redis
sudo systemctl start redis
sudo systemctl enable redis
```

### Arch Linux

```bash
# Установить Redis
sudo pacman -S redis

# Запустить Redis
sudo systemctl start redis
sudo systemctl enable redis
```

---

## macOS

### Homebrew (Рекомендуется)

```bash
# Установить Homebrew (если нужно)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Установить Redis
brew install redis

# Запустить Redis
brew services start redis

# Или запустить вручную
redis-server
```

### MacPorts

```bash
sudo port install redis
```

---

## Windows

### WSL2 (Рекомендуется)

```bash
# Установить Redis на WSL2 (Ubuntu)
sudo apt update
sudo apt install redis-server

# Запустить Redis
sudo systemctl start redis
```

### Memurai (Рекомендуемая альтернатива)

1. Скачать Memurai с https://www.memurai.com/
2. Установить и запустить как службу Windows

### Docker

```bash
# Запустить контейнер Redis
docker run -d --name redis -p 6379:6379 redis:latest

# С постоянным хранилищем
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --appendonly yes

# С паролем
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --requirepass yourpassword
```

---

## Проверка установки

```bash
# Проверить версию Redis
redis-server --version

# Проверить статус Redis
sudo systemctl status redis

# Подключиться к Redis
redis-cli

# Тест подключения
redis-cli ping
# Должно вернуть: PONG
```

---

## Настройка

### Основной файл конфигурации

- **Ubuntu/Debian**: `/etc/redis/redis.conf`
- **CentOS/RHEL**: `/etc/redis.conf`
- **macOS**: `/usr/local/etc/redis.conf` (Homebrew)
- **Docker**: `/etc/redis/redis.conf`

### Базовая настройка

```bash
# Привязать к localhost (безопасность)
bind 127.0.0.1

# Установить пароль
requirepass yourpassword

# Включить персистентность
appendonly yes

# Установить максимальную память
maxmemory 256mb

# Установить политику вытеснения
maxmemory-policy allkeys-lru
```

### Частые команды

```bash
# Запустить Redis
redis-server

# Запустить с пользовательской конфигурацией
redis-server /etc/redis/redis.conf

# Подключиться к Redis
redis-cli

# Подключиться с паролем
redis-cli -a yourpassword

# Остановить Redis
sudo systemctl stop redis
```

---

## Основные команды Redis CLI

```bash
# Установить ключ
redis-cli SET mykey "Hello"

# Получить ключ
redis-cli GET mykey

# Показать все ключи
redis-cli KEYS "*"

# Удалить ключ
redis-cli DEL mykey

# Установить срок действия (секунды)
redis-cli SETEX mykey 60 "value"

# Показать информацию о сервере
redis-cli INFO
```

---

## Удаление

### Ubuntu/Debian

```bash
sudo apt remove redis-server
```

### CentOS/RHEL

```bash
sudo yum remove redis
```

### macOS (Homebrew)

```bash
brew uninstall redis
```

---

## Следующие шаги

- [Руководство по использованию](./2.Rukovodstvo-po-ispolzovaniyu.md)
- Читать [официальную документацию Redis](https://redis.io/docs/)
