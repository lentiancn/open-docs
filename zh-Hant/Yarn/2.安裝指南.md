# Yarn 安裝指南

本指南將詳細介紹 Yarn 在各種操作系統和環境下的完整安裝過程。

---

## 安裝前準備

### 系統要求

- 操作系統：macOS、Linux、Windows 10+
- Node.js：16.0.0 或更高版本（推薦 Node.js 18 LTS 或 20 LTS）
- 磁碟空間：至少 200MB 可用空間

### 檢查現有環境

```bash
node --version
npm --version
```

---

## Corepack 安裝方法（推薦）

```bash
# 啟用 Corepack
corepack enable

# 安裝 Yarn 穩定版
corepack prepare yarn@stable --activate
```

## npm 全局安裝方法

```bash
npm install -g yarn
```

## 腳本安裝方法

### macOS / Linux

```bash
curl -o- -L https://yarnpkg.com/install.sh | bash
```

### Windows PowerShell

```powershell
iwr -useb https://yarnpkg.com/install.ps1 | iex
```

---

## 各操作系統的包管理器安裝

### macOS

```bash
brew install yarn
```

### Linux

**Debian / Ubuntu**：

```bash
curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
sudo apt update && sudo apt install yarn
```

### Windows

```bash
winget install Yarn.Yarn
```

---

## 安裝後配置

### 驗證安裝

```bash
yarn --version
```

### 配置鏡像源

在項目根目錄創建 `.yarnrc`：

```
registry "https://registry.npmmirror.com"
```

---

## 常見問題及解決方案

### 問題一：權限錯誤

不要使用 sudo。請使用 nvm 來管理 Node.js。

### 問題二：找不到 yarn 命令

將 Yarn 的全局 bin 目錄添加到 PATH：

```bash
export PATH="$(yarn global bin):$PATH"
```

### 問題三：Node.js 版本過低

使用 nvm 升級：

```bash
nvm install 20
nvm use 20
```

---

## 升級和遷移

### 升級 Yarn

```bash
corepack prepare yarn@stable --activate
```

### 從 Yarn 1.x 遷移到 Yarn 4.x

```bash
yarn set version berry
```

---

## 卸載 Yarn

```bash
npm uninstall -g yarn
```

---

## 下一步

- [使用手冊](./3.使用手冊.md)
- [常見問題](./4.常見問題.md)
- [官方文檔](https://yarnpkg.com/docs)
