# Руководство по использованию Kotlin

В этом руководстве описаны основные синтаксис и продвинутые функции Kotlin.

## Быстрый старт

### Hello World

```kotlin
fun main() {
    println("Hello, World!")
}
```

### Переменные

```kotlin
// Неизменяемая
val name: String = "Kotlin"

// Изменяемая
var age: Int = 10
age = 11
```

## Базовые типы

### Числа

```kotlin
val int: Int = 100
val long: Long = 100L
val double: Double = 100.0
val float: Float = 100.0f
```

### Строки

```kotlin
val str: String = "Hello"
val template = "Name: $name, Age: $age"
```

### Массивы

```kotlin
val arr = arrayOf(1, 2, 3)
val intArray = intArrayOf(1, 2, 3)
```

## Управление потоком

### Условия

```kotlin
val max = if (a > b) a else b

// Выражение When
val result = when (x) {
    1 -> "one"
    2 -> "two"
    else -> "other"
}
```

### Циклы

```kotlin
// Цикл for
for (i in 1..10) {
    println(i)
}

// While
while (x > 0) {
    x--
}
```

## Функции

### Базовые функции

```kotlin
fun sum(a: Int, b: Int): Int {
    return a + b
}

// Краткая форма
fun sum(a: Int, b: Int) = a + b
```

### Параметры по умолчанию

```kotlin
fun greet(name: String = "World") {
    println("Hello, $name!")
}
```

###可变参数

```kotlin
fun sum(vararg numbers: Int): Int {
    return numbers.sum()
}
```

## Объектно-ориентированное программирование

### Классы

```kotlin
class Person(val name: String, var age: Int) {
    
    fun speak() {
        println("My name is $name")
    }
}
```

### Наследование

```kotlin
open class Animal(val name: String) {
    open fun sound() = ""
}

class Dog(name: String) : Animal(name) {
    override fun sound() = "Woof!"
}
```

### Data-классы

```kotlin
data class User(val name: String, val email: String)
```

### Синглтон

```kotlin
object Database {
    fun connect() { }
}
```

## Коллекции

### Списки

```kotlin
val list = listOf(1, 2, 3)
val mutableList = mutableListOf(1, 2, 3)
```

### Словари

```kotlin
val map = mapOf("a" to 1, "b" to 2)
```

### Операции с коллекциями

```kotlin
val list = listOf(1, 2, 3, 4, 5)

list.filter { it > 2 }           // [3, 4, 5]
list.map { it * 2 }              // [2, 4, 6, 8, 10]
list.reduce { acc, i -> acc + i } // 15
```

## Безопасность от Null

### Nullable-типы

```kotlin
var name: String? = null
name = "Kotlin"
```

### Безопасные операторы

```kotlin
val length = name?.length
val len = name?.length ?: 0
```

### Non-null assertion

```kotlin
val len = name!!.length
```

## Корутины

### Основное использование

```kotlin
import kotlinx.coroutines.*

suspend fun fetchData(): String {
    delay(1000)
    return "Data"
}

fun main() = runBlocking {
    val result = fetchData()
    println(result)
}
```

### Параллельное выполнение

```kotlin
suspend fun fetchAll() = coroutineScope {
    val a = async { fetchData1() }
    val b = async { fetchData2() }
    "${a.await()} ${b.await()}"
}
```

## Расширения

### Функции-расширения

```kotlin
fun String.addExclamation() = this + "!"

val str = "Hello".addExclamation() // "Hello!"
```

### Свойства-расширения

```kotlin
val String.lastChar: Char
    get() = this[length - 1]
```

## Дженерики

```kotlin
class Box<T>(val value: T)

fun <T> printValue(value: T) {
    println(value)
}
```

## Лучшие практики

### 1. Предпочитайте val

```kotlin
// Рекомендуется
val immutable = "value"

// Избегайте
var mutable = "value"
```

### 2. Используйте data-классы

```kotlin
// Рекомендуется
data class User(val name: String, val age: Int)
```

### 3. Избегайте null

```kotlin
// Используйте значения по умолчанию
val name = nullableName ?: "default"
```

### 4. Используйте корутины для асинхронности

```kotlin
suspend fun loadData() = withContext(Dispatchers.IO) {
    // Асинхронные операции
}
```

## Полезные ресурсы

- [Официальная документация Kotlin](https://kotlinlang.org/docs/)
- [Учебники по Kotlin](https://kotlinlang.org/docs/tutorials/)
