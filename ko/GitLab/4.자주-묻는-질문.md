# GitLab 자주 묻는 질문

> GitLab에 대한 일반적인 질문에 대한 답변

---

## 설치

### Q: 설치 후 GitLab에 액세스할 수 없음?

**A**: 다음을 확인하세요:
- 외부 URL이 올바르게 구성되었는지
- 방화벽이 80, 443 포트를 허용하는지
- 서비스가 실행 중인지 확인: `sudo gitlab-ctl status`
- 로그 확인: `sudo gitlab-ctl tail`

### Q: 메모리 사용량이 너무 높음?

**A**: GitLab은 리소스 집약적입니다. 권장 사항:
- 최소 4GB RAM, 권장 8GB 이상
- 다음으로 최적화:
  ```ruby
  # /etc/gitlab/gitlab.rb
  postgresql['shared_buffers'] = "256MB"
  unicorn['worker_processes'] = 2
  ```

### Q: GitLab 데이터를 마이그레이션하는 방법은?

**A**: GitLab 백업 및 복원 사용:
```bash
# 백업
sudo gitlab-backup create

# 복원
sudo gitlab-backup restore BACKUP=timestamp
```

---

## Git 작업

### Q: 푸시할 때 권한 거부됨?

**A**: 
1. SSH 공개 키가 GitLab 프로필에 추가되었는지 확인
2. 프로젝트 멤버 권한 확인
3. HTTPS 사용 시 사용자 이름 및 액세스 토큰 확인

### Q: 병합 요청에 충돌이 표시됨?

**A**:
1. 로컬에서 대상 브랜치 최신 버전 풀
2. 대상 브랜치에 브랜치 리베이스
3. 충돌 해결 후 강제 푸시:
   ```bash
   git fetch origin
   git checkout your-branch
   git rebase origin/main
   # 충돌 해결 후
   git push --force-with-lease
   ```

### Q: 큰 파일 푸시 실패?

**A**: GitLab은 기본적으로 파일 크기를 제한합니다. 구성 조정:
```ruby
# /etc/gitlab/gitlab.rb
gitlab_rails['max_attachment_size'] = 100 * 1024 * 1024 # 100MB
```
또는 Git LFS 사용:
```bash
git lfs install
git lfs track "*.psd"
```

---

## CI/CD

### Q: 파이프라인이 보류 상태로 계속됨?

**A**: 
1. GitLab Runner가 등록되고 온라인 상태인지 확인
2. Runner 태그가 Jobs와 일치하는지 확인
3. Runner의 동시성 제한 확인

### Q: 개인 이미지 레지스트리 사용하는 방법은?

**A**: 
```yaml
build:
  image: my-private-image
  variables:
    DOCKER_AUTH_CONFIG: '{"auths":{"registry.example.com":{"username":"user","password":"pass"}}}'
```

### Q: 캐시가 작동하지 않음?

**A**: 캐시 구성이 올바른지 확인:
```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
  policy: pull-push
```

---

## 권한

### Q: 브랜치 보호를 설정하는 방법은?

**A**: 
1. 프로젝트 → 설정 → 저장소 → 보호된 브랜치로 이동
2. 보호할 브랜치 선택
3. 누가 푸시하고 병합할 수 있는지 구성

### Q: 프로젝트에 액세스할 수 없음?

**A**: 
1. 프로젝트 가시성 설정 확인 (공개/내부/비공개)
2. 프로젝트 멤버로 추가되었는지 확인
3. 액세스 위해 프로젝트 관리자에게 문의

---

## 성능 최적화

### Q: 페이지 로드가 느림?

**A**: 
1. 분석을 위해 Prometheus 모니터링 활성화
2. PostgreSQL 구성 최적화
3. Redis 캐싱 사용
4. PostgreSQL 마스터-슬레이브 복제 고려

### Q: 사용자 할당량을 제한하는 방법은?

**A**: 관리자 영역에서 설정:
- 스토리지 할당량 제한
- 저장소 수 제한
- 사용자 할당량

---

## 백업 및 복원

### Q: 자동 백업을 설정하는 방법은?

**A**: 크론 작업 구성:
```bash
# 매일 오전 2시에 자동 백업
0 2 * * * /opt/gitlab/bin/gitlab-backup create CRON=1
```

### Q: 백업 파일은 어디에 있나요?

**A**: 기본 위치는 `/var/opt/gitlab/backups/` 디렉토리

---

## 업그레이드

### Q: GitLab을 업그레이드하는 방법은?

**A**: 
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install gitlab-ee

# 그런 다음 재구성
sudo gitlab-ctl reconfigure
```

### Q: 업그레이드 전에 백업해야 하나요?

**A**: 예, 업그레이드 전에 백업하는 것을強く 권장:
```bash
sudo gitlab-backup create
sudo gitlab-ctl stop
---

## 일반적인 오류 코드

| 오류 코드 | 설명 | 해결 방법 |
|-----------|------|-----------|
| 500 | 내부 서버 오류 | 로그 확인 |
| 502 | 게이트웨이 오류 | 서비스 상태 확인 |
| 503 | 서비스 사용 불가 | 리소스 사용량 확인 |
| 404 | 리소스를 찾을 수 없음 | URL 확인 |
| 422 | 처리할 수 없는 엔티티 | 매개변수 확인 |
