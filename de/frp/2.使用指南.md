# frp Benutzerhandbuch

Diese Anleitung erklärt, wie Sie frp für穿透内网 (NAT-Durchbruch) und Port-Mapping verwenden.

## Schnellstart

### Server starten

```bash
# frps starten
./frps -c frps.ini
```

### Client starten

```bash
# frpc starten
./frpc -c frpc.ini
```

## Konfigurationsdetails

### Server-Konfiguration

#### Grundeinstellungen

```ini
[common]
bind_port = 7000           # frp Service-Port
dashboard_port = 7500      # Dashboard-Port
token = password           # Authentifizierungs-Token
```

#### Port-Mapping

```ini
[common]
vhost_http_port = 80       # HTTP Virtual Host Port
vhost_https_port = 443    # HTTPS Virtual Host Port
```

#### Lastverteilung

```ini
[common]
max_pool_count = 10        # Verbindungs-Pool-Größe
max_ports_per_client = 0   # Port-Limit pro Client
```

### Client-Konfiguration

#### TCP-Mapping

```ini
# Lokales SSH mappen
[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000
```

#### HTTP-Mapping

```ini
# Web-Service mappen
[web]
type = http
local_port = 8080
custom_domains = example.com
```

#### HTTPS-Mapping

```ini
[web_https]
type = https
local_port = 8443
custom_domains = example.com
```

## Erweiterte Funktionen

### Lastverteilung

```ini[test_http]
type = http
local_port = 8080
custom_domains = web.example.com
group = web_group
group_key = 123
```

### Plugins

#### HTTP-Proxy

```ini
[http_proxy]
type = tcp
plugin = http_proxy
plugin_http_user = user
plugin_http_password = password
local_port = 8080
remote_port = 8000
```

#### Statische Dateien

```ini
[static_file]
type = tcp
plugin = static_file
plugin_local_path = /var/www
pluginstrip_prefix = static
remote_port = 8000
```

## Sicherheitskonfiguration

### Verschlüsselung

```ini
[common]
use_encryption = true
```

### Komprimierung

```ini
[common]
use_compression = true
```

### Authentifizierung

```ini
[common]
authentication_method = token
token = your_secure_token
```

## Überwachung

### Dashboard

```ini
[common]
dashboard_port = 7500
dashboard_user = admin
dashboard_pwd = admin
```

Zugriff auf http://your_server:7500 für Status.

### Port-Statistiken

```ini
[common]
plugin = ports_stats
```

## Leistungsoptimierung

### Verbindungs-Pool

```ini
[common]
max_pool_count = 50
max_conn_per_proxy = 10
```

### Heartbeat

```ini
[common]
heartbeat_interval = 30
heartbeat_timeout = 90
```

### Protokollierungsstufe

```ini
[common]
log_level = warn
log_max_days = 3
```

## Anwendungsfälle

### 1. Remote-Zugriff auf internes SSH

```ini
[ssh]
type = tcp
local_ip = 192.168.1.100
local_port = 22
remote_port = 6000
```

### 2. Internen Web-Service暴露en

```ini
[web]
type = http
local_port = 8080
custom_domains = yourdomain.com
```

### 3. Auf interne Datenbank zugreifen

```ini
[mysql]
type = tcp
local_ip = 192.168.1.100
local_port = 3306
remote_port = 13306
```

### 4. WeChat/Zahlungs-Callback

```ini
[wechat]
type = http
local_port = 8080
custom_domains = callback.yourdomain.com
```

## Fehlerbehebung

### Verbindungsprobleme

1. Server-Protokolle prüfen
2. Ports sind offen verifizieren
3. Firewall überprüfen

### Leistungsprobleme

1. Verbindungs-Pool-Größe anpassen
2. Komprimierung aktivieren
3. Netzwerkbandbreite prüfen

## Verwandte Ressourcen

- [frp Offizielle Dokumentation](https://gofrp.org/docs/)
- [GitHub](https://github.com/fatedier/frp)
