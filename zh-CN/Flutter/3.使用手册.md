# Flutter ä½¿ç”¨æ‰‹å†Œ

> å½“å‰ç‰ˆæœ¬ï¼šFlutter 3.41.2 | æ›´æ–°æ—¥æœŸï¼š2026-01-28
> å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.flutter.dev/ui

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [Widget åŸºç¡€](#widget-åŸºç¡€)
3. [å¸ƒå±€ç³»ç»Ÿ](#å¸ƒå±€ç³»ç»Ÿ)
4. [çŠ¶æ€ç®¡ç†](#çŠ¶æ€ç®¡ç†)
5. [è·¯ç”±å¯¼èˆª](#è·¯ç”±å¯¼èˆª)
6. [ç½‘ç»œè¯·æ±‚](#ç½‘ç»œè¯·æ±‚)
7. [æ•°æ®å­˜å‚¨](#æ•°æ®å­˜å‚¨)
8. [è°ƒè¯•ä¸æµ‹è¯•](#è°ƒè¯•ä¸æµ‹è¯•)

---

## å¿«é€Ÿå¼€å§‹

### åˆ›å»ºé¡¹ç›®

```bash
# åˆ›å»ºæ–°é¡¹ç›®
flutter create my_app

# è¿›å…¥ç›®å½•
cd my_app

# è¿è¡Œï¼ˆå¼€å‘æ¨¡å¼ï¼‰
flutter run
```

### æœ€å°åº”ç”¨ç»“æ„

```dart
import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'æˆ‘çš„åº”ç”¨',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),
      ),
      home: const MyHomePage(),
    );
  }
}

class MyHomePage extends StatelessWidget {
  const MyHomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: const Text('é¦–é¡µ'),
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
      ),
      body: const Center(
        child: Text('Hello Flutter!'),
      ),
    );
  }
}
```

---

## Widget åŸºç¡€

### ä»€ä¹ˆæ˜¯ Widgetï¼Ÿ

Widget æ˜¯ Flutter UI çš„**åŸºæœ¬æ„å»ºå—**ã€‚åœ¨ Flutter ä¸­ï¼Œä¸€åˆ‡çš†ä¸º Widgetã€‚

- **StatelessWidget**ï¼šæ— çŠ¶æ€ï¼Œä¸éœ€è¦ç®¡ç†æ•°æ®å˜åŒ–
- **StatefulWidget**ï¼šæœ‰çŠ¶æ€ï¼Œå¯ä»¥ç®¡ç†æ•°æ®å˜åŒ–

### StatelessWidgetï¼ˆæ— çŠ¶æ€ç»„ä»¶ï¼‰

```dart
class Greeting extends StatelessWidget {
  final String name;
  
  const Greeting({super.key, required this.name});

  @override
  Widget build(BuildContext context) {
    return Text('ä½ å¥½ï¼Œ$nameï¼');
  }
}
```

### StatefulWidgetï¼ˆæœ‰çŠ¶æ€ç»„ä»¶ï¼‰

```dart
class Counter extends StatefulWidget {
  const Counter({super.key});

  @override
  State<Counter> createState() => _CounterState();
}

class _CounterState extends State<Counter> {
  int _count = 0;

  void _increment() {
    // é‡è¦ï¼šå¿…é¡»è°ƒç”¨ setState() æ¥è§¦å‘é‡å»º
    setState(() {
      _count++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      mainAxisSize: MainAxisSize.min,
      children: [
        Text(
          '$_count',
          style: Theme.of(context).textTheme.headlineLarge,
        ),
        const SizedBox(height: 16),
        ElevatedButton(
          onPressed: _increment,
          child: const Text('å¢åŠ '),
        ),
      ],
    );
  }
}
```

### å¸¸ç”¨åŸºç¡€ Widget

| Widget | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|
| `Text` | æ–‡æœ¬æ˜¾ç¤º | `Text('Hello')` |
| `Image` | å›¾ç‰‡å±•ç¤º | `Image.network(url)` |
| `Icon` | å›¾æ ‡ | `Icon(Icons.star)` |
| `Container` | å®¹å™¨ | å¸ƒå±€ã€è£…é¥° |
| `Scaffold` | é¡µé¢è„šæ‰‹æ¶ | é¡µé¢æ¡†æ¶ |

```dart
// å®Œæ•´ç¤ºä¾‹
Scaffold(
  appBar: AppBar(title: const Text('æ ‡é¢˜')),
  body: Column(
    children: [
      const Text('æ™®é€šæ–‡æœ¬'),
      Text(
        'å¤§å·æ–‡æœ¬',
        style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
      ),
      const Image.network('https://example.com/image.png'),
      const Icon(Icons.star, color: Colors.amber, size: 48),
    ],
  ),
)
```

---

## å¸ƒå±€ç³»ç»Ÿ

### çº¦æŸåŸåˆ™

Flutter å¸ƒå±€çš„æ ¸å¿ƒåŸåˆ™ï¼š
> **çº¦æŸå‘ä¸‹ä¼ é€’ï¼Œå°ºå¯¸å‘ä¸Šä¼ é€’ï¼Œçˆ¶ç»„ä»¶å†³å®šä½ç½®**

### å¸¸ç”¨å¸ƒå±€ Widget

#### Rowï¼ˆæ°´å¹³å¸ƒå±€ï¼‰

```dart
Row(
  mainAxisAlignment: MainAxisAlignment.spaceEvenly, // ä¸»è½´å¯¹é½
  crossAxisAlignment: CrossAxisAlignment.center,   // äº¤å‰è½´å¯¹é½
  children: [
    Icon(Icons.share),
    Icon(Icons.star),
    Icon(Icons.settings),
  ],
)
```

#### Columnï¼ˆå‚ç›´å¸ƒå±€ï¼‰

```dart
Column(
  mainAxisSize: MainAxisSize.min,
  children: const [
    Text('ç¬¬ä¸€è¡Œ'),
    Text('ç¬¬äºŒè¡Œ'),
    Text('ç¬¬ä¸‰è¡Œ'),
  ],
)
```

#### Stackï¼ˆå±‚å å¸ƒå±€ï¼‰

```dart
Stack(
  children: [
    Container(width: 200, height: 200, color: Colors.blue),
    Positioned(
      right: 10,
      bottom: 10,
      child: Icon(Icons.check, color: Colors.white),
    ),
  ],
)
```

#### GridViewï¼ˆç½‘æ ¼å¸ƒå±€ï¼‰

```dart
GridView.count(
  crossAxisCount: 3,  // 3åˆ—
  children: List.generate(9, (index) {
    return Center(child: Text('Item $index'));
  }),
)
```

#### ListViewï¼ˆåˆ—è¡¨å¸ƒå±€ï¼‰

```dart
ListView.builder(
  itemCount: 100,
  itemBuilder: (context, index) {
    return ListTile(
      leading: CircleAvatar(child: Text('$index')),
      title: Text('æ ‡é¢˜ $index'),
      subtitle: const Text('å‰¯æ ‡é¢˜'),
    );
  },
)
```

### é—´è·ä¸å°ºå¯¸

```dart
// æ°´å¹³å’Œå‚ç›´é—´è·
Row(
  children: const [
    Text('A'),
    SizedBox(width: 16),  // æ°´å¹³é—´è·
    Text('B'),
  ],
)

Column(
  children: const [
    Text('A'),
    SizedBox(height: 8),  // å‚ç›´é—´è·
    Text('B'),
  ],
)

// ä½¿ç”¨ Padding
Padding(
  padding: const EdgeInsets.all(16),
  child: Text('å¸¦å†…è¾¹è·çš„æ–‡æœ¬'),
)

// ä½¿ç”¨ Margin
Container(
  margin: const EdgeInsets.all(8),
  padding: const EdgeInsets.all(16),
  decoration: BoxDecoration(
    color: Colors.blue,
    borderRadius: BorderRadius.circular(8),
  ),
)
```

---

## çŠ¶æ€ç®¡ç†

### å±€éƒ¨çŠ¶æ€ï¼ˆsetStateï¼‰

é€‚ç”¨äºå•ä¸ª Widget çš„çŠ¶æ€ç®¡ç†ï¼š

```dart
class Counter extends StatefulWidget {
  const Counter({super.key});

  @override
  State<Counter> createState() => _CounterState();
}

class _CounterState extends State<Counter> {
  int _count = 0;

  void _increment() {
    setState(() {
      _count++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: _increment,
      child: Text('Count: $_count'),
    );
  }
}
```

### Providerï¼ˆæ¨èï¼‰

é€‚åˆä¸­å°å‹åº”ç”¨çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼š

**1. æ·»åŠ ä¾èµ–ï¼š**
```yaml
dependencies:
  provider: ^6.1.0
```

**2. åˆ›å»ºçŠ¶æ€ç±»ï¼š**
```dart
import 'package:flutter/foundation.dart';

class CounterModel extends ChangeNotifier {
  int _count = 0;
  
  int get count => _count;
  
  void increment() {
    _count++;
    notifyListeners();  // é€šçŸ¥ç›‘å¬è€…
  }
}
```

**3. æä¾›çŠ¶æ€ï¼š**
```dart
ChangeNotifierProvider(
  create: (context) => CounterModel(),
  child: const MyApp(),
)
```

**4. ä½¿ç”¨çŠ¶æ€ï¼š**
```dart
// è¯»å–
final count = context.watch<CounterModel>().count;

// è§¦å‘æ›´æ–°
context.read<CounterModel>().increment();
```

### Riverpodï¼ˆæ›´ç°ä»£çš„é€‰æ‹©ï¼‰

Provider çš„å¢å¼ºç‰ˆï¼Œæä¾›æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œæµ‹è¯•æ”¯æŒï¼š

```dart
import 'package:flutter_riverpod/flutter_riverpod';

// å®šä¹‰çŠ¶æ€
final counterProvider = StateNotifierProvider<CounterNotifier, int>((ref) {
  return CounterNotifier();
});

class CounterNotifier extends StateNotifier<int> {
  CounterNotifier() : super(0);
  
  void increment() => state++;
}

// ä½¿ç”¨
Consumer(
  builder: (context, ref, child) {
    final count = ref.watch(counterProvider);
    return Text('$count');
  },
)
```

### å…¶ä»–çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ

| æ–¹æ¡ˆ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **Provider** | ç®€å•ã€å®˜æ–¹æ¨è | ä¸­å°å‹åº”ç”¨ |
| **Riverpod** | ç±»å‹å®‰å…¨ã€æµ‹è¯•å‹å¥½ | ä¸­å¤§å‹åº”ç”¨ |
| **GetX** | åŠŸèƒ½å…¨é¢ã€æ˜“å­¦ | å¿«é€Ÿå¼€å‘ |
| **BLoC** | ä¸¥æ ¼æ¶æ„ã€äº‹ä»¶é©±åŠ¨ | å¤§å‹å¤æ‚åº”ç”¨ |
| **Redux** | å•å‘æ•°æ®æµ | å›¢é˜Ÿåä½œé¡¹ç›® |

---

## è·¯ç”±å¯¼èˆª

### åŸºæœ¬è·¯ç”±

```dart
// å®šä¹‰è·¯ç”±
MaterialApp(
  routes: {
    '/': (context) => const HomePage(),
    '/detail': (context) => const DetailPage(),
  },
)

// å¯¼èˆª
Navigator.pushNamed(context, '/detail');

// è¿”å›
Navigator.pop(context);
```

### ä¼ é€’å‚æ•°

```dart
// å¯¼èˆªæ—¶ä¼ é€’
Navigator.pushNamed(
  context,
  '/detail',
  arguments: {'id': 1, 'name': 'Flutter'},
);

// æ¥æ”¶å‚æ•°
class DetailPage extends StatelessWidget {
  const DetailPage({super.key});

  @override
  Widget build(BuildContext context) {
    final args = ModalRoute.of(context)!.arguments as Map;
    return Text('ID: ${args['id']}');
  }
}
```

### Navigator 2.0ï¼ˆå£°æ˜å¼è·¯ç”±ï¼‰

ç°ä»£ Flutter æ¨èçš„æ–¹å¼ï¼š

```dart
// ä½¿ç”¨ GoRouterï¼ˆæ¨èï¼‰
import 'package:go_router/go_router.dart';

final router = GoRouter(
  routes: [
    GoRoute(path: '/', builder: (context, state) => const HomePage()),
    GoRoute(path: '/detail/:id', builder: (context, state) {
      final id = state.pathParameters['id'];
      return DetailPage(id: id!);
    }),
  ],
);

// ä½¿ç”¨
context.go('/detail/123');
```

---

## ç½‘ç»œè¯·æ±‚

### HTTP åŒ…

```yaml
dependencies:
  http: ^1.1.0
```

**åŸºæœ¬ GET è¯·æ±‚ï¼š**

```dart
import 'dart:convert';
import 'package:http/http.dart' as http;

Future<List<Post>> fetchPosts() async {
  final response = await http.get(
    Uri.parse('https://jsonplaceholder.typicode.com/posts'),
  );

  if (response.statusCode == 200) {
    List<dynamic> data = json.decode(response.body);
    return data.map((json) => Post.fromJson(json)).toList();
  } else {
    throw Exception('åŠ è½½å¤±è´¥');
  }
}
```

### Dioï¼ˆæ¨èï¼‰

æ›´å¼ºå¤§çš„ HTTP å®¢æˆ·ç«¯ï¼š

```yaml
dependencies:
  dio: ^5.3.0
```

```dart
import 'package:dio/dio.dart';

final dio = Dio();

// GET è¯·æ±‚
final response = await dio.get('https://example.com/api/data');

// POST è¯·æ±‚
await dio.post(
  'https://example.com/api/create',
  data: {'name': 'Flutter', 'version': '3.0'},
);

// æ‹¦æˆªå™¨
dio.interceptors.add(LogInterceptor(
  requestBody: true,
  responseBody: true,
));
```

### JSON åºåˆ—åŒ–

ä½¿ç”¨ json_serializable è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼š

```yaml
dependencies:
  json_annotation: ^4.8.0
dev_dependencies:
  build_runner: ^2.4.0
  json_serializable: ^6.7.0
```

```dart
import 'package:json_annotation/json_annotation.dart';

part 'user.g.dart';

@JsonSerializable()
class User {
  final String name;
  final int age;

  User({required this.name, required this.age});

  factory User.fromJson(Map<String, dynamic> json) => _$UserFromJson(json);
  Map<String, dynamic> toJson() => _$UserToJson(this);
}
```

---

## æ•°æ®å­˜å‚¨

### SharedPreferences

è½»é‡çº§é”®å€¼å­˜å‚¨ï¼š

```yaml
dependencies:
  shared_preferences: ^2.2.0
```

```dart
import 'package:shared_preferences/shared_preferences.dart';

// å†™å…¥
final prefs = await SharedPreferences.getInstance();
await prefs.setString('name', 'Flutter');
await prefs.setInt('count', 42);
await prefs.setBool('enabled', true);

// è¯»å–
String name = prefs.getString('name') ?? '';
int count = prefs.getInt('count') ?? 0;

// åˆ é™¤
await prefs.remove('name');
await prefs.clear();
```

### SQLiteï¼ˆsqfliteï¼‰

æœ¬åœ°æ•°æ®åº“ï¼š

```yaml
dependencies:
  sqflite: ^2.3.0
  path: ^1.8.0
```

```dart
import 'package:sqflite/sqflite.dart';
import 'package:path/path.dart';

class DatabaseHelper {
  static final DatabaseHelper instance = DatabaseHelper._init();
  static Database? _database;

  DatabaseHelper._init();

  Future<Database> get database async {
    if (_database != null) return _database!;
    _database = await _initDB('flutter.db');
    return _database!;
  }

  Future<Database> _initDB(String filePath) async {
    final dbPath = await getDatabasesPath();
    final path = join(dbPath, filePath);

    return await openDatabase(
      path,
      version: 1,
      onCreate: _createDB,
    );
  }

  Future<void> _createDB(Database db, int version) async {
    await db.execute('''
      CREATE TABLE users (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        name TEXT NOT NULL,
        email TEXT NOT NULL
      )
    ''');
  }

  // æ’å…¥
  Future<int> insertUser(User user) async {
    final db = await database;
    return await db.insert('users', user.toMap());
  }

  // æŸ¥è¯¢
  Future<List<User>> getAllUsers() async {
    final db = await database;
    final result = await db.query('users');
    return result.map((map) => User.fromMap(map)).toList();
  }
}
```

---

## è°ƒè¯•ä¸æµ‹è¯•

### Flutter DevTools

```bash
# å¯åŠ¨ DevTools
flutter devtools

# æˆ–è€…åœ¨ VS Code/Android Studio ä¸­ç›´æ¥æ‰“å¼€
```

åŠŸèƒ½ï¼š
- ğŸ” **Inspector**ï¼šæ£€æŸ¥ Widget æ ‘
- ğŸ› **Debugger**ï¼šæ–­ç‚¹è°ƒè¯•
- ğŸ“Š **Performance**ï¼šæ€§èƒ½åˆ†æ
- ğŸ’¾ **Memory**ï¼šå†…å­˜åˆ†æ
- ğŸ“ˆ **Network**ï¼šç½‘ç»œè¯·æ±‚ç›‘æ§

### çƒ­é‡è½½

| ç±»å‹ | è¯´æ˜ | å¿«æ·é”® |
|------|------|--------|
| **Hot Reload** | ä¿å­˜ä»£ç åç«‹å³æ›´æ–° | `S` |
| **Hot Restart** | é‡æ–°å¯åŠ¨åº”ç”¨ | `R` |
| **Full Restart** | å®Œå…¨é‡å¯ | `Shift + R` |

### æµ‹è¯•

**å•å…ƒæµ‹è¯•ï¼š**

```dart
import 'package:flutter_test/flutter_test.dart';

void main() {
  test('è®¡æ•°å™¨æµ‹è¯•', () {
    int count = 0;
    count++;
    expect(count, 1);
  });
}
```

**Widget æµ‹è¯•ï¼š**

```dart
import 'package:flutter/material.dart';
import 'package:flutter_test/flutter_test.dart';

void main() {
  testWidgets('æŒ‰é’®ç‚¹å‡»æµ‹è¯•', (WidgetTester tester) async {
    int count = 0;

    await tester.pumpWidget(
      MaterialApp(
        home: Scaffold(
          body: ElevatedButton(
            onPressed: () => count++,
            child: const Text('ç‚¹å‡»'),
          ),
        ),
      ),
    );

    await tester.tap(find.byType(ElevatedButton));
    expect(count, 1);
  });
}
```

---

## å¸¸ç”¨å‘½ä»¤

```bash
# é¡¹ç›®ç®¡ç†
flutter create my_app          # åˆ›å»ºé¡¹ç›®
flutter run                     # è¿è¡Œåº”ç”¨
flutter build apk               # æ„å»º APK
flutter build ios              # æ„å»º iOS
flutter build web              # æ„å»º Web
flutter build windows           # æ„å»º Windows
flutter build macos             # æ„å»º macOS

# åˆ†æä¸æµ‹è¯•
flutter analyze                 # ä»£ç åˆ†æ
flutter test                    # è¿è¡Œæµ‹è¯•
flutter test --coverage        # æµ‹è¯•è¦†ç›–ç‡

# ä¾èµ–ç®¡ç†
flutter pub get                 # è·å–ä¾èµ–
flutter pub add package_name    # æ·»åŠ ä¾èµ–
flutter pub remove package_name # ç§»é™¤ä¾èµ–

# è®¾å¤‡ç®¡ç†
flutter devices                 # åˆ—å‡ºè®¾å¤‡
flutter doctor                  # æ£€æŸ¥ç¯å¢ƒ
```

---

## ä¸‹ä¸€æ­¥

- â“ [å¸¸è§é—®é¢˜](./4.å¸¸è§é—®é¢˜.md) - è§£ç­”ç–‘æƒ‘
- ğŸ  [è¿”å›é¦–é¡µ](./README.md)
