# GitLab 安装文档

在所有主流平台上安装 GitLab 的详细指南。

---

## 目录

- [安装方式](#安装方式)
- [Docker（推荐）](#docker推荐)
- [Ubuntu/Debian](#ubuntudebian)
- [CentOS/RHEL](#centosrhel)
- [系统要求](#系统要求)
- [初始配置](#初始配置)

---

## 安装方式

| 方式 | 描述 | 适用场景 |
|------|------|----------|
| **Docker** | 容器化部署 | 快速测试 |
| **Linux 包** | 官方 deb/rpm 包 | 生产环境推荐 |
| **Helm** | Kubernetes 部署 | 云原生环境 |

> **注意：** GitLab 不支持 Windows，请使用虚拟机。

---

## Docker（推荐）

### 快速启动

```bash
# 运行 GitLab CE
docker run -d \
  --name gitlab \
  --hostname gitlab.example.com \
  -p 8080:80 -p 8443:443 -p 2222:22 \
  -v gitlab-config:/etc/gitlab \
  -v gitlab-logs:/var/log/gitlab \
  -v gitlab-data:/var/opt/gitlab \
  gitlab/gitlab-ce:latest
```

### 访问 GitLab

- Web: http://localhost:8080
- SSH: ssh://git@localhost:2222

### 初始登录

- 用户名: `root`
- 密码: 首次访问时设置

---

## Ubuntu/Debian

```bash
# 更新系统
sudo apt update && sudo apt upgrade -y

# 安装依赖
sudo apt install -y curl openssh-server ca-certificates tzdata perl

# 添加 GitLab 仓库
curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash

# 安装 GitLab
sudo EXTERNAL_URL="https://gitlab.example.com" apt install gitlab-ce

# 配置 GitLab
sudo gitlab-ctl reconfigure
```

---

## CentOS/RHEL

```bash
# 更新系统
sudo yum update -y

# 安装依赖
sudo yum install -y curl policycoreutils openssh-server

# 添加 GitLab 仓库
curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.rpm.sh | sudo bash

# 安装 GitLab
sudo EXTERNAL_URL="https://gitlab.example.com" yum install -y gitlab-ce

# 配置 GitLab
sudo gitlab-ctl reconfigure
```

---

## 系统要求

### 最低配置

| 组件 | 最低 | 推荐 |
|------|------|------|
| CPU | 2 核 | 4+ 核 |
| 内存 | 4 GB | 8+ GB |
| 存储 | 20 GB | 50+ GB |

---

## 初始配置

### 常用命令

```bash
# 查看状态
sudo gitlab-ctl status

# 重启 GitLab
sudo gitlab-ctl restart

# 查看日志
sudo gitlab-ctl logs

# 检查环境
sudo gitlab-rake gitlab:env:info
```

### 备份和恢复

```bash
# 备份
sudo gitlab-backup create

# 恢复
sudo gitlab-ctl stop
sudo gitlab-backup restore BACKUP=时间戳
sudo gitlab-ctl start
```

---

## 下一步

- [GitLab 使用指南](./2.使用指南.md)
- [GitLab 官方文档](https://docs.gitlab.com/)
