# OpenFeign 使用指南

## 创建 Feign 客户端

### 基本客户端

```java
@FeignClient(name = "user-service", url = "http://localhost:8081")
public interface UserClient {
    
    @GetMapping("/users/{id}")
    User getUserById(@PathVariable("id") Long id);
    
    @GetMapping("/users")
    List<User> getAllUsers();
    
    @PostMapping("/users")
    User createUser(@RequestBody User user);
}
```

### 使用 Fallback

```java
@FeignClient(name = "user-service", fallback = UserClientFallback.class)
public interface UserClient {
    @GetMapping("/users/{id}")
    User getUserById(@PathVariable("id") Long id);
}

@Component
public class UserClientFallback implements UserClient {
    @Override
    public User getUserById(Long id) {
        return new User();
    }
}
```

## 请求参数

### 路径变量

```java
@GetMapping("/users/{id}")
User getUserById(@PathVariable("id") Long id);
```

### 查询参数

```java
@GetMapping("/users")
List<User> searchUsers(@RequestParam("name") String name);
```

### 请求体

```java
@PostMapping("/users")
User createUser(@RequestBody User user);
```

## 最佳实践

1. **使用接口** - 将 Feign 客户端定义为接口
2. **添加 Fallback** - 优雅处理失败
3. **配置超时** - 设置适当的超时时间
4. **使用熔断器** - 防止级联故障

## 相关链接

- [OpenFeign GitHub](https://github.com/OpenFeign/feign)
- [Spring Cloud OpenFeign](https://spring.io/projects/spring-cloud-openfeign)
