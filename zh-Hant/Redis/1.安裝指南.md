# Redis 安裝指南

在所有主流平台上安裝 Redis 的完整指南。

---

## 目錄

- [什麼是 Redis？](#什麼是-redis)
- [Linux](#linux)
  - [Ubuntu / Debian](#ubuntu--debian)
  - [CentOS / RHEL](#centos--rhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Homebrew（推薦）](#homebrew推薦)
  - [MacPorts](#macports)
- [Windows](#windows)
  - [WSL2（推薦）](#wsl2推薦)
  - [Memurai（推薦替代方案）](#memurai推薦替代方案)
  - [Docker](#docker)
- [驗證安裝](#驗證安裝)
- [設定](#設定)
- [Redis CLI 基礎命令基礎命令)
-](#redis-cli- [解除安裝](#解除安裝)
- [下一步](#下一步)

---

## 什麼是 Redis？

Redis 是一個開源的記憶體資料結構儲存系統，用作資料庫、快取和訊息中介軟體。它支援字串、雜湊表、列表、集合、有序集合等多種資料結構。

---

## Linux

### Ubuntu / Debian

#### 方法一：APT（推薦）

```bash
# 更新軟體包索引
sudo apt update

# 安裝 Redis
sudo apt install redis-server

# 啟動 Redis
sudo systemctl start redis-server

# 開機自動啟動
sudo systemctl enable redis-server
```

#### 方法二：原始碼編譯

```bash
# 安裝相依套件
sudo apt install build-essential tcl

# 下載 Redis
cd /tmp
wget https://github.com/redis/redis/archive/7.2.4.tar.gz
tar -zxvf 7.2.4.tar.gz
cd redis-7.2.4

# 編譯安裝
make
sudo make install
```

### CentOS / RHEL

#### 使用 YUM

```bash
# 安裝 EPEL 倉庫
sudo yum install epel-release

# 安裝 Redis
sudo yum install redis

# 啟動 Redis
sudo systemctl start redis

# 開機自動啟動
sudo systemctl enable redis
```

### Fedora

```bash
# 安裝 Redis
sudo dnf install redis

# 啟動 Redis
sudo systemctl start redis
sudo systemctl enable redis
```

### Arch Linux

```bash
# 安裝 Redis
sudo pacman -S redis

# 啟動 Redis
sudo systemctl start redis
sudo systemctl enable redis
```

---

## macOS

### Homebrew（推薦）

```bash
# 安裝 Homebrew（如需要）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安裝 Redis
brew install redis

# 啟動 Redis
brew services start redis

# 或手動執行
redis-server
```

### MacPorts

```bash
sudo port install redis
```

---

## Windows

### WSL2（推薦）

```bash
# 在 WSL2 中安裝 Redis（Ubuntu）
sudo apt update
sudo apt install redis-server

# 啟動 Redis
sudo systemctl start redis
```

### Memurai（推薦替代方案）

1. 從 https://www.memurai.com/ 下載 Memurai
2. 安裝並作為 Windows 服務執行

### Docker

```bash
# 執行 Redis 容器
docker run -d --name redis -p 6379:6379 redis:latest

# 持久化儲存
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --appendonly yes

# 設定密碼
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --requirepass yourpassword
```

---

## 驗證安裝

```bash
# 檢查 Redis 版本
redis-server --version

# 檢查 Redis 狀態
sudo systemctl status redis

# 連線 Redis
redis-cli

# 測試連線
redis-cli ping
# 應該回傳: PONG
```

---

## 設定

### 主要設定檔

- **Ubuntu/Debian**: `/etc/redis/redis.conf`
- **CentOS/RHEL**: `/etc/redis.conf`
- **macOS**: `/usr/local/etc/redis.conf` (Homebrew)
- **Docker**: `/etc/redis/redis.conf`

### 基礎設定

```bash
# 綁定本機（安全）
bind 127.0.0.1

# 設定密碼
requirepass yourpassword

# 啟用持久化
appendonly yes

# 設定最大記憶體
maxmemory 256mb

# 設定記憶體淘汰策略
maxmemory-policy allkeys-lru
```

### 常用命令

```bash
# 啟動 Redis
redis-server

# 使用自訂設定檔啟動
redis-server /etc/redis/redis.conf

# 連線 Redis
redis-cli

# 帶密碼連線
redis-cli -a yourpassword

# 停止 Redis
sudo systemctl stop redis
```

---

## Redis CLI 基礎命令

```bash
# 設定鍵
redis-cli SET mykey "Hello"

# 取得鍵
redis-cli GET mykey

# 查看所有鍵
redis-cli KEYS "*"

# 刪除鍵
redis-cli DEL mykey

# 設定過期時間（秒）
redis-cli SETEX mykey 60 "value"

# 查看伺服器資訊
redis-cli INFO
```

---

## 解除安裝

### Ubuntu/Debian

```bash
sudo apt remove redis-server
```

### CentOS/RHEL

```bash
sudo yum remove redis
```

### macOS (Homebrew)

```bash
brew uninstall redis
```

---

## 下一步

- [使用指南](./2.使用指南.md)
- 閱讀 [官方 Redis 文件](https://redis.io/docs/)
