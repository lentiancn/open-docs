# FantasyTalking 使用指南

本指南介绍如何使用 FantasyTalking 生成 talking head 视频。

## 快速开始

### 基本用法

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4
```

## 输入要求

### 图片要求

- 格式：JPG、PNG
- 分辨率：512x512 或更高
- 人脸：正面朝向、五官清晰
- 背景：简单背景为佳

### 音频要求

- 格式：WAV、MP3
- 采样率：16000 Hz 或更高
- 时长：无限制
- 语言：多语言支持

## 高级用法

### 人脸增强

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4 \
  --face_enhancer
```

### 批处理

```bash
python batch_inference.py \
  --image_dir images/ \
  --audio_dir audio/ \
  --output_dir results/
```

### 自定义帧率

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4 \
  --fps 30
```

## 配置

### 配置文件

编辑 `config.yaml`：

```yaml
inference:
  face_enhancer: true
  fps: 25
  output_resolution: 512
  
model:
  checkpoint: "checkpoints/fantasytalking.pth"
```

## 模型训练

### 准备数据集

```bash
python prepare_dataset.py \
  --video_dir videos/ \
  --output_dir dataset/
```

### 训练

```bash
python train.py \
  --config config/train.yaml \
  --epochs 100
```

## 最佳实践

### 1. 使用高质量图片

- 使用清晰、正面的照片
- 良好的照明条件
- 较高分辨率为佳

### 2. 匹配音频质量

- 清晰的音频，无背景噪音
- 适当的采样率
- 语言与人脸种族相匹配

### 3. 后处理

- 使用人脸增强以获得更好的质量
- 根据需要调整帧率

## 故障排除

### 视频太暗？

检查来源图片的照明。

### 音频不同步？

确保音频采样率正确。

### 质量差？

尝试使用人脸增强选项。

## 相关资源

- [GitHub](https://github.com/FantasyTalking/FantasyTalking)
- [演示](https://fantasytalking.demo.com)
