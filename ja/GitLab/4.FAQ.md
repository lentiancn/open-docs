# GitLab FAQ

> GitLabに関するよくある質問

---

## 一般

### GitLabとは何ですか？

GitLabは、Gitリポジトリ管理、問題追跡、CI/CDパイプラインなどを提供する完全なDevOpsプラットフォームです。SaaS（gitlab.com）として、またはセルフホストとして使用できます。

### GitLabとGitHubの違いは？

| 機能 | GitLab | GitHub |
|------|--------|--------|
| CI/CD | 組み込み | GitHub Actions |
| セルフホスト | 可能 | Enterpriseのみ |
| コンテナレジストリ | 組み込み | GitHub Packages |
| Wiki | 組み込み | 組み込み |
| 問題追跡 | 高度 | 基本 |

---

## インストール

### 最小要件は何ですか？

| リソース | 最小 |
|---------|-----|
| CPU | 2コア |
| RAM | 4GB |
| ストレージ | 10GB |

### 依存関係エラーでインストールが失敗する？

**解決策**:
1. システムパッケージを更新
2. 不足している依存関係を手動でインストール
3. 競合するパッケージを確認

### インストール後に外部URLを変更する方法は？

```bash
# 設定を編集
sudo vim /etc/gitlab/gitlab.rb
external_url 'https://新しいURL.com'

# 再設定
sudo gitlab-ctl reconfigure
```

---

## 使用方法

### rootパスワードをリセットする方法は？

```bash
# Railsコンソールを開く
sudo gitlab-rails console -e production

# パスワードを見つけてリセット
user = User.where(id: 1).first
user.password = '新しいパスワード'
user.password_confirmation = '新しいパスワード'
user.save!
```

### GitLabをバックアップする方法は？

```bash
# バックアップを作成
sudo gitlab-backup create

# バックアップ場所: /var/opt/gitlab/backups
```

### バックアップから復元する方法は？

```bash
# GitLabを停止
sudo gitlab-ctl stop

# バックアップを復元
sudo gitlab-backup restore BACKUP=タイムスタンプ

# GitLabを開始
sudo gitlab-ctl start
```

---

## CI/CD

### パイプラインがトリガーされない？

**解決策**:
1. .gitlab-ci.ymlの構文を確認
2. GitLab Runner 등록を確認
3. プロジェクト設定でRunner的状态を確認

### CIでDockerを使用する方法は？

```yaml
image: docker:latest

services:
  - docker:dind

build:
  script:
    - docker build -t my-image .
```

### 依存関係をキャッシュする方法は？

```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
    - .npm/
```

---

## セキュリティ

### 2FAを有効にする方法は？

1. 「ユーザー設定」→「アカウント」へ移動
2. 「二要素認証を有効にする」をクリック
3. QRコードを認証アプリてスキャン
4. バックアップコードを保存

### 脆弱性をスキャンする方法は？

プロジェクト設定でセキュリティダッシュボードを有効化するか、テンプレートを使用:
```yaml
include:
  - template: Security/SAST.gitlab-ci.yml
```

---

## パフォーマンス

### GitLabが遅い？

**解決策**:
1. サーバー resourceを増設
2. Prometheusモニタリングを有効化
3. PostgreSQL設定を最適化
4. CI用に別々のRunnerを使用

### GitLabの健康状態を確認する方法は？

```bash
sudo gitlab-rake gitlab:env:info
sudo gitlab-ctl status
```

---

## トラブルシューティング

### 502 Bad Gatewayエラー？

**解決策**:
1. unicorn/workerプロセスを確認
2. Workerメモリを増設
3. ログを確認: `sudo gitlab-ctl tail`

### Git操作が失敗する？

**解決策**:
1. SSH鍵が正しく設定されていることを確認
2. HTTPS証明書を確認
3. リポジトリ権限を確認

---

## リソース

- 公式ドキュメント: https://docs.gitlab.com/
- コミュニティフォーラム: https://forum.gitlab.com/
- GitLab Stack Overflow: https://stackoverflow.com/questions/tagged/gitlab
