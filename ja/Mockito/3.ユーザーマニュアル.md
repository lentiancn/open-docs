# Mockito ユーザーマニュアル

Mockitoの詳細な使用ガイド。

## 基本

### モックの作成

```java
// インターフェースのモック
List<String> mockList = mock(List.class);

// クラスのモック
MyService myService = mock(MyService.class);
```

### スタブ設定

```java
// 単純なスタブ
when(mockList.get(0)).thenReturn("first");
when(mockList.size()).thenReturn(10);

// 例外をスロー
when(mockList.get(0)).thenThrow(new IndexOutOfBoundsException());
```

### 検証

```java
// メソッドが呼び出されたことを確認
verify(mockList).add("one");

// 呼び出し回数の確認
verify(mockList, times(1)).add("one");
verify(mockList, never()).clear();
```

## 上級コンセプト

### 引数マッチャー

```java
// 任意の引数
when(mockList.get(anyInt())).thenReturn("element");

// 特定のマッチャー
when(mockList.contains(argThat(s -> s.startsWith("test")))).thenReturn(true);
```

### Spy

```java
List<String> spyList = spy(new ArrayList<>());

// 一部の実際の動作
doReturn("real").when(spyList).get(0);
```

## ベストプラクティス

1. **インターフェースのモック** - 常にインターフェースをモックしてください
2. **実際のオブジェクトしない** - 実際のオブジェクトをモックに変換しないでください
3. **命名** - モックには意味のある名前を使用してください

## 一般的なケース

### データベースのモック

```java
@Mock
private UserRepository userRepository;

@Test
void testUserCreation() {
    User user = new User("test@test.com");
    when(userRepository.save(any(User.class))).thenReturn(user);
    
    User result = userService.createUser("test@test.com");
    
    assertNotNull(result);
    verify(userRepository).save(any(User.class));
}
```

## リソース

- ウェブサイト: https://site.mockito.org
- GitHub: https://github.com/mockito/mockito

## ライセンス

MIT License
