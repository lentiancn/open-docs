# APISIX FAQ

Часто задаваемые вопросы и ответы.

## Установка

### Q: Контейнер Docker не запускается?

**Решения:**
1. Убедитесь, что Docker установлен и работает
```bash
docker --version
docker ps
```
2. Проверьте, заняты ли порты
```bash
netstat -tlnp | grep 9080
```
3. Посмотрите логи контейнера
```bash
docker logs apisix
docker logs etcd
```

### Q: Ошибка подключения к etcd?

**Решения:**
1. Убедитесь, что etcd запущен
```bash
docker ps | grep etcd
```
2. Проверьте, слушает ли etcd на правильном порту

### Q: Порт занят?

**Решения:**
1. Найдите процесс, использующий порт
```bash
lsof -i:9080
```
2. Убейте процесс или измените порт APISIX
```yaml
apisix:
  node_listen: 9081
```

## Использование

### Q: Маршрут не работает?

**Решения:**
1. Проверьте формат конфигурации маршрута
2. Убедитесь, что маршрут создан правильно
3. Проверьте логи ошибок
```bash
tail -f logs/error.log
```

### Q: Плагин не работает?

**Решения:**
1. Убедитесь, что плагин включен
2. Проверьте формат конфигурации плагина

### Q: Upstream недоступен?

**Решения:**
1. Убедитесь, что upstream-сервис работает
2. Проверьте сетевое подключение
3. Проверьте правила файрвола

## Конфигурация

### Q: Как настроить SSL/TLS сертификаты?

**Решения:**
1. Загрузите SSL сертификат
```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/ssls/1 \
  -H "X-API-KEY: 123456" \
  -d '{"cert":"содержание","key":"приватный","sni":"example.com"}'
```

### Q: Как настроить CORS?

**Решения:**
Используйте плагин cors:

```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/routes/1 \
  -H "X-API-KEY: 123456" \
  -d '{"uri":"/api/*","plugins":{"cors":{}}}'
```

## Производительность

### Q: Использование памяти растёт?

**Решения:**
1. Проверьте на утечки памяти в плагинах
2. Ограничьте размер буфера

### Q: Высокая нагрузка CPU?

**Решения:**
1. Проверьте объём запросов
2. Оптимизируйте правила regex
3. Сократите количество плагинов

## Безопасность

### Q: Как защитить Admin API?

**Решения:**
1. Используйте сильные ключи
2. Ограничьте IP-адреса
3. Включите HTTPS

### Q: Как предотвратить атаки?

**Решения:**
1. Включите плагин ограничения частоты
2. Включите чёрный список IP
3. Включите файрвол
4. Отслеживайте аномальные запросы

## Ресурсы

### Q: Где изучить APISIX?

- Документация: https://apisix.apache.org/docs
- GitHub: https://github.com/apache/apisix
- Форум: https://apisix.discourse.group
