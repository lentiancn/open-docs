# Docker 安裝文檔

在所有主流平台上安裝 Docker 的完整指南。

---

## 目錄

- [Linux](#linux)
  - [Ubuntu/Debian](#ubuntudebian)
  - [CentOS/RHEL](#centosrhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Intel Mac](#intel-mac)
  - [Apple Silicon (M1/M2/M3)](#apple-silicon-m1m2m3)
- [Windows](#windows)
  - [WSL2（推薦）](#wsl2推薦)
  - [Docker Desktop](#docker-desktop)
- [驗證安裝](#驗證安裝)
- [安裝後配置](#安裝後配置)

---

## Linux

### Ubuntu / Debian

```bash
# 更新軟體包索引
sudo apt update

# 安裝依賴
sudo apt install -y ca-certificates curl gnupg lsb-release

# 添加 Docker 官方 GPG 金鑰
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# 添加 Docker 倉庫
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# 安裝 Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 啟動並開機自啟
sudo systemctl start docker
sudo systemctl enable docker

# 添加當前使用者到 docker 組
sudo usermod -aG docker $USER
```

### CentOS / RHEL

```bash
# 安裝依賴
sudo yum install -y yum-utils

# 添加 Docker 倉庫
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# 安裝 Docker
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 啟動並開機自啟
sudo systemctl start docker
sudo systemctl enable docker
```

### Fedora

```bash
# 安裝依賴
sudo dnf -y install dnf-plugins-core

# 添加 Docker 倉庫
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo

# 安裝 Docker
sudo dnf install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 啟動並開機自啟
sudo systemctl start docker
sudo systemctl enable docker
```

### Arch Linux

```bash
# 安裝 Docker
sudo pacman -S docker

# 啟動並開機自啟
sudo systemctl start docker
sudo systemctl enable docker
```

---

## macOS

### Intel Mac

```bash
# 方式一：Homebrew
brew install --cask docker

# 方式二：手動下載
# 從 https://www.docker.com/products/docker-desktop 下載
```

### Apple Silicon (M1/M2/M3)

```bash
# Homebrew（自動安裝 ARM 版本）
brew install --cask docker

# 或從 Docker 官網下載
# https://www.docker.com/products/docker-desktop
```

**注意：** Apple Silicon 版本的 Docker Desktop 包含 Rosetta 2，用於兼容 x86_64 映像檔。

---

## Windows

### WSL2（推薦）

```powershell
# 1. 啟用 WSL2
wsl --install

# 2. 重啟電腦

# 3. 在 WSL2 中安裝 Docker
sudo apt update
sudo apt install -y docker.io
sudo service docker start
```

### Docker Desktop

1. **下載**： [Docker Desktop for Windows](https://www.docker.com/products/docker-desktop)
2. **安裝**：執行安裝程式
3. **啟用 WSL2**：當提示時啟用（推薦）
4. **啟動**：打開 Docker Desktop

**系統要求：**
- Windows 10/11 64 位元
- 啟用 WSL2
- 啟用 Hyper-V（Windows 10）

---

## 驗證安裝

```bash
# 檢查 Docker 版本
docker --version

# 檢查 Docker Compose 版本
docker-compose --version

# 運行測試容器
docker run hello-world
```

---

## 安裝後配置

### Linux：非 root 使用者運行 Docker

```bash
# 建立 docker 組
sudo groupadd docker

# 將使用者添加到 docker 組
sudo usermod -aG docker $USER

# 重新登入使更改生效
```

### Docker Compose（獨立版本）

```bash
# Linux/macOS
sudo curl -L "https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

---

## 卸載 Docker

### Ubuntu/Debian

```bash
sudo apt purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo rm -rf /var/lib/docker
```

### macOS

```bash
# Homebrew 方式
brew uninstall --cask docker
```

### Windows

打開 Docker Desktop → 設定 → 故障排除 → 清除/刪除資料

---

## 下一步

- [使用指南](./2.使用指南.md)
- 閱讀 [官方 Docker 文檔](https://docs.docker.com/)
