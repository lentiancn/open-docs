# DragonTalker Installation Guide

> Detailed installation instructions for DragonTalker on all major operating systems
> 
> Updated: February 2026

---

## 1. Introduction

DragonTalker is a deep learning-based talking head generation tool that creates realistic talking head videos from a single static image and an audio file. This technology is widely used in virtual anchors, digital human customer service, AI education, and other scenarios.

### 1.1 Core Technology

DragonTalker uses a multi-stage pipeline architecture: first extracts mel-spectrogram features through audio analysis; then uses 3D facial landmark detection to obtain facial motion parameters; next generates continuous video frames using image rendering technology; finally enhances video quality through face restoration networks. The entire process does not require large training datasets and is easy to deploy.

### 1.2 Key Features

- Audio-driven animation: Generate synchronized talking videos from a static image and audio file
- 3D motion estimation: Natural head poses and facial expressions based on 3D facial landmark reconstruction
- Multiple pose support: 45+ predefined head pose templates for various application scenarios
- Face enhancement: Integrated GFPGAN, RestoreFormer, CodeFormer for advanced face restoration
- Web interface: User-friendly browser-based operation without complex environment setup
- Python API: Complete programming interface for secondary development and batch processing

---

## 2. System Requirements

### 2.1 Hardware Configuration

| Component | Minimum | Recommended |
|----------|---------|--------------|
| GPU | NVIDIA GTX 1060 (6GB VRAM) | NVIDIA RTX 3080+ (16GB VRAM) |
| RAM | 8GB | 32GB |
| Storage | 20GB available | 50GB SSD |

### 2.2 Software Environment

| Software | Version | Notes |
|----------|---------|-------|
| OS | Ubuntu 18.04/20.04/22.04, Windows 10/11, macOS 11+ | 64-bit recommended |
| Python | 3.8 - 3.10 | Higher versions may have compatibility issues |
| CUDA | 11.7+ | Required for GPU inference |
| cuDNN | Matches CUDA version | Deep learning acceleration library |
| ffmpeg | Any stable version | Video codec required |

### 2.3 Network Requirements

Project model files are large. Initial installation requires good network connectivity to overseas download nodes. Proxy configuration or domestic mirror sources are recommended.

---

## 3. Installation Steps

### 3.1 Ubuntu/Linux Installation

#### 3.1.1 Install System Dependencies

Open terminal and execute the following commands:

```bash
# Update package lists
sudo apt-get update

# Install basic build tools
sudo apt-get install -y build-essential git wget curl

# Install Python and related tools
sudo apt-get install -y python3.8 python3-pip python3-venv

# Install video processing dependencies
sudo apt-get install -y ffmpeg libsm6 libxext6 libxrender-dev libgl1-mesa-glx
```

#### 3.1.2 Create Virtual Environment

To avoid conflicts with other Python projects, use a virtual environment:

```bash
# Navigate to project directory
cd DragonTalker

# Create virtual environment
python3 -m venv venv

# Activate virtual environment
source venv/bin/activate

# Verify activation
python --version
```

#### 3.1.3 Install Python Dependencies

```bash
# Upgrade pip
pip install --upgrade pip

# Install PyTorch (choose version matching your CUDA)
pip install torch==1.12.1+cu113 torchvision==0.13.1+cu113 -f https://download.pytorch.org/whl/cu113

# Install project dependencies
pip install -r requirements.txt
```

If network issues occur, use domestic mirrors:

```bash
# Use Tsinghua mirror
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r requirements.txt
```

#### 3.1.4 Download Pre-trained Models

```bash
# Execute model download script
bash scripts/download_models.sh
```

This script automatically downloads:
- Face detection model: face_detection
- 3D keypoint model: 3d_keypoint_estimator
- Face reenactment model: face_reenactment
- Face enhancement models: gfpgan, restoreformer, codeformer

Model files are typically saved in the `checkpoints` directory, total size approximately 500MB.

### 3.2 Windows Installation

#### 3.2.1 Install Prerequisites

1. **Install Python**: Download Python 3.8-3.10 from Python.org, check "Add Python to PATH"

2. **Install Git**: Download and install from Git-scm.com

3. **Install CUDA**: Download matching CUDA Toolkit 11.7+ from NVIDIA website based on your GPU model

4. **Install ffmpeg**: Use Chocolatey package manager:
```powershell
choco install ffmpeg
```

#### 3.2.2 Clone and Configure Project

```powershell
# Clone project
git clone https://github.com/your-repo/DragonTalker.git
cd DragonTalker

# Create virtual environment
python -m venv venv

# Activate virtual environment
venv\Scripts\activate

# Install dependencies
pip install --upgrade pip
pip install torch==1.12.1+cu113 --extra-index-url https://download.pytorch.org/whl/cu113
pip install -r requirements.txt
```

#### 3.2.3 Download Model Files

```powershell
# Execute in PowerShell
.\scripts\download_models.ps1
```

### 3.3 macOS Installation

#### 3.3.1 Install Homebrew and Dependencies

```bash
# Install Homebrew (if not installed)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Install required software
brew install ffmpeg python@3.10 git wget
```

#### 3.3.2 Configure Python Environment

```bash
# Clone project
git clone https://github.com/your-repo/DragonTalker.git
cd DragonTalker

# Create virtual environment
python3 -m venv venv
source venv/bin/activate

# Install PyTorch (macOS version uses CPU or MPS)
pip install torch torchvision

# Install project dependencies
pip install -r requirements.txt
```

#### 3.3.3 Download Models

```bash
bash scripts/download_models.sh
```

---

## 4. Verifying Installation

After installation, verify the environment is correctly configured:

### 4.1 Check Python Environment

```bash
# Activate virtual environment
source venv/bin/activate  # Linux/macOS
# or
venv\Scripts\activate     # Windows

# Check key package versions
python -c "import torch; print(f'PyTorch: {torch.__version__}')"
python -c "import cv2; print(f'OpenCV: {cv2.__version__}')"
python -c "import librosa; print(f'Librosa: {librosa.__version__}')"
```

### 4.2 Run Example

```bash
python inference.py \
  --source_image examples/source_image.jpg \
  --driven_audio examples/driven_audio.wav \
  --result_dir ./results \
  --preprocess full \
  --enhancer gfpgan
```

After successful execution, a video file named `result.mp4` will be generated in the `./results` directory.

### 4.3 Troubleshooting

| Issue | Cause | Solution |
|-------|--------|-----------|
| CUDA out of memory | Insufficient VRAM | Reduce batch_size or use smaller input resolution |
| ImportError: No module named 'xxx' | Incomplete dependencies | Re-run pip install -r requirements.txt |
| Extremely slow generation speed | GPU not recognized | Verify CUDA installation, run nvidia-smi |
| Model download failed | Network issues | Configure proxy or use domestic mirrors |

---

## 5. Docker Installation (Recommended)

To simplify environment setup, Docker deployment is recommended:

### 5.1 Build Image

```bash
docker build -t dragon-talker:latest .
```

### 5.2 Run Container

```bash
# Map local directories for input/output
docker run --gpus all -v $(pwd)/examples:/app/examples \
  -v $(pwd)/results:/app/results \
  dragon-talker:latest \
  python inference.py \
    --source_image /app/examples/source_image.jpg \
    --driven_audio /app/examples/driven_audio.wav \
    --result_dir /app/results
```

---

## 6. Configuration

### 6.1 Configuration File Locations

The `config` folder in the project root contains various parameter configurations:

- `dataset_config.yaml`: Dataset path configuration
- `model_config.yaml`: Model parameter configuration
- `inference_config.yaml`: Inference parameter configuration

### 6.2 Common Parameter Adjustments

| Parameter | Description | Recommended Value |
|----------|-------------|-------------------|
| --preprocess | Image preprocessing mode | full |
| --enhancer | Face enhancement algorithm | gfpgan |
| --outputfps | Output video frame rate | 25 |
| --faceid_weight | Identity preservation weight | 0.5 |

---

## 7. Uninstallation

To uninstall DragonTalker:

```bash
# Exit virtual environment
deactivate

# Remove virtual environment directory
rm -rf venv

# If using Docker
docker rmi dragon-talker:latest
```

---

## 8. Reference Resources

- Official GitHub: https://github.com/your-repo/DragonTalker
- Project Paper: See `docs/paper.md`
- Community Discussion: https://github.com/your-repo/DragonTalker/discussions
- Issue Tracker: https://github.com/your-repo/DragonTalker/issues
