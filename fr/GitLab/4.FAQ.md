# GitLab FAQ

> Questions fréquentes sur GitLab

---

## Général

### Qu'est-ce que GitLab?

GitLab est une plateforme DevOps complète offrant la gestion de dépôts Git, le suivi des problèmes, les pipelines CI/CD et plus. Elle peut être utilisée comme service SaaS (gitlab.com) ou auto-hébergée.

### GitLab vs GitHub?

| Fonctionnalité | GitLab | GitHub |
|----------------|--------|--------|
| CI/CD | Intégré | GitHub Actions |
| Auto-hébergé | Oui | Enterprise seulement |
| Registre de Conteneurs | Intégré | GitHub Packages |
| Wiki | Intégré | Intégré |
| Suivi des Problèmes | Avancé | Basique |

---

## Installation

### Quelles sont les exigences minimales?

| Ressource | Minimum |
|-----------|---------|
| CPU | 2 cœurs |
| RAM | 4 Go |
| Stockage | 10 Go |

### L'installation échoue avec une erreur de dépendance?

**Solution**:
1. Mettre à jour les paquets système
2. Installer manuellement les dépendances manquantes
3. Vérifier les paquets conflictuels

### Comment changer l'URL externe après l'installation?

```bash
# Éditer la configuration
sudo vim /etc/gitlab/gitlab.rb
external_url 'https://nouvelle-url.com'

# Reconfigurer
sudo gitlab-ctl reconfigure
```

---

## Utilisation

### Comment réinitialiser le mot de passe root?

```bash
# Ouvrir la console Rails
sudo gitlab-rails console -e production

# Trouver et réinitialiser le mot de passe
user = User.where(id: 1).first
user.password = 'nouveau_mot_de_passe'
user.password_confirmation = 'nouveau_mot_de_passe'
user.save!
```

### Comment sauvegarder GitLab?

```bash
# Créer une sauvegarde
sudo gitlab-backup create

# Emplacement des sauvegardes: /var/opt/gitlab/backups
```

### Comment restaurer depuis une sauvegarde?

```bash
# Arrêter GitLab
sudo gitlab-ctl stop

# Restaurer la sauvegarde
sudo gitlab-backup restore BACKUP=horodatage

# Démarrer GitLab
sudo gitlab-ctl start
```

---

## CI/CD

### Le pipeline ne se déclenche pas?

**Solution**:
1. Vérifier la syntaxe .gitlab-ci.yml
2. Vérifier l'enregistrement du runner GitLab
3. Vérifier le statut du runner dans les paramètres du projet

### Comment utiliser Docker dans CI?

```yaml
image: docker:latest

services:
  - docker:dind

build:
  script:
    - docker build -t mon-image .
```

### Comment mettre en cache les dépendances?

```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
    - .npm/
```

---

## Sécurité

### Comment activer 2FA?

1. Allez dans Paramètres Utilisateur > Compte
2. Cliquez sur "Activer l'Authentification à Deux Facteurs"
3. Scannez le code QR avec l'application d'authentification
4. Sauvegardez les codes de sauvegarde

### Comment analyser les vulnérabilités?

Activer les tableaux de bord de sécurité dans les paramètres du projet ou utiliser des modèles:
```yaml
include:
  - template: Security/SAST.gitlab-ci.yml
```

---

## Performance

### GitLab est lent?

**Solutions**:
1. Augmenter les ressources serveur
2. Activer la surveillance Prometheus
3. Optimiser les paramètres PostgreSQL
4. Utiliser des runners séparés pour CI

### Comment vérifier la santé de GitLab?

```bash
sudo gitlab-rake gitlab:env:info
sudo gitlab-ctl status
```

---

## Dépannage

### Erreur 502 Bad Gateway?

**Solution**:
1. Vérifier les processus unicorn/worker
2. Augmenter la mémoire des workers
3. Consulter les logs: `sudo gitlab-ctl tail`

### Les opérations Git échouent?

**Solution**:
1. Vérifier que les clés SSH sont correctement configurées
2. Vérifier les certificats HTTPS
3. Vérifier les permissions du dépôt

---

## Ressources

- Documentation Officielle: https://docs.gitlab.com/
- Forum Communauté: https://forum.gitlab.com/
- GitLab Stack Overflow: https://stackoverflow.com/questions/tagged/gitlab
