# Redis 安装文档

在所有主流平台上安装 Redis 的完整指南。

---

## 目录

- [什么是 Redis？](#什么是-redis)
- [Linux](#linux)
  - [Ubuntu / Debian](#ubuntu--debian)
  - [CentOS / RHEL](#centos--rhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Homebrew（推荐）](#homebrew推荐)
  - [MacPorts](#macports)
- [Windows](#windows)
  - [WSL2（推荐）](#wsl2推荐)
  - [Memurai（推荐替代方案）](#memurai推荐替代方案)
  - [Docker](#docker)
- [验证安装](#验证安装)
- [配置](#配置)
- [Redis CLI 基础命令](#redis-cli-基础命令)
- [卸载](#卸载)
- [下一步](#下一步)

---

## 什么是 Redis？

Redis 是一个开源的内存数据结构存储系统，用作数据库、缓存和消息中间件。它支持字符串、哈希表、列表、集合、有序集合等多种数据结构。

---

## Linux

### Ubuntu / Debian

#### 方法一：APT（推荐）

```bash
# 更新软件包索引
sudo apt update

# 安装 Redis
sudo apt install redis-server

# 启动 Redis
sudo systemctl start redis-server

# 开机自启
sudo systemctl enable redis-server
```

#### 方法二：源码编译

```bash
# 安装依赖
sudo apt install build-essential tcl

# 下载 Redis
cd /tmp
wget https://github.com/redis/redis/archive/7.2.4.tar.gz
tar -zxvf 7.2.4.tar.gz
cd redis-7.2.4

# 编译安装
make
sudo make install
```

### CentOS / RHEL

#### 使用 YUM

```bash
# 安装 EPEL 仓库
sudo yum install epel-release

# 安装 Redis
sudo yum install redis

# 启动 Redis
sudo systemctl start redis

# 开机自启
sudo systemctl enable redis
```

### Fedora

```bash
# 安装 Redis
sudo dnf install redis

# 启动 Redis
sudo systemctl start redis
sudo systemctl enable redis
```

### Arch Linux

```bash
# 安装 Redis
sudo pacman -S redis

# 启动 Redis
sudo systemctl start redis
sudo systemctl enable redis
```

---

## macOS

### Homebrew（推荐）

```bash
# 安装 Homebrew（如需要）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 Redis
brew install redis

# 启动 Redis
brew services start redis

# 或手动运行
redis-server
```

### MacPorts

```bash
sudo port install redis
```

---

## Windows

### WSL2（推荐）

```bash
# 在 WSL2 中安装 Redis（Ubuntu）
sudo apt update
sudo apt install redis-server

# 启动 Redis
sudo systemctl start redis
```

### Memurai（推荐替代方案）

1. 从 https://www.memurai.com/ 下载 Memurai
2. 安装并作为 Windows 服务运行

### Docker

```bash
# 运行 Redis 容器
docker run -d --name redis -p 6379:6379 redis:latest

# 持久化存储
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --appendonly yes

# 设置密码
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --requirepass yourpassword
```

---

## 验证安装

```bash
# 检查 Redis 版本
redis-server --version

# 检查 Redis 状态
sudo systemctl status redis

# 连接 Redis
redis-cli

# 测试连接
redis-cli ping
# 返回: PONG
```

---

## 配置

### 主配置文件

- **Ubuntu/Debian**: `/etc/redis/redis.conf`
- **CentOS/RHEL**: `/etc/redis.conf`
- **macOS**: `/usr/local/etc/redis.conf` (Homebrew)
- **Docker**: `/etc/redis/redis.conf`

### 基础配置

```bash
# 绑定本地（安全）
bind 127.0.0.1

# 设置密码
requirepass yourpassword

# 启用持久化
appendonly yes

# 设置最大内存
maxmemory 256mb

# 设置内存淘汰策略
maxmemory-policy allkeys-lru
```

### 常用命令

```bash
# 启动 Redis
redis-server

# 使用自定义配置启动
redis-server /etc/redis/redis.conf

# 连接 Redis
redis-cli

# 带密码连接
redis-cli -a yourpassword

# 停止 Redis
sudo systemctl stop redis
```

---

## Redis CLI 基础命令

```bash
# 设置键
redis-cli SET mykey "Hello"

# 获取键
redis-cli GET mykey

# 查看所有键
redis-cli KEYS "*"

# 删除键
redis-cli DEL mykey

# 设置过期时间（秒）
redis-cli SETEX mykey 60 "value"

# 查看服务器信息
redis-cli INFO
```

---

## 卸载

### Ubuntu/Debian

```bash
sudo apt remove redis-server
```

### CentOS/RHEL

```bash
sudo yum remove redis
```

### macOS (Homebrew)

```bash
brew uninstall redis
```

---

## 下一步

- [使用指南](./2.使用指南.md)
- 阅读 [官方 Redis 文档](https://redis.io/docs/)
