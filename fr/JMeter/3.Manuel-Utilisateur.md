# JMeter Manuel Utilisateur

## Premiers pas avec JMeter

### Créer votre premier plan de test

1. **Lancer JMeter**: Démarrez l'interface GUI JMeter
2. **Ajouter un Groupe de Threads**: Clic droit sur Plan de Test → Ajouter → Groupe de Threads
3. **Configurer le Groupe de Threads**:
   - Nombre de Threads : Nombre d'utilisateurs
   - Période de Rampe : Temps pour démarrer tous les utilisateurs
   - Nombre de Boucles : Nombre d'exécutions du test
4. **Ajouter un Sampler**: Clic droit sur Groupe de Threads → Ajouter → Requête HTTP
5. **Configurer la Requête HTTP**: Entrez le nom du serveur, le chemin et les paramètres
6. **Ajouter des Listeners**: Clic droit sur Groupe de Threads → Ajouter → Listener (Arbre de Résultats, Rapport Résumé)
7. **Exécuter le Test**: Cliquez sur le bouton vert "Démarrer"

## Composants principaux

### Groupe de Threads
Le Groupe de Threads simule des utilisateurs. Paramètres clés:
- **Nombre de Threads**: Utilisateurs simultanés
- **Période de Rampe**: Temps pour atteindre la charge complète
- **Nombre de Boucles**: Nombre d'exécutions par utilisateur
- **Délai de création de threads**: Ajouter un délai entre les créations

### Samplers
Les samplers effectuent les requêtes réelles:

| Sampler | Description |
|---------|-------------|
| Requête HTTP | Tester les serveurs web |
| Requête JDBC | Tester les bases de données |
| Requête LDAP | Tester les serveurs LDAP |
| Requête FTP | Tester les serveurs FTP |
| SOAP/XML-RPC | Tester les services web |
| Sampler TCP | Tester les serveurs TCP |

### Controllers
Les controllers organisent le flux de test:

- **Simple Controller**: Regroupe les requêtes
- **Loop Controller**: Répète les requêtes
- **If Controller**: Exécution conditionnelle
- **Transaction Controller**: Mesure le temps de transaction

### Listeners
Les listeners affichent les résultats:
- **Arbre de Résultats**: Requête/réponse détaillée
- **Rapport Résumé**: Statistiques agrégées
- **Résultats Graphiques**: Graphiques de performance visuels
- **Graphique de Temps de Réponse**: Visualisation du temps de réponse

### Timers
Les timers ajoutent des délais entre les requêtes:
- **Timer Constant**: Délai fixe
- **Timer Aléatoire Gaussien**: Délai aléatoire avec distribution gaussienne
- **Timer Aléatoire Uniforme**: Délai aléatoire dans une plage

### Assertions
Les assertions valident les réponses:
- **Assertion de Réponse**: Vérifier le contenu de la réponse
- **Assertion de Durée**: Vérifier le temps de réponse
- **Assertion de Taille**: Vérifier la taille de la réponse
- **Assertion XML**: Valider le format XML

## Fonctionnalités avancées

### Extraction de données (Corrélation)

Extraire des valeurs des réponses pour les données dynamiques:

1. **Extracteur JSON**: Extraire les valeurs JSON
2. **Extracteur XPath**: Extraire les valeurs XML
3. **Extracteur CSS/JQuery**: Extraire les valeurs HTML
4. **Extracteur d'Expression Régulière**: Extraire avec regex

### Variables et fonctions

Utilisez des variables pour paramétrer les tests:
- `${variable_name}`: Référencer des variables
- `${__functionName(param)}`: Utiliser les fonctions intégrées

Fonctions courantes:
- `__Random`: Générer des valeurs aléatoires
- `__time`: Horodatage actuel
- `__counter`: Compteur incrémental
- `__property`: Lire les propriétés

### Tests distribués

Exécuter des tests sur plusieurs machines:

1. **Configurer les Serveurs Distants**: Modifier `remote_hosts` dans jmeter.properties
2. **Démarrer les Serveurs Distants**: Exécuter `jmeter-server` sur chaque esclave
3. **Exécuter le Test**: Cliquer sur "Démarrage Distant" dans la GUI

```bash
# Démarrer le serveur distant
jmeter-server

# Exécuter le test distribué
jmeter -R server1,server2 -t testplan.jmx
```

### Fichiers de propriétés

Personnaliser le comportement de JMeter:
- `jmeter.properties`: Configuration principale
- `user.properties`: Paramètres spécifiques à l'utilisateur
- `system.properties`: Propriétés système

## Bonnes pratiques

1. **Utiliser le Mode CLI pour les Tests de Charge**: Le mode GUI utilise plus de mémoire
2. **Commencer avec une Charge Faible**: Vérifier que le test fonctionne avant de monter en charge
3. **Utiliser des Assertions**: Valider les réponses pour détecter les erreurs
4. **Extraire les Données Dynamiques**: Gérer les IDs de session, tokens, etc.
5. **Nettoyer les Ressources**: Utiliser le Groupe de Threads tearDown pour le nettoyage
6. **Surveiller les Ressources Système**: CPU, mémoire, réseau
7. **Utiliser des Noms Appropriés**: Des noms clairs facilitent le débogage
8. **Contrôle de Version**: Garder les plans de test sous contrôle de version

## Optimisation des performances

### Paramètres JVM
```bash
HEAP="-Xms1g -Xmx4g"
NEW="-XX:NewSize=512m -XX:MaxNewSize=1024m"
```

### Paramètres JMeter
```properties
# Augmenter la limite de threads
thread_nums_higher_limit=10000

# Désactiver le logging verbeux
log_level.jmeter=INFO
```

## Dépannage

### OutOfMemoryError
- Augmenter la taille du heap
- Réduire le nombre de threads
- Utiliser le mode CLI

### Latence élevée
- Vérifier les conditions réseau
- Optimiser le plan de test
- Utiliser des tests distribués

### Erreurs de script
- Vérifier l'Arbre de Résultats pour les détails
- Activer le logging de débogage
- Vérifier les assertions
