# JMeter 사용자 매뉴얼

## JMeter 시작하기

### 첫 번째 테스트 플랜 만들기

1. **JMeter 시작**: JMeter GUI 시작
2. **스레드 그룹 추가**: 테스트 플랜을 우클릭 → 추가 → 스레드 그룹
3. **스레드 그룹 구성**:
   - 스레드 수: 사용자 수
   - 램프업 기간: 모든 사용자를 시작하는 시간
   - 루프 카운트: 테스트를 실행하는 횟수
4. **샘플러 추가**: 스레드 그룹을 우클릭 → 추가 → HTTP 요청
5. **HTTP 요청 구성**: 서버 이름, 경로 및 매개변수 입력
6. **리스너 추가**: 스레드 그룹을 우클릭 → 추가 → 리스너(결과 트리, 요약 보고서)
7. **테스트 실행**: 녹색 "시작" 버튼 클릭

## 핵심 구성 요소

### 스레드 그룹
스레드 그룹은 사용자를 시뮬레이션합니다. 주요 설정:
- **스레드 수**: 동시 사용자
- **람프업 기간**: 전체 부하에 도달하는 시간
- **루프 카운트**: 각 사용자가 테스트를 실행하는 횟수
- **스레드 생성 지연**: 스레드 생성 사이에 지연 추가

### 샘플러
샘플러는 실제 요청을 수행:

| 샘플러 | 설명 |
|--------|------|
| HTTP 요청 | 웹 서버 테스트 |
| JDBC 요청 | 데이터베이스 테스트 |
| LDAP 요청 | LDAP 서버 테스트 |
| FTP 요청 | FTP 서버 테스트 |
| SOAP/XML-RPC | 웹 서비스 테스트 |
| TCP 샘플러 | TCP 서버 테스트 |

### 컨트롤러
컨트롤러는 테스트 흐름을 구성:

- **심플 컨트롤러**: 요청 그룹화
- **루프 컨트롤러**: 요청 반복
- **IF 컨트롤러**: 조건부 실행
- **트랜잭션 컨트롤러**: 트랜잭션 시간 측정

### 리스너
리스너는 테스트 결과를 표시:
- **결과 트리**: 자세한 요청/응답
- **요약 보고서**: 집계 통계
- **그래프 결과**: 시각적 성능 차트
- **응답 시간 그래프**: 응답 시간 시각화

### 타이머
타이머는 요청 사이에 지연 추가:
- **고정 타이머**: 고정 지연
- **가우시안 랜덤 타이머**: 가우시안 분포의 랜덤 지연
- **균일 랜덤 타이머**: 범위 내 랜덤 지연

### 어설션
어설션은 응답을 검증:
- **응답 어설션**: 응답 콘텐츠 확인
- **지속 시간 어설션**: 응답 시간 확인
- **크기 어설션**: 응답 크기 확인
- **XML 어설션**: XML 형식 검증

## 고급 기능

### 데이터 추출(상관관계)

동적 데이터에 대해 응답에서 값 추출:

1. **JSON 추출기**: JSON 값 추출
2. **XPath 추출기**: XML 값 추출
3. **CSS/JQuery 추출기**: HTML 값 추출
4. **정규식 추출기**: 정규식으로 추출

### 변수 및 함수

변수를 사용하여 테스트 매개변수화:
- `${variable_name}`: 변수 참조
- `${__functionName(param)}`: 기본 함수 사용

일반적인 함수:
- `__Random`: 랜덤 값 생성
- `__time`: 현재 타임스탬프
- `__counter`: 증분 카운터
- `__property`: 속성 읽기

### 분산 테스트

여러 머신에서 테스트 실행:

1. **원격 서버 구성**: jmeter.properties에서 `remote_hosts` 편집
2. **원격 서버 시작**: 각 슬레이브에서 `jmeter-server` 실행
3. **테스트 실행**: GUI에서 "원격 시작" 클릭

```bash
# 원격 서버 시작
jmeter-server

# 분산 테스트 실행
jmeter -R server1,server2 -t testplan.jmx
```

### 속성 파일

JMeter 동작 사용자 정의:
- `jmeter.properties`: 기본 구성
- `user.properties`: 사용자별 설정
- `system.properties`: 시스템 속성

## 모범 사례

1. **부하 테스트에는 CLI 모드 사용**: GUI 모드는 더 많은 메모리 사용
2. **낮은 부하로 시작**: 확장 전에 테스트가 작동하는지 확인
3. **어설션 사용**: 오류를 catch하기 위해 응답 검증
4. **동적 데이터 추출**: 세션 ID, 토큰 등 처리
5. **리소스 정리**: 정리에 tearDown 스레드 그룹 사용
6. **시스템 리소스 모니터링**: CPU, 메모리, 네트워크
7. **적절한 이름 사용**: 명확한 이름은 디버깅에 도움
8. **버전 관리**: 테스트 플랜을 버전 관리

## 성능 튜닝

### JVM 설정
```bash
HEAP="-Xms1g -Xmx4g"
NEW="-XX:NewSize=512m -XX:MaxNewSize=1024m"
```

### JMeter 설정
```properties
# 스레드 제한 증가
thread_nums_higher_limit=10000

# 장황한 로깅 비활성화
log_level.jmeter=INFO
```

## 문제 해결

### OutOfMemoryError
- 힙 크기 증가
- 스레드 수 감소
- CLI 모드 사용

### 높은 지연
- 네트워크 상태 확인
- 테스트 플랜 최적화
- 분산 테스트 사용

### 스크립트 오류
- 자세한 내용은 결과 트리 확인
- 디버그 로깅 활성화
- 어설션 확인
