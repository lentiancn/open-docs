# Hadoop 常见问题

## 启动问题

### 问题：NameNode 无法启动

**排查步骤**：
1. 检查 logs/hadoop-*-namenode-*.log
2. 确认目录权限正确
3. 格式化后重复启动问题

```bash
# 重新格式化（谨慎）
hdfs namenode -format
```

### 问题：DataNode 无法启动

**排查步骤**：
1. 检查 clusterID 是否匹配
2. 检查配置文件
3. 查看 DataNode 日志

## 使用问题

### 问题：HDFS 空间不足

**解决方案**：
```bash
# 查看使用情况
hdfs dfsadmin -report

# 清理数据
hdfs dfs -rm -r /path/to/data
```

### 问题：Permission Denied

**解决方案**：
```bash
# 修改权限
hdfs dfs -chmod -R 755 /user/hadoop

# 或配置用户
<property>
    <name>hadoop.http.staticuser.user</name>
    <value>hadoop</value>
</property>
```

### 问题：端口被占用

```bash
# 查看端口占用
netstat -tlnp | grep 9000

# 修改端口
# core-site.xml 中修改 fs.defaultFS
```

## 性能问题

### 问题：MapReduce 运行慢

**优化建议**：
1. 调整 mapper/reducer 数量
2. 增加 reduce 内存
3. 使用 Combiner
4. 启用压缩

## 集群问题

### 问题：节点无法连接

1. 检查 SSH 无密码登录
2. 检查防火墙
3. 检查 hostname 解析
4. 检查网络连通性
