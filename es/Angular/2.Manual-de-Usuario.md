# Manual de Usuario de Angular

Este manual cubre todos los aspectos del desarrollo con Angular desde básico hasta avanzado.

---

## Tabla de Contenidos

1. [Introducción](#introducción)
2. [Estructura del Proyecto](#estructura-del-proyecto)
3. [Componentes](#componentes)
4. [Plantillas](#plantillas)
5. [Servicios](#servicios)
6. [Enrutamiento](#enrutamiento)
7. [Formularios](#formularios)
8. [Cliente HTTP](#cliente-http)
9. [Gestión de Estado](#gestión-de-estado)
10. [Pruebas](#pruebas)
11. [Compilación y Despliegue](#compilación-y-despliegue)
12. [Mejores Prácticas](#mejores-prácticas)

---

## Introducción

### ¿Qué es Angular?

Angular es un framework de aplicaciones web de código abierto basado en TypeScript desarrollado por Google. Proporciona una solución completa para construir aplicaciones modernas de una sola página (SPA).

### Características Clave

- **Arquitectura Basada en Componentes**: Construya aplicaciones con componentes reutilizables
- **Enlace de Datos Bidireccional**: Sincronización automática entre modelo y vista
- **Inyección de Dependencias**: Gestión eficiente de servicios
- **Enrutamiento**: Navegación del lado del cliente
- **Formularios**: Manejo robusto de formularios con validación
- **Cliente HTTP**: Comunicarse con servicios backend
- **Pruebas**: Utilidades de prueba integradas
- **Multiplataforma**: Web, móvil web, móvil nativo y escritorio

---

## Estructura del Proyecto

### Directorio Estándar

```
my-app/
├── src/
│   ├── app/
│   │   ├── components/        # Componentes reutilizables
│   │   ├── pages/             # Componentes de página
│   │   ├── services/          # Servicios Angular
│   │   ├── models/            # Modelos de datos/interfaces
│   │   ├── guards/            # Guards de ruta
│   │   ├── interceptors/      # Interceptores HTTP
│   │   ├── pipes/             # Pipes personalizados
│   │   ├── directives/        # Directivas personalizadas
│   │   ├── app.component.ts  # Componente raíz
│   │   ├── app.config.ts     # Configuración (Standalone)
│   │   ├── app.routes.ts     # Rutas de la aplicación
│   │   └── main.ts           # Punto de entrada
│   ├── assets/               # Archivos estáticos
│   ├── environments/         # Configuraciones de entorno
│   ├── styles.css            # Estilos globales
│   └── index.html            # Archivo HTML principal
├── angular.json              # Configuración Angular CLI
├── package.json              # Dependencias NPM
└── tsconfig.json             # Configuración TypeScript
```

---

## Componentes

### Crear Componentes

```bash
# Usando Angular CLI
ng generate component components/user-list
# o
ng g c components/user-list
```

### Ejemplo de Componente

```typescript
import { Component, Input, Output, EventEmitter } from '@angular/core';

@Component({
  selector: 'app-user-card',
  templateUrl: './user-card.component.html',
  styleUrls: ['./user-card.component.css']
})
export class UserCardComponent {
  @Input() user: User | null = null;
  @Output() delete = new EventEmitter<number>();

  onDelete() {
    if (this.user) {
      this.delete.emit(this.user.id);
    }
  }
}
```

### Ganchos de Ciclo de Vida

```typescript
import { Component, OnInit, OnDestroy, AfterViewInit } from '@angular/core';

@Component({...})
export class ExampleComponent implements OnInit, OnDestroy, AfterViewInit {
  
  ngOnInit() {
    // Llamado una vez después de la primera detección de cambios
  }

  ngAfterViewInit() {
    // Llamado después de inicializar la vista del componente
  }

  ngOnDestroy() {
    // Llamado justo antes de destruir el componente
    // Limpiar suscripciones, temporizadores, etc.
  }
}
```

### Componentes Standalone (Angular 14+)

```typescript
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

@Component({
  selector: 'app-standalone',
  standalone: true,
  imports: [CommonModule, FormsModule],
  template: `
    <h1>{{ title }}</h1>
    <button (click)="onClick()">Clic</button>
  `
})
export class StandaloneComponent {
  title = 'Componente Standalone';
}
```

---

## Plantillas

### Sintaxis de Plantilla

#### Interpolación
```html
<h1>Hola, {{ name }}</h1>
<p>Total: {{ 2 + 3 }}</p>
```

#### Enlace de Propiedades
```html
<img [src]="imageUrl" [alt]="imageAlt">
<button [class.active]="isActive">Clic</button>
```

#### Enlace de Eventos
```html
<button (click)="onClick()">Clic</button>
<input (input)="onInput($event)">
```

#### Enlace Bidireccional
```html
<input [(ngModel)]="username" name="username">
```

### Directivas Estructurales

#### *ngIf
```html
<div *ngIf="isLoggedIn">
  Bienvenido, {{ username }}!
</div>
```

#### *ngFor
```html
<li *ngFor="let user of users; let i = index">
  {{ i + 1 }}. {{ user.name }}
</li>
```

### Pipes

```html
<p>{{ today | date:'fullDate' }}</p>
<p>{{ price | currency:'USD' }}</p>
<p>{{ name | uppercase }}</p>
```

---

## Servicios

### Crear Servicios

```bash
ng generate service services/user
# o
ng g s services/user
```

### Ejemplo de Servicio

```typescript
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';
import { User } from '../models/user';

@Injectable({ providedIn: 'root' })
export class UserService {
  private apiUrl = 'https://api.example.com/users';

  constructor(private http: HttpClient) {}

  getUsers(): Observable<User[]> {
    return this.http.get<User[]>(this.apiUrl);
  }

  getUser(id: number): Observable<User> {
    return this.http.get<User>(`${this.apiUrl}/${id}`);
  }

  createUser(user: User): Observable<User> {
    return this.http.post<User>(this.apiUrl, user);
  }

  updateUser(id: number, user: User): Observable<User> {
    return this.http.put<User>(`${this.apiUrl}/${id}`, user);
  }

  deleteUser(id: number): Observable<void> {
    return this.http.delete<void>(`${this.apiUrl}/${id}`);
  }
}
```

---

## Enrutamiento

### Configurar Rutas

```typescript
// app.routes.ts
import { Routes } from '@angular/router';

export const routes: Routes = [
  { path: '', redirectTo: '/home', pathMatch: 'full' },
  { 
    path: 'home', 
    loadComponent: () => import('./pages/home/home.component')
      .then(m => m.HomeComponent) 
  },
  { path: '**', loadComponent: () => import('./pages/not-found/not-found.component')
      .then(m => m.NotFoundComponent) }
];
```

### Parámetros de Ruta

```typescript
// En componente
import { ActivatedRoute } from '@angular/router';

constructor(private route: ActivatedRoute) {}

ngOnInit() {
  this.route.paramMap.subscribe(params => {
    const id = params.get('id');
  });
}
```

### Guards de Ruta

```typescript
import { Injectable } from '@angular/core';
import { CanActivate, Router } from '@angular/router';

@Injectable({ providedIn: 'root' })
export class AuthGuard implements CanActivate {
  constructor(private router: Router) {}

  canActivate(): boolean {
    const isLoggedIn = /* verificar estado */;
    if (!isLoggedIn) {
      this.router.navigate(['/login']);
      return false;
    }
    return true;
  }
}
```

---

## Formularios

### Formularios Plantilla

```typescript
@Component({
  selector: 'app-login',
  template: `
    <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)">
      <input type="email" [(ngModel)]="user.email" name="email" required>
      <input type="password" [(ngModel)]="user.password" name="password" required>
      <button type="submit" [disabled]="loginForm.invalid">Login</button>
    </form>
  `
})
export class LoginComponent {
  user = { email: '', password: '' };
  onSubmit(form: any) { console.log(form.value); }
}
```

### Formularios Reactivos

```typescript
@Component({
  selector: 'app-register',
  templateUrl: './register.component.html'
})
export class RegisterComponent implements OnInit {
  registerForm!: FormGroup;

  constructor(private fb: FormBuilder) {}

  ngOnInit() {
    this.registerForm = this.fb.group({
      username: ['', [Validators.required, Validators.minLength(3)]],
      email: ['', [Validators.required, Validators.email]],
      password: ['', [Validators.required, Validators.minLength(8)]]
    });
  }

  onSubmit() {
    if (this.registerForm.valid) {
      console.log(this.registerForm.value);
    }
  }
}
```

---

## Cliente HTTP

### Configuración

```typescript
// app.config.ts
import { provideHttpClient } from '@angular/common/http';

export const appConfig: ApplicationConfig = {
  providers: [provideHttpClient()]
};
```

### Métodos HTTP

```typescript
constructor(private http: HttpClient) {}

// GET
this.http.get<User[]>(url).subscribe(data => ...);

// POST
this.http.post<User>(url, user).subscribe(...);

// PUT
this.http.put<User>(`${url}/${id}`, user).subscribe();

// DELETE
this.http.delete(`${url}/${id}`).subscribe();
```

---

## Gestión de Estado

### Usando Services y BehaviorSubject

```typescript
@Injectable({ providedIn: 'root' })
export class CartService {
  private items$ = new BehaviorSubject<CartItem[]>([]);
  
  getItems(): Observable<CartItem[]> {
    return this.items$.asObservable();
  }
  
  addItem(item: CartItem) {
    this.items$.next([...this.items$.value, item]);
  }
}
```

### Usando Signals (Angular 16+)

```typescript
@Component({...})
export class CounterComponent {
  count = signal(0);
  doubled = computed(() => this.count() * 2);
  
  increment() {
    this.count.update(c => c + 1);
  }
}
```

---

## Pruebas

### Pruebas Unitarias

```typescript
import { ComponentFixture, TestBed } from '@angular/core/testing';

describe('UserListComponent', () => {
  let component: UserListComponent;
  let fixture: ComponentFixture<UserListComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      declarations: [UserListComponent]
    }).compileComponents();

    fixture = TestBed.createComponent(UserListComponent);
    component = fixture.componentInstance;
  });

  it('debería crearse', () => {
    expect(component).toBeTruthy();
  });
});
```

---

## Compilación y Despliegue

### Desarrollo
```bash
ng build
ng serve
```

### Producción
```bash
ng build --configuration production
```

### Despliegue

#### Netlify
```bash
npm install -g netlify-cli
netlify deploy --prod --dir=dist/your-app
```

#### Docker
```dockerfile
FROM node:18-alpine as build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build -- --configuration production

FROM nginx:alpine
COPY --from=build /app/dist/your-app/browser /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

---

## Mejores Prácticas

### Estructura del Proyecto
```
src/app/
├── core/           # Servicios singleton, guards
├── shared/         # Componentes, pipes, directivas reutilizables
├── features/       # Módulos de características
└── app.component.ts
```

### Rendimiento
1. Usar OnPush change detection
2. Implementar trackBy en *ngFor
3. Lazy loading de rutas
4. Usar signals para estado
5. Unsubscribe de observables

---

## Recursos

- Sitio Web: https://angular.io/
- Documentación: https://angular.io/docs
- CLI: https://angular.io/cli
- GitHub: https://github.com/angular/angular

---

*Última Actualización: 2024*
