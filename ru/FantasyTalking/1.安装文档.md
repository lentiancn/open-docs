# Руководство по установке FantasyTalking

FantasyTalking — это инструмент для создания talking head на основе ИИ, который создаёт реалистичные видео talking head из одного изображения и аудио.

## Информация о версии

| Версия | Статус | Описание |
|---------|--------|-------------|
| FantasyTalking v1.0 | ✅ Текущая | Первоначальный выпуск |

## Системные требования

### Требования к оборудованию

| Требование | Минимум | Рекомендуется |
|-------------|---------|-------------|
| GPU | NVIDIA 4GB VRAM | NVIDIA 8GB+ VRAM |
| ОЗУ | 8GB | 16GB+ |
| Накопитель | 10GB | 20GB+ SSD |

### Требования к программному обеспечению

| Программное обеспечение | Версия |
|----------|---------|
| Python | 3.8+ |
| CUDA | 11.0+ |
| cuDNN | 8.0+ |

## Способы установки

### Способ 1: Из исходного кода

#### 1. Клонирование репозитория

```bash
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking
```

#### 2. Создание виртуальной среды

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# или
venv\Scripts\activate  # Windows
```

#### 3. Установка зависимостей

```bash
pip install torch torchvision
pip install -r requirements.txt
```

#### 4. Загрузка моделей

```bash
# Загрузка предобученных моделей
bash scripts/download_models.sh
```

### Способ 2: Docker

```bash
# Загрузка образа
docker pull fantasytalking/fantasytalking:latest

# Запуск
docker run --gpus all -v /path/to/data:/data fantasytalking/fantasytalking:latest
```

## Настройка

### Переменные окружения

```bash
export CUDA_VISIBLE_DEVICES=0
export PYTHONPATH=/path/to/FantasyTalking:$PYTHONPATH
```

### Пути к моделям

Отредактируйте `config.yaml` для настройки путей к моделям:

```yaml
model:
  checkpoint_path: "checkpoints/fantasytalking.pth"
  face_parser: "models/face_parser.pth"
```

## Быстрый старт

### Создание Talking Head

```bash
python inference.py \
  --source_image path/to/image.jpg \
  --audio path/to/audio.wav \
  --output output.mp4
```

### Параметры

```bash
--source_image    # Исходное изображение лица
--audio          # Входной аудиофайл
--output         # Путь для выходного видео
--face enhancer  # Включить улучшение лица
--fps            # Частота кадров (по умолчанию: 25)
```

## Распространённые проблемы

### GPU недоступен?

Проверьте установку CUDA:

```bash
nvidia-smi
python -c "import torch; print(torch.cuda.is_available())"
```

### Недостаточно памяти?

Уменьшите размер пакета или используйте более низкое разрешение.

## Ссылки

- [FantasyTalking GitHub](https://github.com/FantasyTalking/FantasyTalking)
- [Статья](https://arxiv.org/abs/)
