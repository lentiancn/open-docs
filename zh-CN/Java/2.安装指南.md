# Java 安装指南

本指南将帮助你在各种操作系统上安装 Java 开发环境。

## 环境要求

| 软件 | 要求 |
|------|------|
| 操作系统 | Windows/macOS/Linux |
| 内存 | 最低 2GB，推荐 4GB+ |
| 磁盘 | 至少 2GB 可用空间 |

## Windows 安装

### 方法一：Oracle JDK（推荐）

1. 访问 Oracle 官网：https://www.oracle.com/java/technologies/downloads/
2. 下载 JDK 21（最新 LTS 版本）
3. 运行安装程序
4. 配置环境变量：
   - 右键"此电脑" → 属性 → 高级系统设置 → 环境变量
   - 新建系统变量：
     - 变量名：JAVA_HOME
     - 变量值：C:\Program Files\Java\jdk-21
   - 编辑 PATH，添加：%JAVA_HOME%\bin
5. 验证安装：
   ```powershell
   java -version
   javac -version
   ```

### 方法二：OpenJDK

1. 访问 Eclipse Adoptium：https://adoptium.net/
2. 下载 JDK 21 LTS
3. 运行安装程序
4. 配置环境变量（同上）

### 方法三：Chocolatey

```powershell
# 安装 OpenJDK
choco install openjdk21

# 刷新环境变量
refreshenv

# 验证
java -version
```

## macOS 安装

### 方法一：Homebrew（推荐）

```bash
# 安装 Homebrew（如果未安装）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 OpenJDK 21
brew install openjdk@21

# 创建链接
sudo ln -sfn $(brew --prefix)/opt/openjdk@21/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk-21.jdk

# 配置环境变量
echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 21)' >> ~/.zshrc
source ~/.zshrc

# 验证
java -version
```

### 方法二：安装包

1. 下载 .dmg 安装包：https://adoptium.net/
2. 双击安装
3. 验证：
   ```bash
   java -version
   ```

## Linux 安装

### Ubuntu/Debian

```bash
# 更新软件源
sudo apt update

# 安装 OpenJDK 21
sudo apt install openjdk-21-jdk

# 验证
java -version
javac -version

# 配置环境变量
echo 'export JAVA_HOME=/usr/lib/jvm/java-21-openjdk-amd64' >> ~/.bashrc
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### CentOS/RHEL

```bash
# 安装 OpenJDK 21
sudo yum install java-21-openjdk java-21-openjdk-devel

# 验证
java -version
```

### 手动安装

```bash
# 下载 JDK
wget https://download.java.net/java/GA/jdk21.0.2/f2283984656d49d69e91c558476027ac/13/GPL/openjdk-21.0.2_linux-x64_bin.tar.gz

# 解压
sudo tar -xzf openjdk-21.0.2_linux-x64_bin.tar.gz -C /usr/local/

# 配置环境变量
echo 'export JAVA_HOME=/usr/local/jdk-21.0.2' >> ~/.bashrc
echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

## 配置环境变量

### Windows

```powershell
# 临时设置（当前终端有效）
$env:JAVA_HOME = "C:\Program Files\Java\jdk-21"
$env:PATH = "$env:PATH;$env:JAVA_HOME\bin"

# 永久设置（系统属性中配置）
# 或使用 setx 命令
setx JAVA_HOME "C:\Program Files\Java\jdk-21"
setx PATH "%PATH%;%JAVA_HOME%\bin"
```

### Linux/macOS

```bash
# 编辑 ~/.bashrc 或 ~/.zshrc
export JAVA_HOME=/usr/local/jdk-21
export PATH=$JAVA_HOME/bin:$PATH

# 使配置生效
source ~/.bashrc  # 或 source ~/.zshrc
```

## 验证安装

```bash
# 查看 Java 版本
java -version

# 查看 JDK 版本
javac -version

# 查看 JAVA_HOME
echo $JAVA_HOME

# 运行测试程序
public class Hello {
    public static void main(String[] args) {
        System.out.println("Hello Java!");
    }
}
```

## Maven 安装（可选）

Maven 是 Java 项目管理和构建工具：

### Windows

1. 下载：https://maven.apache.org/download.cgi
2. 解压到目录（如 C:\apache-maven）
3. 配置环境变量：
   - MAVEN_HOME：C:\apache-maven
   - PATH 添加：%MAVEN_HOME%\bin

### macOS/Linux

```bash
# 使用 Homebrew
brew install maven

# 或手动安装
wget https://dlcdn.apache.org/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.tar.gz
sudo tar -xzf apache-maven-3.9.6-bin.tar.gz -C /usr/local/
echo 'export PATH=/usr/local/apache-maven-3.9.6/bin:$PATH' >> ~/.bashrc
```

## Gradle 安装（可选）

Gradle 是另一个流行的构建工具：

```bash
# 使用 SDKMAN（推荐）
curl -s "https://get.sdkman.io" | bash
sdk install gradle

# Homebrew
brew install gradle
```

## IDE 安装

### IntelliJ IDEA（推荐）

1. 下载：https://www.jetbrains.com/idea/download/
2. 选择 Community（免费）或 Ultimate（付费）
3. 安装并启动

### Eclipse

1. 下载：https://www.eclipse.org/downloads/
2. 选择 Eclipse IDE for Enterprise Java Developers
3. 解压运行

### VS Code

1. 下载：https://code.visualstudio.com/
2. 安装扩展：
   - Extension Pack for Java
   - Language Support for Java
   - Debugger for Java

## 创建第一个 Java 项目

### 使用命令行

```bash
# 创建项目目录
mkdir HelloWorld
cd HelloWorld

# 创建源文件
mkdir -p src/main/java

# 编写代码
echo 'public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello World!");
    }
}' > src/main/java/HelloWorld.java

# 编译
javac src/main/java/HelloWorld.java

# 运行
java -cp src/main/java HelloWorld
```

### 使用 Maven

```bash
# 创建项目
mvn archetype:generate -DgroupId=com.example -DartifactId=myapp -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false

# 进入项目目录
cd myapp

# 编译
mvn compile

# 运行
mvn exec:java -Dexec.mainClass="com.example.App"
```

## 常见问题

### Q1: java 命令找不到

**解决方案：**
- 检查 JAVA_HOME 和 PATH 环境变量
- 重新打开终端

### Q2: 版本不匹配

**解决方案：**
使用 SDKMAN 管理多版本：
```bash
sdk install java 21.0.2-tem
sdk use java 21.0.2-tem
```

### Q3: 编译乱码

**解决方案：**
```bash
javac -encoding UTF-8 HelloWorld.java
```

## 下一步

- [Java 使用手册](./3.使用手册.md) - 学习 Java 语法和特性
- [Java 常见问题](./4.常见问题.md) - 解答常见问题
- 官方文档：https://docs.oracle.com/javase/
