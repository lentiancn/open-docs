# GitLab FAQ

> Answers to common questions about GitLab

---

## Installation

### Q: GitLab not accessible after installation?

**A**: Check the following:
- Is external URL configured correctly?
- Check if firewall allows ports 80 and 443
- Verify service is running: `sudo gitlab-ctl status`
- Check logs: `sudo gitlab-ctl tail`

### Q: Memory usage too high?

**A**: GitLab is resource-intensive, recommendations:
- Minimum 4GB RAM, recommended 8GB or more
- Optimize with:
  ```ruby
  # /etc/gitlab/gitlab.rb
  postgresql['shared_buffers'] = "256MB"
  unicorn['worker_processes'] = 2
  ```

### Q: How to migrate GitLab data?

**A**: Use GitLab backup and restore:
```bash
# Backup
sudo gitlab-backup create

# Restore
sudo gitlab-backup restore BACKUP=timestamp
```

---

## Git Operations

### Q: Permission denied when pushing?

**A**: 
1. Verify SSH public key is added to GitLab profile
2. Check project member permissions
3. If using HTTPS, check username and access token

### Q: Merge request shows conflicts?

**A**:
1. Pull latest target branch locally
2. Rebase your branch onto target branch
3. Resolve conflicts and force push:
   ```bash
   git fetch origin
   git checkout your-branch
   git rebase origin/main
   # After resolving conflicts
   git push --force-with-lease
   ```

### Q: Large file push fails?

**A**: GitLab limits file size by default, adjust configuration:
```ruby
# /etc/gitlab/gitlab.rb
gitlab_rails['max_attachment_size'] = 100 * 1024 * 1024 # 100MB
```
Or use Git LFS:
```bash
git lfs install
git lfs track "*.psd"
```

---

## CI/CD

### Q: Pipeline stuck in pending?

**A**: 
1. Check if GitLab Runner is registered and online
2. Verify Runner tags match Jobs
3. Check Runner's concurrency limit

### Q: How to use private image registry?

**A**: 
```yaml
build:
  image: my-private-image
  variables:
    DOCKER_AUTH_CONFIG: '{"auths":{"registry.example.com":{"username":"user","password":"pass"}}}'
```

### Q: Cache not working?

**A**: Ensure cache configuration is correct:
```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
  policy: pull-push
```

---

## Permissions

### Q: How to set branch protection?

**A**: 
1. Go to Project → Settings → Repository → Protected branches
2. Select branch to protect
3. Configure who can push and merge

### Q: Cannot access project?

**A**: 
1. Check project visibility settings (public/internal/private)
2. Verify being added as project member
3. Contact project admin for access

---

## Performance Optimization

### Q: Pages load slowly?

**A**: 
1. Enable Prometheus monitoring for analysis
2. Optimize PostgreSQL configuration
3. Use Redis caching
4. Consider PostgreSQL master-slave replication

### Q: How to limit user quotas?

**A**: Set in admin area:
- Storage quota limits
- Repository count limits
- User quotas

---

## Backup & Restore

### Q: How to set up automatic backups?

**A**: Configure cron job:
```bash
# Auto backup daily at 2 AM
0 2 * * * /opt/gitlab/bin/gitlab-backup create CRON=1
```

### Q: Where are backup files?

**A**: Default location is `/var/opt/gitlab/backups/`

---

## Upgrades

### Q: How to upgrade GitLab?

**A**: 
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install gitlab-ee

# Then reconfigure
sudo gitlab-ctl reconfigure
```

### Q: Should I backup before upgrading?

**A**: Yes, strongly recommend backing up before upgrade:
```bash
sudo gitlab-backup create
sudo gitlab-ctl stop
```

---

## Common Error Codes

| Error Code | Description | Solution |
|------------|-------------|----------|
| 500 | Internal Server Error | Check logs |
| 502 | Gateway Error | Check service status |
| 503 | Service Unavailable | Check resource usage |
| 404 | Resource Not Found | Check URL |
| 422 | Unprocessable Entity | Check parameters |
