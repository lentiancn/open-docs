# GitLab Installationsanleitung

> Vollständige Anleitung zur Installation und Konfiguration von GitLab

---

## Systemanforderungen

| Ressource | Minimum | Empfohlen |
|-----------|---------|-----------|
| CPU | 2 Kerne | 4+ Kerne |
| Speicher | 4 GB | 8+ GB |
| Speicherplatz | 10 GB | 50+ GB |
| Betriebssystem | Ubuntu, Debian, CentOS, RHEL, Kubernetes | - |

---

## Installationsmethoden

### Omnibus-Paket (Linux empfohlen)

#### Ubuntu/Debian

```bash
# Abhängigkeiten installieren
sudo apt-get update
sudo apt-get install -y curl openssh-server ca-certificates tzdata perl

# GitLab-Repository hinzufügen
curl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash

# GitLab installieren
sudo EXTERNAL_URL="https://gitlab.example.com" apt-get install gitlab-ee
```

#### CentOS/RHEL

```bash
# Abhängigkeiten installieren
sudo yum install -y curl policycoreutils openssh-server

# GitLab-Repository hinzufügen
curl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash

# GitLab installieren
sudo EXTERNAL_URL="https://gitlab.example.com" yum install -y gitlab-ee
```

### Docker-Installation

```bash
# GitLab Docker-Image pullen
docker run --detach \
  --hostname gitlab.example.com \
  --publish 443:443 --publish 80:80 --publish 22:22 \
  --name gitlab \
  --restart always \
  --volume /srv/gitlab/config:/etc/gitlab \
  --volume /srv/gitlab/logs:/var/log/gitlab \
  --volume /srv/gitlab/data:/var/opt/gitlab \
  gitlab/gitlab-ee:latest
```

### Kubernetes-Installation

```bash
# Mit Helm-Chart installieren
helm repo add gitlab https://charts.gitlab.io
helm install gitlab gitlab/gitlab \
  --set externalUrl="https://gitlab.example.com" \
  --set certmanager-issuer.email="admin@example.com"
```

---

## Erstkonfiguration

### Externe URL konfigurieren

```bash
# GitLab-Konfigurationsdatei bearbeiten
sudo vim /etc/gitlab/gitlab.rb

# Externe URL setzen
external_url 'https://gitlab.example.com'

# GitLab neu konfigurieren
sudo gitlab-ctl reconfigure
```

### SMTP konfigurieren (E-Mail)

```bash
# SMTP in /etc/gitlab/gitlab.rb konfigurieren
gitlab_rails['smtp_enable'] = true
gitlab_rails['smtp_address'] = "smtp.example.com"
gitlab_rails['smtp_port'] = 587
gitlab_rails['smtp_user_name'] = "smtp_user"
gitlab_rails['smtp_password'] = "smtp_password"
gitlab_rails['smtp_domain'] = "example.com"

# Änderungen anwenden
sudo gitlab-ctl reconfigure
```

### HTTPS mit Let's Encrypt aktivieren

```bash
# In /etc/gitlab/gitlab.rb konfigurieren
letsencrypt['enable'] = true
letsencrypt['contact_emails'] = ['admin@example.com']

# Neu konfigurieren
sudo gitlab-ctl reconfigure
```

---

## Erstanmeldung

1. Rufen Sie GitLab über Ihre externe URL auf
2. Melden Sie sich mit dem Benutzernamen `root` an
3. Legen Sie bei Ihrem ersten Besuch ein Passwort fest
4. Erstellen Sie Ihr erstes Projekt

---

## Häufige Befehle

```bash
# Status prüfen
sudo gitlab-ctl status

# Dienste starten
sudo gitlab-ctl start

# Dienste stoppen
sudo gitlab-ctl stop

# Dienste neu starten
sudo gitlab-ctl restart

# Logs anzeigen
sudo gitlab-ctl tail

# Konfiguration prüfen
sudo gitlab-rake gitlab:env:info
```

---

## Fehlerbehebung

### Installation fehlgeschlagen?

- Systemanforderungen prüfen
- Alle Abhängigkeiten installiert?
- Firewall- und SELinux-Einstellungen prüfen
- Installationslogs überprüfen

### GitLab startet nicht?

```bash
# Auf Port-Konflikte prüfen
sudo netstat -tulpn | grep -E ':(80|443|22)\s'

# Festplattenplatz prüfen
df -h

# Logs prüfen
sudo gitlab-ctl tail
```

### Langsame Leistung?

- Serverressourcen erhöhen
- Prometheus-Metriken aktivieren
- Swap-Space konfigurieren
- PostgreSQL-Tuning verwenden

---

## Ressourcen

- Offizielle Installationsdocs: https://docs.gitlab.com/ee/install/
- Hardware-Anforderungen: https://docs.gitlab.com/ee/install/requirements.html
- Community-Forum: https://forum.gitlab.com/
