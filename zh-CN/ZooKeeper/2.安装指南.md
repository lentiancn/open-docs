# ZooKeeper 安装指南

## 环境要求

- JDK 8+
- 内存 1GB+

## 单机安装

### 1. 下载解压

```bash
wget https://archive.apache.org/dist/zookeeper/zookeeper-3.7.2/apache-zookeeper-3.7.2-bin.tar.gz
tar -xzf apache-zookeeper-3.7.2-bin.tar.gz
cd apache-zookeeper-3.7.2
```

### 2. 配置

```bash
# 复制配置
cp conf/zoo_sample.cfg conf/zoo.cfg

# 编辑 conf/zoo.cfg
dataDir=/path/to/zookeeper/data
dataLogDir=/path/to/zookeeper/log

# 端口配置
clientPort=2181
```

### 3. 启动

```bash
# 启动
bin/zkServer.sh start

# 检查状态
bin/zkServer.sh status

# 连接
bin/zkCli.sh -server localhost:2181
```

## 集群安装

### 1. 规划

| 节点 | 端口 |
|------|------|
| node1 | 2888:3888 |
| node2 | 2888:3888 |
| node3 | 2888:3888 |

### 2. 配置

```cfg
# zoo.cfg
server.1=node1:2888:3888
server.2=node2:2888:3888
server.3=node3:2888:3888
```

### 3. 创建 myid

```bash
# node1
echo 1 > dataDir/myid

# node2
echo 2 > dataDir/myid

# node3
echo 3 > dataDir/myid
```

### 4. 启动所有节点

```bash
bin/zkServer.sh start
```

## Docker 安装

```bash
# 单机
docker run -d --name zookeeper -p 2181:2181 zookeeper

# 集群
# 需要自定义网络和多容器配置
```
