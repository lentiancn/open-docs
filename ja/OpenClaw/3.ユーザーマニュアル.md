# OpenClaw ユーザーマニュアル

このマニュアルでは、OpenClawの各機能と使用方法について詳しく説明します。この強力なAIアシスタントゲートウェイを最大限に活用するためのガイドです。初心者でも経験がなくても、ここで見つけられる有用な情報があります。

---

## 基本概念

深く始める前に、以下のコアコンセプトを理解しておくと役立ちます：

### Gateway（ゲートウェイ）

GatewayはOpenClawのコアコンポーネントです。ローカルマシン上で実行され、すべてのチャネル接続、AIエージェント、クライアントのコントロールプレーンとなります。単一のGatewayプロセスで複数のチャットチャネルと複数のAIエージェントを同時に処理できます。

### チャネル（Channels）

チャネルとは、AIアシスタントと対話するために使用するチャットプラットフォームを指します。WhatsApp、Telegram、Discord、iMessageなどが含まれます。各チャネルは独立して設定・管理できます。

### エージェント（Agents）

エージェントはAIアシスタントのインスタンスです。各エージェントには独自のワークスペース、セッション、設定があります。個人用、仕事用など、異なる用途のために複数のエージェントを設定できます。

### セッション（Sessions）

セッションは会話コンテキストを管理します。OpenClawは複数のセッションモードをサポートしています：
- **main**：共有セッション
- **per-peer**：連絡先ごとに別々のセッション
- **per-channel-peer**：チャネルと連絡先の組み合わせごとに別々のセッション
- **per-account-channel-peer**：最も細分化され、アカウントとチャネルの組み合わせごとに別々のセッション

---

## 日常的な使用

### Gatewayの起動と停止

**Gatewayを起動：**

```bash
# フォアグラウンドで実行（デバッグ用）
openclaw gateway --port 18789

# バックグラウンドで実行（サービスインストールが必要）
openclaw gateway start
```

**Gatewayを停止：**

```bash
openclaw gateway stop
```

**状態を確認：**

```bash
openclaw gateway status
```

### コントロールUIの使用

Gatewayを起動後、ブラウザでhttp://127.0.0.1:18789/にアクセスしてコントロールUIを開きます。

コントロールUIは以下の機能を提供します：
- メッセージの送受信
- セッションの表示与管理
- チャネルと設定の設定
- 使用統計の表示

### CLIコマンドの使用

**メッセージを送信：**

```bash
openclaw message send --target +15555550123 --message "こんにちは、OpenClaw"
```

**AIと対話：**

```bash
openclaw agent --message "Hello Worldプログラムを書いて" --thinking high
```

---

## チャネル管理

### WhatsAppの設定

WhatsAppは最も使用されるチャネルの1つです。設定手順：

1. ログインコマンドを実行：
   ```bash
   openclaw channels login
   ```

2. WhatsAppを選択し、表示されたQRコードをスキャン

3. ホワイトリストを設定（推奨）：
   ```json5
   {
     channels: {
       whatsapp: {
         allowFrom: ["+15555550123"],
       },
     },
   }
   ```

### Telegramの設定

1. Telegram Botを作成：
   - @BotFatherを開く
   - /newbotコマンドで新しいボットを作成
   - Botトークンを取得

2. 設定ファイルに追加：
   ```json5
   {
     channels: {
       telegram: {
         botToken: "あなたのBotトークン",
       },
     },
   }
   ```

3. ボットとの会話を開始

### Discordの設定

1. Discordアプリケーションを作成：
   - https://discord.com/developers/applicationsにアクセス
   - 新しいアプリケーションを作成し、Botユーザーを追加

2. Botトークンを取得して設定：
   ```json5
   {
     channels: {
       discord: {
         token: "あなたのBotトークン",
       },
     },
   }
   ```

3. サーバーにBotを招待

---

## 上級機能

### マルチエージェントルーティング

1つのGatewayで複数の隔離されたエージェントを実行できます：

```json5
{
  agents: {
    list: [
      { id: "home", default: true, workspace: "~/.openclaw/workspace-home" },
      { id: "work", workspace: "~/.openclaw/workspace-work" },
    ],
  },
  bindings: [
    { agentId: "home", match: { channel: "whatsapp", accountId: "personal" } },
    { agentId: "work", match: { channel: "whatsapp", accountId: "biz" } },
  ],
}
```

### Cronジョブ

自動実行タスクを設定：

```json5
{
  cron: {
    enabled: true,
    maxConcurrentRuns: 2,
    sessionRetention: "24h",
  },
}
```

スケジュールタスクを作成：

```bash
openclaw cron create --schedule "0 9 * * *" --agent main --message "おはようございます"
```

### Webhooks

外部イベントに反応するWebhooksを設定：

```json5
{
  hooks: {
    enabled: true,
    token: "shared-secret",
    path: "/hooks",
    mappings: [
      {
        match: { path: "gmail" },
        action: "agent",
        agentId: "main",
        deliver: true,
      },
    ],
  },
}
```

### サンドボックスモード

セキュリティのため、セカンダリセッションを隔離されたDockerコンテナで実行できます：

```json5
{
  agents: {
    defaults: {
      sandbox: {
        mode: "non-main",
        scope: "agent",
      },
    },
  },
}
```

---

## ワークスペース設定

### ディレクトリ構造

OpenClawは以下のディレクトリ構造を使用：

```
~/.openclaw/
├── openclaw.json      # 設定ファイル
├── credentials/       # チャネル認証情報
├── workspace/       # AIワークスペース
│   ├── AGENTS.md    # エージェント設定
│   ├── SOUL.md      # アイデンティティ設定
│   ├── TOOLS.md     # ツール設定
│   ├── USER.md      # ユーザー設定
│   ├── MEMORY.md    # 長期メモリ
│   └── skills/      # スキルディレクトリ
└── logs/            # ログファイル
```

### カスタムワークスペース

```json5
{
  agents: {
    defaults: {
      workspace: "~/my-workspace",
    },
  },
}
```

---

 ## コマンドラインツール

### よく使うコマンド

| コマンド | 説明 |
|----------|------|
| `openclaw --version` | バージョンを表示 |
| `openclaw status` | 状態を表示 |
| `openclaw gateway start` | Gatewayを起動 |
| `openclaw gateway stop` | Gatewayを停止 |
| `openclaw gateway status` | Gatewayの状態を表示 |
| `openclaw dashboard` | コントロールUIを開く |
| `openclaw channels login` | チャネルにログイン |
| `openclaw channels status` | チャネルの状態を表示 |
| `openclaw message send` | メッセージを送信 |
| `openclaw agent` | AIと対話 |
| `openclaw config get` | 設定を取得 |
| `openclaw config set` | 設定を変更 |
| `openclaw doctor` | 問題を診断 |

### チャットコマンド

サポートされているチャネルでは以下のコマンドを使用できます：

- `/status` - セッショ состояниеを表示
- `/new` または `/reset` - セッションをリセット
- `/compact` - セッションコンテキストを圧縮
- `/think` - 思考レベルを設定（off|minimal|low|medium|high|xhigh）
- `/verbose on|off` - 詳細出力を切り替え
- `/usage off|tokens|full` - 使用統計を表示
- `/restart` - Gatewayを再起動（グループ管理者のみ）

---

## モバイルノード

OpenClawはiOSおよびAndroidデバイスをノードとしてペアリングして、より多くのローカル機能を有効にすることをサポートしています。

### iOSノード

1. App StoreからOpenClawをダウンロード
2. アプリを開き、ウィザードに従ってGatewayとペアリング
3. 必要な権限を付与（カメラ、マイク、位置情報など）

ペアリング後に使用可能な機能：
- カメラでの写真・動画撮影
- スクリーン録画
- Canvasインタラクション
- 音声インタラクション（Talk Mode）

### Androidノード

1. OpenClaw Androidアプリをダウンロード
2. Gatewayとペアリング
3. 必要な権限を付与

iOSと同様の機能。

### macOSノードモード

macOSアプリはノードモードで実行でき、以下をエクスポート：
- system.run - ローカルコマンドを実行
- system.notify - 通知を送信
- canvas.* - Canvasインタラクション
- camera.* - カメラ制御
- screen.record - スクリーン録画

---

## ブラウザ制御

OpenClawにはブラウザを自動操作できるブラウザ制御機能が組み込まれています：

```json5
{
  browser: {
    enabled: true,
    color: "#FF4500",
  },
}
```

**よく使うコマンド：**

```bash
# ブラウザを起動
openclaw browser start --browser-profile openclaw

#  利用可能なプロファイルを表示
openclaw browser profiles
```

---

## 音声機能

### Voice Wake

音声でAIを起こします。macOS/iOS/Androidデバイスが必要：

```bash
openclaw voicewake enable
```

### Talk Mode

AIが常に聞いて回应できる継続的な会話モード：

```bash
openclaw talk start
```

Talk ModeにはTTS（テキスト読み上げ）の設定が必要です。ElevenLabsを推奨。

---

## 監視と診断

### ログの表示

```bash
# 最近のログを表示
openclaw logs

# リアルタイムでログをフォロー
openclaw logs --follow
```

### 診断の実行

```bash
openclaw doctor
```

診断ツールは以下をチェック：
- 設定の正確性
- サービスの実行状態
- チャネルの接続状態
- 潜在的なセキュリティ問題

### ヘルスチェック

```bash
openclaw health
```

---

## よくある使用シナリオ

### シナリオ1：個人AIアシスタント

WhatsAppまたはTelegramを個人アシスタントとして設定し、どこからでもメッセージを送って助けを求められます。

### シナリオ2：開発支援

開発で問題に遭遇したら、CLIまたはチャットチャネルでAIに尋ねて即座助けを得られます。

### シナリオ3：自動化ワークフロー

Cronタスクを設定して反復作業を自動実行：
- 毎日のサマリー報告
- 定期的なシステム状態チェック
- 定期的なデータバックアップ

### シナリオ4：マルチチャネル客服

複数のチャルを設定し、不同なチャネルのユーザーに統一されたAIサービスを提供。

---

## パフォーマンスの最適化

### セッション管理

- 定期的にセッションを圧縮：`/compact`
- 自動リセットを設定：
  ```json5
  {
    session: {
      reset: {
        mode: "daily",
        atHour: 4,
        idleMinutes: 120,
      },
    },
  }
  ```

### リソース使用

- 同時セッション数を制限
- セッションクリーンアップを有効化
- モデルキャッシュを使用

---

## バックアップと復元

### 設定をバックアップ

```bash
cp ~/.openclaw/openclaw.json ~/.openclaw/openclaw.json.backup
```

### 設定を復元

```bash
cp ~/.openclaw/openclaw.json.backup ~/.openclaw/openclaw.json
```

### 完全バックアップ

```bash
tar -czf openclaw-backup.tar.gz ~/.openclaw
```

---

## 次のステップ

- [よくある質問](/4.よくある質問.md)：よくある疑問の解答
- [公式ドキュメント](https://docs.openclaw.ai)：完全な設定リファレンス
- [GitHub](https://github.com/openclaw/openclaw)：オープンソースプロジェクトへの参加
- [Discordコミュニティ](https://discord.gg/clawd)：他のユーザーとの交流
