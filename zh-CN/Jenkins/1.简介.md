# Jenkins - 简介

Jenkins 是一个开源的持续集成/持续部署（CI/CD）工具，由 Kohsuke Kawaguchi 于 2011 年创建。Jenkins 是最流行的自动化服务器之一，帮助开发团队自动化构建、测试和部署软件项目。

## Jenkins 的核心特性

### 1. 持续集成

Jenkins 自动构建和测试代码更改：

```groovy
pipeline {
    agent any
    stages {
        stage('Build') {
            steps {
                echo 'Building...'
                sh 'npm install'
                sh 'npm run build'
            }
        }
        stage('Test') {
            steps {
                echo 'Testing...'
                sh 'npm test'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying...'
            }
        }
    }
}
```

### 2. 插件系统

Jenkins 拥有丰富的插件生态系统：

- **源代码管理**：Git、SVN、Mercurial
- **构建工具**：Maven、Gradle、Ant
- **测试框架**：JUnit、TestNG、Selenium
- **通知**：Email、Slack、DingTalk
- **部署**：Docker、Kubernetes、Ansible

### 3. 流水线

Jenkinsfile 定义 CI/CD 流程：

```groovy
// Jenkinsfile
pipeline {
    agent any
    environment {
        DOCKER_IMAGE = 'myapp'
    }
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        stage('Build') {
            steps {
                script {
                    docker.build(DOCKER_IMAGE)
                }
            }
        }
        stage('Test') {
            steps {
                sh 'npm test'
            }
        }
        stage('Deploy') {
            when {
                branch 'master'
            }
            steps {
                echo 'Deploying to production'
            }
        }
    }
    post {
        always {
            echo 'Cleaning up'
        }
        success {
            echo 'Build succeeded!'
        }
        failure {
            echo 'Build failed!'
        }
    }
}
```

### 4. 分布式构建

Jenkins 支持主从架构：

```
┌─────────────┐
│   Master    │
│             │
│  Scheduler  │
│             │
└──────┬──────┘
       │
┌──────┴──────┐
│   Agents    │
│  ┌─────┐    │
│  │Node1│    │
│  └─────┘    │
│  ┌─────┐    │
│  │Node2│    │
│  └─────┘    │
└─────────────┘
```

### 5. 自动化部署

支持多种部署方式：

- **蓝绿部署**
- **金丝雀发布**
- **滚动更新**

## Jenkins 的应用场景

### 1. 持续集成

每次代码提交自动构建：

```groovy
stage('CI') {
    steps {
        sh 'npm install'
        sh 'npm run build'
        sh 'npm test'
    }
}
```

### 2. 持续部署

自动部署到测试/生产环境：

```groovy
stage('Deploy to Test') {
    steps {
        sh 'kubectl apply -f k8s/test/'
    }
}

stage('Deploy to Prod') {
    when {
        branch 'master'
    }
    steps {
        input 'Deploy to production?'
        sh 'kubectl apply -f k8s/prod/'
    }
}
```

### 3. 自动化测试

运行各种测试：

```groovy
stage('Unit Tests') {
    steps {
        sh 'npm run unit-test'
    }
}

stage('Integration Tests') {
    steps {
        sh 'npm run integration-test'
    }
}

stage('E2E Tests') {
    steps {
        sh 'npm run e2e-test'
    }
}
```

## Jenkins 版本历史

| 版本 | 发布年份 | 主要特性 |
|------|----------|----------|
| Jenkins 1.0 | 2011 | 初始版本 |
| Jenkins 2.0 | 2016 | Pipeline as Code |
| Jenkins 2.x | 2017+ | 改进安全 |
| Jenkins 2.190+ | 2019 | 分布式构建改进 |
| Jenkins 2.300+ | 2020 | Java 11 支持 |
| Jenkins 2.400+ | 2022 | 现代化 UI |

## Jenkins 与其他工具对比

### Jenkins vs GitLab CI

| 特性 | Jenkins | GitLab CI |
|------|---------|------------|
| 自托管 | 支持 | 支持 |
| 免费版 | 完全免费 | 免费版有限 |
| 配置 | 文件+UI | 仅文件 |
| 插件 | 丰富 | 一般 |

### Jenkins vs GitHub Actions

| 特性 | Jenkins | GitHub Actions |
|------|---------|----------------|
| 托管 | 自托管 | GitHub 托管 |
| 价格 | 免费 | 免费额度 |
| 配置 | Jenkinsfile | YAML |
| 集成 | 丰富 | GitHub 深度集成 |

## Jenkins 的统计数据

- **GitHub 星标**：20,000+ ⭐
- **插件数量**：1800+
- **企业用户**：全球数百万开发者

## 为什么选择 Jenkins？

1. **开源免费**：完全免费使用
2. **插件丰富**：1800+ 插件
3. **可扩展**：支持分布式构建
4. **灵活配置**：文件+UI 配置
5. **跨平台**：Windows、Linux、macOS
6. **社区活跃**：丰富的文档和支持
7. **企业级**：大规模使用验证

## 相关资源

- 官方网站：https://www.jenkins.io
- 中文文档：https://www.jenkins.io/zh/
- 插件中心：https://plugins.jenkins.io/

Jenkins 是持续集成/持续部署的标准工具，无论是小团队还是大企业，都能提供优秀的自动化体验。
