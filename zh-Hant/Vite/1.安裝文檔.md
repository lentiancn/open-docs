# Vite 安裝指南

Vite 是新一代前端建構工具。本指南涵蓋在所有環境中的安裝方法。

## 版本資訊

| 版本 | 狀態 | 說明 |
|------|------|------|
| Vite 5.x | ✅ 目前 | 最新穩定版本 |
| Vite 4.x | ✅ 支援 | 穩定版本 |
| Vite 3.x | ⚠️ 維護 | 安全更新 |
| Vite 2.x | ❌ 舊版 | 不建議新專案使用 |

> **重要提示**：本指南主要針對 **Vite 5.x**。建議新專案使用最新版本。

## 前提條件

### 系統需求

| 需求 | 版本 |
|------|------|
| Node.js | 18.0.0+ |
| npm | 8.0.0+ |

### 瀏覽器支援

| 瀏覽器 | 版本 |
|--------|------|
| Chrome | 80+ |
| Firefox | 80+ |
| Safari | 14+ |
| Edge | 80+ |

## 安裝方法

### 方法一：使用 npm 建立專案（推薦）

```bash
# 建立 Vue 專案
npm create vite@latest my-vue-app -- --template vue

# 建立 React 專案
npm create vite@latest my-react-app -- --template react

# 建立 Vanilla JS 專案
npm create vite@latest my-vanilla-app -- --template vanilla

# 建立 Svelte 專案
npm create vite@latest my-svelte-app -- --template svelte

# 建立 Preact 專案
npm create vite@latest my-preact-app -- --template preact
```

### 方法二：全域安裝

```bash
# 安裝 Vite
npm install -g create-vite

# 建立專案
create-vite my-app --template vue
```

### 方法三：使用 yarn

```bash
# 建立 Vue 專案
-vue-app --yarn create vite mytemplate vue

# 建立 React 專案
yarn create vite my-react-app --template react
```

### 方法四：使用 pnpm

```bash
# 建立 Vue 專案
pnpm create vite my-vue-app --template vue
```

### 方法五：手動建立

```bash
# 建立專案目錄
mkdir my-vite-project
cd my-vite-project

# 初始化 npm
npm init -y

# 安裝 Vite
npm install vite --save-dev

# 安裝 Vue
npm install vue
```

## 專案結構

```
my-vite-project/
├── public/
│   └── favicon.ico
├── src/
│   ├── main.js
│   ├── App.vue
│   └── style.css
├── index.html
├── package.json
└── vite.config.js
```

## 配置文件

### vite.config.js

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  server: {
    port: 3000,
    open: true,
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
})
```

### 環境變數

```
# .env
VITE_APP_TITLE=My App
VITE_API_URL=https://api.example.com
```

### 生產環境配置

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  build: {
    outDir: 'dist',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router'],
        },
      },
    },
  },
})
```

## 開發命令

### 常用命令

```bash
# 啟動開發伺服器
npm run dev

# 建構生產版本
npm run build

# 預覽生產版本
npm run preview

# 執行測試
npm run test

# 類型檢查
npm run typecheck
```

### package.json 腳本

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "vitest",
    "typecheck": "vue-tsc --noEmit"
  }
}
```

## 插件配置

### Vue 插件

```bash
npm install @vitejs/plugin-vue
```

```javascript
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
})
```

### React 插件

```bash
npm install @vitejs/plugin-react
```

```javascript
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
})
```

### 圖片處理

```bash
npm install -D vite-plugin-imagemin
```

```javascript
import viteImagemin from 'vite-plugin-imagemin'

export default defineConfig({
  plugins: [
    viteImagemin({
      pngquant: [10],
      jpegoptim: true,
    }),
  ],
})
```

## 樣式配置

### CSS

```javascript
export default defineConfig({
  css: {
    preprocessorOptions: {
      css: {
        charset: false,
      },
    },
  },
})
```

### Sass

```bash
npm install -D sass
```

```javascript
export default defineConfig({
  css: {
    preprocessorOptions: {
      scss: {
        additionalData: `@import "@/styles/variables.scss";`,
      },
    },
  },
})
```

### PostCSS

```bash
npm install -D autoprefixer postcss
```

```javascript
// postcss.config.js
export default {
  plugins: {
    autoprefixer: {},
  },
}
```

## 代理配置

```javascript
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ''),
      },
    },
  },
})
```

## 效能優化

### 程式碼分割

```javascript
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['vue', 'vue-router', 'pinia'],
        },
      },
    },
  },
})
```

### 壓縮

```bash
npm install -D terser
```

```javascript
export default defineConfig({
  build: {
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
      },
    },
  },
})
```

### 資源內聯

```javascript
export default defineConfig({
  build: {
    assetsInlineLimit: 4096,
  },
})
```

## 常見問題

### 建構失敗？

確保所有依賴已安裝：

```bash
npm install
```

### 熱更新不工作？

檢查 devServer 配置：

```javascript
export default defineConfig({
  server: {
    hmr: true,
  },
})
```

### 路徑別名？

配置 resolve.alias：

```javascript
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

## 相關連結

- [Vite 官方文件](https://vitejs.dev/)
- [Vite 中文文件](https://cn.vitejs.dev/)
- [Awesome Vite](https://github.com/vitejs/awesome-vite)
