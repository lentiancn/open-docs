# Node.js 安装指南

本指南将帮助你在各种操作系统上安装 Node.js。

## 环境要求

| 操作系统 | 支持版本 |
|----------|----------|
| Windows | Windows 8/10/OS | macOS11 |
| mac 10.9+ |
| Linux | Ubuntu 18.04+, Debian 10+ |

## Windows 安装

### 方法一：官方安装包（推荐）

1. 访问 Node.js 官网：https://nodejs.org/zh-cn/
2. 下载 LTS（长期支持版）安装包
3. 运行安装程序
4. 按提示完成安装
5. 验证安装：
   ```powershell
   node --version
   npm --version
   ```

### 方法二：使用 winget

```powershell
# 安装 LTS 版本
winget install OpenJS.NodeJS.LTS

# 安装最新版
winget install OpenJS.NodeJS
```

### 方法三：Chocolatey

```powershell
choco install nodejs-lts
```

## macOS 安装

### 方法一：官方安装包

1. 下载 macOS 安装包：https://nodejs.org/zh-cn/
2. 运行 .pkg 安装程序

### 方法二：Homebrew（推荐）

```bash
# 安装 Homebrew（如果未安装）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 Node.js LTS
brew install node

# 验证
node --version
npm --version
```

### 方法三：nvm（推荐）

nvm 可以在同一台机器上管理多个 Node.js 版本：

```bash
# 安装 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 安装 LTS 版本
nvm install --lts

# 使用 LTS 版本
nvm use --lts

# 设置默认版本
nvm alias default lts/*

# 查看已安装版本
nvm ls
```

## Linux 安装

### Ubuntu/Debian

```bash
# 方法1：使用包管理器
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# 方法2：使用 nvm（推荐）
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc
nvm install --lts
```

### CentOS/RHEL

```bash
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo yum install -y nodejs
```

### Fedora

```bash
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -
sudo dnf install -y nodejs
```

## 配置国内镜像

在中国大陆，建议配置 npm 镜像加速：

### 临时使用

```bash
npm install express -i https://registry.npmmirror.com
```

### 永久配置

```bash
npm config set registry https://registry.npmmirror.com
```

### 常用镜像

- 淘宝：https://registry.npmmirror.com
- 阿里云：https://mirrors.aliyun.com/npm/
- 腾讯云：https://mirrors.cloud.tencent.com/npm/

## npm 常用命令

```bash
# 查看版本
node --version
npm --version

# 初始化项目
npm init -y

# 安装依赖
npm install express
npm install express --save
npm install express --save-dev

# 全局安装
npm install -g nodemon

# 删除依赖
npm uninstall express

# 查看已安装
npm list
npm list -g

# 更新
npm update express
npm update -g

# 运行脚本
npm run dev
npm run build
```

## nvm 常用命令

```bash
# 查看已安装
nvm ls

# 查看可用版本
nvm ls-remote

# 安装指定版本
nvm install 20.10.0

# 使用指定版本
nvm use 20.10.0

# 设置默认版本
nvm alias default 20.10.0

# 卸载版本
nvm uninstall 18.19.0
```

## 创建第一个 Node.js 项目

### 步骤 1：初始化项目

```bash
mkdir my-project
cd my-project
npm init -y
```

### 步骤 2：安装依赖

```bash
npm install express
```

### 步骤 3：创建入口文件

```javascript
// index.js
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.send('Hello World!');
});

app.listen(3000, () => {
  console.log('服务器运行在 http://localhost:3000');
});
```

### 步骤 4：运行

```bash
node index.js
```

## 使用 nodemon 自动重启

nodemon 可以在文件变化时自动重启应用：

```bash
# 全局安装
npm install -g nodemon

# 运行
nodemon index.js
```

## package.json 配置

```json
{
  "name": "my-project",
  "version": "1.0.0",
  "description": "我的项目",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2"
  },
  "devDependencies": {
    "nodemon": "^3.0.0"
  }
}
```

## 卸载 Node.js

### Windows

- 通过"设置"→"应用"卸载

### macOS

```bash
# 使用 Homebrew
brew uninstall node

# 使用 nvm
nvm ls
nvm uninstall <version>
```

### Linux

```bash
sudo apt-get remove nodejs
sudo apt-get autoremove
```

## 常见问题

### Q1: node 命令找不到

**解决方案：**
- Windows：检查 PATH 环境变量
- Linux/macOS：使用 `source ~/.bashrc` 或 `source ~/.zshrc`

### Q2: npm 安装失败

**解决方案：**
```bash
# 清理缓存
npm cache clean --force

# 配置镜像
npm config set registry https://registry.npmmirror.com
```

### Q3: 权限不足

**解决方案：**
- Windows：以管理员身份运行
- Linux/macOS：使用 sudo 或配置 npm 前缀

## 下一步

- [Node.js 使用手册](./3.使用手册.md) - 学习 Node.js 开发
- [Node.js 常见问题](./4.常见问题.md) - 解答常见问题
- 官方文档：https://nodejs.org/zh-cn/docs/
