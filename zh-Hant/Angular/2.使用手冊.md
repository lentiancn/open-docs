# Angular ä½¿ç”¨æ‰‹å†Š

> ğŸ¯ æœ¬æ–‡æª”è©³ç´°ä»‹ç´¹ Angular çš„æ ¸å¿ƒæ¦‚å¿µã€åŸºæœ¬ç”¨æ³•å’Œé–‹ç™¼æŒ‡å—
> 
> ğŸ“… æ›´æ–°æ™‚é–“ï¼š2026å¹´2æœˆ
> 
> ğŸ“– é©ç”¨ç‰ˆæœ¬ï¼šAngular 17+

---

## ç›®éŒ„

1. [Angular ç°¡ä»‹](#1-angular-ç°¡ä»‹)
2. [å°ˆæ¡ˆçµæ§‹](#2-å°ˆæ¡ˆçµæ§‹)
3. [æ ¸å¿ƒæ¦‚å¿µ](#3-æ ¸å¿ƒæ¦‚å¿µ)
4. [å…ƒä»¶é–‹ç™¼](#4-å…ƒä»¶é–‹ç™¼)
5. [æœå‹™èˆ‡ä¾è³´æ³¨å…¥](#5-æœå‹™èˆ‡ä¾è³´æ³¨å…¥)
6. [è·¯ç”±](#6-è·¯ç”±)
7. [è¡¨å–®è™•ç†](#7-è¡¨å–®è™•ç†)
8. [HTTP é€šè¨Š](#8-http-é€šè¨Š)
9. [ç‹€æ…‹ç®¡ç†](#9-ç‹€æ…‹ç®¡ç†)
10. [æ¨£å¼èˆ‡å‹•ç•«](#10-æ¨£å¼èˆ‡å‹•ç•«)
11. [æ¸¬è©¦](#11-æ¸¬è©¦)
12. [å»ºç½®èˆ‡éƒ¨ç½²](#12-å»ºç½®èˆ‡éƒ¨ç½²)
13. [æœ€ä½³å¯¦è¸](#13-æœ€ä½³å¯¦è¸)

---

## 1. Angular ç°¡ä»‹

### 1.1 ä»€éº¼æ˜¯ Angularï¼Ÿ

Angular æ˜¯ä¸€å€‹ç”± Google ç¶­è­·çš„é–‹æº Web æ‡‰ç”¨æ¡†æ¶ã€‚å®ƒä½¿ç”¨ TypeScript å»ºæ§‹ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹é»ï¼š

- **å…ƒä»¶åŒ–**ï¼šåŸºæ–¼å…ƒä»¶çš„æ¶æ§‹
- **é›™å‘è³‡æ–™ç¶å®š**ï¼šè‡ªå‹•åŒæ­¥ç¯„æœ¬èˆ‡è³‡æ–™
- **ä¾è³´æ³¨å…¥**ï¼šå¼·å¤§çš„ä¾è³´ç®¡ç†ç³»çµ±
- **è·¯ç”±**ï¼šå®Œæ•´çš„ç”¨æˆ¶ç«¯è·¯ç”±è§£æ±ºæ–¹æ¡ˆ
- **è¡¨å–®**ï¼šå¼·å¤§çš„è¡¨å–®é©—è­‰åŠŸèƒ½
- **HTTP**ï¼šç°¡æ½”çš„ HTTP ç”¨æˆ¶ç«¯
- **æ¸¬è©¦**ï¼šå®Œæ•´çš„æ¸¬è©¦å·¥å…·éˆ

### 1.2 Angular ç‰ˆæœ¬æ­·å²

| ç‰ˆæœ¬ | ç™¼å¸ƒæ—¥æœŸ | ä¸»è¦ç‰¹æ€§ |
|------|----------|----------|
| Angular 17 | 2023å¹´11æœˆ | ç¨ç«‹å…ƒä»¶ã€Signalã€if/for å¡Šèªæ³• |
| Angular 16 | 2023å¹´5æœˆ | Signalã€å¯¦é©—æ€§ SSR |
| Angular 15 | 2022å¹´11æœˆ | ç¨ç«‹å…ƒä»¶ API ç©©å®š |
| Angular 14 | 2022å¹´6æœˆ | å¼·é¡å‹è¡¨å–® |
| Angular 13 | 2021å¹´11æœˆ | ç§»é™¤ View Engine |
| Angular 2 | 2016å¹´9æœˆ | å…¨æ–°æ¶æ§‹ |

> ğŸ’¡ **æç¤º**ï¼šæœ¬æ‰‹å†ŠåŸºæ–¼ Angular 17+ ç·¨å¯«ï¼Œä½¿ç”¨**ç¨ç«‹å…ƒä»¶**ï¼ˆStandalone Componentsï¼‰ä½œç‚ºæ¨è–¦å¯«æ³•ã€‚

---

## 2. å°ˆæ¡ˆçµæ§‹

### 2.1 å…¸å‹å°ˆæ¡ˆçµæ§‹

```
my-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ app.component.ts       # æ ¹å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ app.component.html    # æ ¹å…ƒä»¶ç¯„æœ¬
â”‚   â”‚   â”œâ”€â”€ app.component.css     # æ ¹å…ƒä»¶æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ app.config.ts         # æ‡‰ç”¨è¨­å®šï¼ˆAngular 17+ï¼‰
â”‚   â”‚   â”œâ”€â”€ app.routes.ts         # è·¯ç”±è¨­å®š
â”‚   â”‚   â”œâ”€â”€ components/          # å…±ç”¨å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ services/              # æœå‹™
â”‚   â”‚   â”œâ”€â”€ models/               # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â””â”€â”€ pages/                 # é é¢å…ƒä»¶
â”‚   â”œâ”€â”€ assets/                   # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ environments/             # ç’°å¢ƒè¨­å®š
â”‚   â”œâ”€â”€ styles.css                # å…¨åŸŸæ¨£å¼
â”‚   â”œâ”€â”€ index.html                # HTML å…¥å£
â”‚   â””â”€â”€ main.ts                   # æ‡‰ç”¨å…¥å£
â”œâ”€â”€ angular.json                   # Angular CLI è¨­å®š
â”œâ”€â”€ package.json                   # å°ˆæ¡ˆä¾è³´
â”œâ”€â”€ tsconfig.json                  # TypeScript è¨­å®š
â””â”€â”€ node_modules/                  # ä¾è³´ç›®éŒ„
```

### 2.2 ä¸»è¦æª”æ¡ˆèªªæ˜

| æª”æ¡ˆ | ä½œç”¨ |
|------|------|
| `angular.json` | Angular CLI è¨­å®šæª” |
| `package.json` | å°ˆæ¡ˆä¾è³´å’Œè…³æœ¬è¨­å®š |
| `tsconfig.json` | TypeScript ç·¨è­¯å™¨è¨­å®š |
| `src/main.ts` | æ‡‰ç”¨å•Ÿå‹•å…¥å£ |
| `src/index.html` | HTML å…¥å£æª”æ¡ˆ |

---

## 3. æ ¸å¿ƒæ¦‚å¿µ

### 3.1 æ¨¡çµ„ï¼ˆModuleï¼‰

æ¨¡çµ„æ˜¯ Angular æ‡‰ç”¨çš„åŸºæœ¬å»ºæ§‹å¡Šï¼Œç”¨æ–¼çµ„ç¹”ç¨‹å¼ç¢¼ã€‚

#### å»ºç«‹æ¨¡çµ„

```bash
ng generate module my-module
```

#### æ¨¡çµ„åŸºæœ¬çµæ§‹

```typescript
import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MyComponentComponent } from './my-component/my-component.component';

@NgModule({
  declarations: [
    MyComponentComponent
  ],
  imports: [
    CommonModule  // æä¾› *ngIf, *ngFor ç­‰æŒ‡ä»¤
  ],
  exports: [
    MyComponentComponent
  ]
})
export class MyModuleModule { }
```

> âš ï¸ **æ³¨æ„**ï¼šAngular 17+ æ¨è–¦ä½¿ç”¨**ç¨ç«‹å…ƒä»¶**ï¼Œå¯ä»¥ä¸éœ€è¦ NgModuleã€‚

---

### 3.2 å…ƒä»¶ï¼ˆComponentï¼‰

å…ƒä»¶æ˜¯ Angular æ‡‰ç”¨çš„æ ¸å¿ƒ UI å–®å…ƒã€‚

#### å»ºç«‹å…ƒä»¶

```bash
# å»ºç«‹å…ƒä»¶
ng generate component my-component

# å»ºç«‹ç¨ç«‹å…ƒä»¶ï¼ˆAngular 17+ æ¨è–¦ï¼‰
ng generate component my-component --standalone
```

#### å…ƒä»¶åŸºæœ¬çµæ§‹

```typescript
import { Component } from '@angular/core';

@Component({
  selector: 'app-my-component',
  standalone: true,  // ç¨ç«‹å…ƒä»¶
  imports: [],
  templateUrl: './my-component.component.html',
  styleUrls: ['./my-component.component.css']
})
export class MyComponentComponent {
  // å…ƒä»¶é‚è¼¯
  title: string = 'Hello Angular';
  
  // æ–¹æ³•
  greet(): void {
    console.log('Hello!');
  }
}
```

#### å…§åµŒç¯„æœ¬å’Œæ¨£å¼

```typescript
@Component({
  selector: 'app-my-component',
  standalone: true,
  template: `
    <h1>{{ title }}</h1>
    <button (click)="greet()">é»æ“Š</button>
  `,
  styles: [`
    h1 { color: blue; }
  `]
})
export class MyComponentComponent {
  title: string = 'Hello Angular';
}
```

---

### 3.3 ç¯„æœ¬èªæ³•

#### æ’å€¼ç¶å®š

```html
<!-- è®Šæ•¸ç¶å®š -->
<p>Hello, {{ name }}!</p>

<!-- è¨ˆç®—è¡¨é”å¼ -->
<p>{{ 1 + 1 }}</p>

<!-- å‘¼å«æ–¹æ³• -->
<p>{{ getName() }}</p>
```

#### å±¬æ€§ç¶å®š

```html
<!-- HTML å±¬æ€§ -->
<img [src]="imageUrl">

<!-- é¡åˆ¥ç¶å®š -->
<div [class.active]="isActive">å…§å®¹</div>

<!-- æ¨£å¼ç¶å®š -->
<div [style.color]="textColor">å…§å®¹</div>

<!-- åœç”¨æŒ‰éˆ• -->
<button [disabled]="isDisabled">æŒ‰éˆ•</button>
```

#### äº‹ä»¶ç¶å®š

```html
<!-- é»æ“Šäº‹ä»¶ -->
<button (click)="onClick()">é»æ“Š</button>

<!-- è¼¸å…¥äº‹ä»¶ -->
<input (input)="onInput($event)">

<!-- éµç›¤äº‹ä»¶ -->
<input (keyup.enter)="onEnter()">
```

#### é›™å‘è³‡æ–™ç¶å®š

```typescript
import { FormsModule } from '@angular/forms';

// åœ¨å…ƒä»¶ä¸­
@Component({
  imports: [FormsModule],
  ...
})
export class MyComponent {
  name: string = '';
}
```

```html
<input [(ngModel)]="name">
<p>ä½ è¼¸å…¥äº†: {{ name }}</p>
```

---

### 3.4 æŒ‡ä»¤ï¼ˆDirectiveï¼‰

#### å…§å»ºæŒ‡ä»¤

```html
<!-- æ¢ä»¶æ¸²æŸ“ -->
<div *ngIf="isVisible">å…§å®¹</div>

<!-- åˆ†æ”¯åˆ¤æ–· -->
<div *ngIf="isLoggedIn; else loginTemplate">
  æ­¡è¿å›ä¾†ï¼
</div>
<ng-template #loginTemplate>
  è«‹ç™»å…¥
</ng-template>

<!-- å¾ªç’°æ¸²æŸ“ -->
<li *ngFor="let item of items; let i = index">
  {{ i + 1 }}. {{ item.name }}
</li>

<!-- é¡åˆ¥åˆ‡æ› -->
<div [ngClass]="{'active': isActive, 'disabled': isDisabled}">

<!-- æ¨£å¼åˆ‡æ› -->
<div [ngStyle]="{'color': textColor, 'font-size': fontSize + 'px'}">
```

#### Angular 17+ æ§åˆ¶æµèªæ³•

```html
<!-- @if æ›¿ä»£ *ngIf -->
@if (isVisible) {
  <p>å…§å®¹</p>
} @else {
  <p>å…¶ä»–å…§å®¹</p>
}

<!-- @for æ›¿ä»£ *ngFor -->
@for (item of items; track item.id) {
  <li>{{ item.name }}</li>
} @empty {
  <li>æ²’æœ‰è³‡æ–™</li>
}

<!-- @switch -->
@switch (type) {
  @case ('A') { <p>é¡å‹ A</p> }
  @case ('B') { <p>é¡å‹ B</p> }
  @default { <p>å…¶ä»–é¡å‹</p> }
}
```

---

## 4. å…ƒä»¶é–‹ç™¼

### 4.1 å…ƒä»¶é€šè¨Š

#### çˆ¶å…ƒä»¶å‘å­å…ƒä»¶å‚³å€¼ï¼ˆè¼¸å…¥å±¬æ€§ï¼‰

```typescript
// å­å…ƒä»¶
import { Component, Input } from '@angular/core';

@Component({
  selector: 'app-child',
  standalone: true,
  template: `<p>{{ message }}</p>`
})
export class ChildComponent {
  @Input() message: string = '';
  @Input() count: number = 0;
}
```

```html
<!-- çˆ¶å…ƒä»¶ç¯„æœ¬ -->
<app-child message="ä½ å¥½" [count]="5"></app-child>
```

#### å­å…ƒä»¶å‘çˆ¶å…ƒä»¶å‚³å€¼ï¼ˆè¼¸å‡ºå±¬æ€§ï¼‰

```typescript
// å­å…ƒä»¶
import { Component, Output, EventEmitter } from '@angular/core';

@Component({
  selector: 'app-child',
  standalone: true,
  template: `<button (click)="sendEvent()">å‚³é€</button>`
})
export class ChildComponent {
  @Output() messageEvent = new EventEmitter<string>();
  
  sendEvent(): void {
    this.messageEvent.emit('ä¾†è‡ªå­å…ƒä»¶çš„è¨Šæ¯');
  }
}
```

```typescript
// çˆ¶å…ƒä»¶
@Component({
  standalone: true,
  imports: [ChildComponent],
  template: `<app-child (messageEvent)="onMessage($event)"></app-child>`
})
export class ParentComponent {
  onMessage(message: string): void {
    console.log(message);
  }
}
```

#### ä½¿ç”¨ ViewChild å­˜å–å­å…ƒä»¶

```typescript
import { Component, ViewChild, AfterViewInit } from '@angular/core';
import { ChildComponent } from './child.component';

@Component({
  standalone: true,
  imports: [ChildComponent],
  template: `<app-child #childRef></app-child>`
})
export class ParentComponent implements AfterViewInit {
  @ViewChild('childRef') childComponent!: ChildComponent;
  
  ngAfterViewInit(): void {
    // å­˜å–å­å…ƒä»¶çš„å±¬æ€§å’Œæ–¹æ³•
    this.childComponent.someMethod();
  }
}
```

---

### 4.2 ç”Ÿå‘½é€±æœŸéˆå­

| éˆå­ | è§¸ç™¼æ™‚æ©Ÿ |
|------|----------|
| `ngOnInit` | å…ƒä»¶åˆå§‹åŒ–å¾Œ |
| `ngOnChanges` | è¼¸å…¥å±¬æ€§è®ŠåŒ–æ™‚ |
| `ngDoCheck` | è®Šæ›´åµæ¸¬æ™‚ |
| `ngAfterViewInit` | è¦–åœ–åˆå§‹åŒ–å¾Œ |
| `ngAfterViewChecked` | è¦–åœ–æª¢æŸ¥å¾Œ |
| `ngOnDestroy` | å…ƒä»¶éŠ·æ¯€å‰ |

```typescript
import { Component, OnInit, OnDestroy } from '@angular/core';

@Component({
  selector: 'app-lifecycle',
  standalone: true,
  template: `<p>{{ message }}</p>`
})
export class LifecycleComponent implements OnInit, OnDestroy {
  message: string = '';
  
  ngOnInit(): void {
    console.log('å…ƒä»¶åˆå§‹åŒ–');
    this.message = 'Hello';
  }
  
  ngOnDestroy(): void {
    console.log('å…ƒä»¶éŠ·æ¯€');
    // æ¸…ç†å·¥ä½œï¼šå–æ¶ˆè¨‚é–±ã€è¨ˆæ™‚å™¨ç­‰
  }
}
```

---

## 5. æœå‹™èˆ‡ä¾è³´æ³¨å…¥

### 5.1 å»ºç«‹æœå‹™

```bash
ng generate service services/data
```

### 5.2 æœå‹™åŸºæœ¬çµæ§‹

```typescript
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({
  providedIn: 'root'  // å…¨åŸŸå–®ä¾‹
})
export class DataService {
  private apiUrl = 'https://api.example.com';
  
  constructor(private http: HttpClient) { }
  
  // GET è«‹æ±‚
  getData(): Observable<any> {
    return this.http.get(this.apiUrl);
  }
  
  // POST è«‹æ±‚
  postData(data: any): Observable<any> {
    return this.http.post(this.apiUrl, data);
  }
}
```

### 5.3 åœ¨å…ƒä»¶ä¸­ä½¿ç”¨æœå‹™

```typescript
import { Component, OnInit } from '@angular/core';
import { DataService } from './services/data.service';

@Component({
  selector: 'app-my',
  standalone: true,
  template: `<p>{{ data | json }}</p>`
})
export class MyComponent implements OnInit {
  data: any = null;
  
  constructor(private dataService: DataService) { }
  
  ngOnInit(): void {
    this.dataService.getData().subscribe({
      next: (result) => this.data = result,
      error: (err) => console.error(err)
    });
  }
}
```

### 5.4 ä¾è³´æ³¨å…¥è©³è§£

#### å…ƒä»¶ç´šæ³¨å…¥

```typescript
@Component({
  selector: 'app-my',
  standalone: true,
  providers: [MyService]  // å…ƒä»¶ç´šå¯¦ä¾‹
})
export class MyComponent {
  constructor(private myService: MyService) { }
}
```

---

## 6. è·¯ç”±

### 6.1 è·¯ç”±è¨­å®š

```typescript
// app.routes.ts
import { Routes } from '@angular/router';
import { HomeComponent } from './pages/home/home.component';
import { AboutComponent } from './pages/about/about.component';
import { UserComponent } from './pages/user/user.component';

export const routes: Routes = [
  { path: '', redirectTo: '/home', pathMatch: 'full' },
  { path: 'home', component: HomeComponent },
  { path: 'about', component: AboutComponent },
  { 
    path: 'users', 
    children: [
      { path: '', component: UserComponent },
      { path: ':id', component: UserDetailComponent }
    ]
  },
  { path: '**', component: NotFoundComponent }  // 404
];
```

### 6.2 è·¯ç”±å‡ºå£

```typescript
// app.component.ts
import { Component } from '@angular/core';
import { RouterOutlet, RouterLink, RouterLinkActive } from '@angular/router';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterOutlet, RouterLink, RouterLinkActive],
  template: `
    <nav>
      <a routerLink="/home" routerLinkActive="active">é¦–é </a>
      <a routerLink="/about" routerLinkActive="active">é—œæ–¼</a>
    </nav>
    <router-outlet></router-outlet>
  `,
  styles: [`
    .active { color: red; }
  `]
})
export class AppComponent { }
```

### 6.3 è·¯ç”±åƒæ•¸

```typescript
import { ActivatedRoute, ParamMap } from '@angular/router';
import { switchMap } from 'rxjs/operators';

@Component({
  standalone: true,
  template: `<p>ä½¿ç”¨è€… ID: {{ userId }}</p>`
})
export class UserDetailComponent implements OnInit {
  userId: string = '';
  
  constructor(private route: ActivatedRoute) { }
  
  ngOnInit(): void {
    this.route.paramMap.subscribe(params => {
      this.userId = params.get('id') || '';
    });
  }
}
```

### 6.4 è·¯ç”±å®ˆè¡›

#### CanActivate - è·¯ç”±å®ˆè¡›

```typescript
import { CanActivateFn, Router } from '@angular/router';

export const authGuard: CanActivateFn = (route, state) => {
  const router = new Router();
  const isLoggedIn = /* ä½ çš„ç™»å…¥æª¢æŸ¥é‚è¼¯ */;
  
  if (isLoggedIn) {
    return true;
  } else {
    router.navigate(['/login']);
    return false;
  }
};
```

```typescript
// è·¯ç”±ä¸­ä½¿ç”¨
export const routes: Routes = [
  { 
    path: 'admin', 
    component: AdminComponent,
    canActivate: [authGuard]
  }
];
```

---

## 7. è¡¨å–®è™•ç†

### 7.1 åæ‡‰å¼è¡¨å–®

```typescript
import { Component } from '@angular/core';
import { FormBuilder, FormGroup, Validators, ReactiveFormsModule } from '@angular/forms';

@Component({
  selector: 'app-login',
  standalone: true,
  imports: [ReactiveFormsModule],
  template: `
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div>
        <label>é›»å­éƒµä»¶</label>
        <input type="email" formControlName="email">
        <span *ngIf="loginForm.get('email')?.invalid">
          è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶
        </span>
      </div>
      <div>
        <label>å¯†ç¢¼</label>
        <input type="password" formControlName="password">
      </div>
      <button type="submit" [disabled]="loginForm.invalid">ç™»å…¥</button>
    </form>
  `
})
export class LoginComponent {
  loginForm: FormGroup;
  
  constructor(private fb: FormBuilder) {
    this.loginForm = this.fb.group({
      email: ['', [Validators.required, Validators.email]],
      password: ['', [Validators.required, Validators.minLength(6)]]
    });
  }
  
  onSubmit(): void {
    if (this.loginForm.valid) {
      console.log(this.loginForm.value);
    }
  }
}
```

### 7.2 è¡¨å–®é©—è­‰å™¨

#### å…§å»ºé©—è­‰å™¨

```typescript
this.form = this.fb.group({
  name: ['', Validators.required],
  email: ['', [Validators.required, Validators.email]],
  age: ['', [Validators.required, Validators.min(18), Validators.max(100)]],
  url: ['', Validators.pattern(/^https?:\/\/.+/)]
});
```

#### è‡ªè¨‚é©—è­‰å™¨

```typescript
import { AbstractControl, ValidationErrors, ValidatorFn } from '@angular/forms';

export function forbiddenValidator(forbidden: RegExp): ValidatorFn {
  return (control: AbstractControl): ValidationErrors | null => {
    const forbiddenValue = forbidden.test(control.value);
    return forbiddenValue ? { forbidden: { value: control.value } } : null;
  };
}

// ä½¿ç”¨
this.form = this.fb.group({
  username: ['', forbiddenValidator(/^admin/)]
});
```

---

## 8. HTTP é€šè¨Š

### 8.1 è¨­å®š HttpClient

```typescript
// app.config.ts (Angular 17+)
import { ApplicationConfig } from '@angular/core';
import { provideHttpClient } from '@angular/common/http';

export const appConfig: ApplicationConfig = {
  providers: [
    provideHttpClient()
  ]
};
```

### 8.2 GET è«‹æ±‚

```typescript
import { HttpClient } from '@angular/common/http';

@Component({ standalone: true })
export class MyComponent {
  constructor(private http: HttpClient) { }
  
  getData(): void {
    this.http.get('https://api.example.com/data').subscribe({
      next: (data) => console.log(data),
      error: (err) => console.error(err),
      complete: () => console.log('è«‹æ±‚å®Œæˆ')
    });
  }
}
```

### 8.3 POST è«‹æ±‚

```typescript
this.http.post('https://api.example.com/data', { 
  name: 'å¼µä¸‰',
  age: 25 
}).subscribe(result => console.log(result));
```

### 8.4 ä½¿ç”¨ RxJS é‹ç®—å­

```typescript
import { catchError, of } from 'rxjs';

this.http.get('https://api.example.com/data').pipe(
  catchError(error => {
    console.error(error);
    return of({ error: true, message: 'è«‹æ±‚å¤±æ•—' });
  })
).subscribe(data => console.log(data));
```

---

## 9. ç‹€æ…‹ç®¡ç†

### 9.1 æœå‹™ + Signalï¼ˆAngular 16+ æ¨è–¦ï¼‰

```typescript
import { Injectable, signal, computed } from '@angular/core';

@Injectable({ providedIn: 'root' })
export class CounterService {
  // Signal
  count = signal(0);
  
  // è¨ˆç®—å±¬æ€§
  doubleCount = computed(() => this.count() * 2);
  
  // æ–¹æ³•
  increment(): void {
    this.count.update(c => c + 1);
  }
  
  decrement(): void {
    this.count.update(c => c - 1);
  }
  
  reset(): void {
    this.count.set(0);
  }
}
```

```typescript
import { Component } from '@angular/core';
import { CounterService } from './services/counter.service';

@Component({
  selector: 'app-counter',
  standalone: true,
  template: `
    <p>è¨ˆæ•¸: {{ counterService.count() }}</p>
    <p>é›™å€: {{ counterService.doubleCount() }}</p>
    <button (click)="counterService.increment()">+</button>
    <button (click)="counterService.decrement()">-</button>
  `
})
export class CounterComponent {
  constructor(public counterService: CounterService) { }
}
```

### 9.2 NgRxï¼ˆè¤‡é›œç‹€æ…‹ç®¡ç†ï¼‰

å°æ–¼å¤§å‹æ‡‰ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ NgRxï¼š

```bash
ng add @ngrx/store
```

---

## 10. æ¨£å¼èˆ‡å‹•ç•«

### 10.1 å…¨åŸŸæ¨£å¼

```css
/* styles.css */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

* {
  box-sizing: border-box;
}
```

### 10.2 å…ƒä»¶æ¨£å¼

```typescript
@Component({
  selector: 'app-styled',
  standalone: true,
  template: `<p class="highlight">æ¨£å¼ç¯„ä¾‹</p>`,
  styles: [`
    .highlight {
      background-color: yellow;
      padding: 10px;
      border-radius: 4px;
    }
  `]
})
export class StyledComponent { }
```

### 10.3 Angular å‹•ç•«

```bash
npm install @angular/animations
```

```typescript
import { Component, trigger, state, style, transition, animate } from '@angular/animations';

@Component({
  selector: 'app-animated',
  standalone: true,
  animations: [
    trigger('expandCollapse', [
      state('collapsed', style({ height: '0px', opacity: 0 })),
      state('expanded', style({ height: '*', opacity: 1 })),
      transition('collapsed <=> expanded', [
        animate('300ms ease-in-out')
      ])
    ])
  ],
  template: `
    <button (click)="toggle()">åˆ‡æ›</button>
    <div [@expandCollapse]="isExpanded ? 'expanded' : 'collapsed'">
      å…§å®¹å€åŸŸ
    </div>
  `
})
export class AnimatedComponent {
  isExpanded = false;
  
  toggle(): void {
    this.isExpanded = !this.isExpanded;
  }
}
```

---

## 11. æ¸¬è©¦

### 11.1 å–®å…ƒæ¸¬è©¦

```bash
# åŸ·è¡Œæ¸¬è©¦
ng test

# ç”¢ç”Ÿæ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
ng test --code-coverage
```

#### æ¸¬è©¦å…ƒä»¶

```typescript
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { MyComponent } from './my.component';

describe('MyComponent', () => {
  let component: MyComponent;
  let fixture: ComponentFixture<MyComponent>;
  
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [MyComponent]
    }).compileComponents();
    
    fixture = TestBed.createComponent(MyComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });
  
  it('æ‡‰è©²å»ºç«‹å…ƒä»¶', () => {
    expect(component).toBeTruthy();
  });
  
  it('æ‡‰è©²é¡¯ç¤ºæ¨™é¡Œ', () => {
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h1')?.textContent).toContain('Hello');
  });
});
```

#### æ¸¬è©¦æœå‹™

```typescript
import { TestBed } from '@angular/core/testing';
import { DataService } from './data.service';

describe('DataService', () => {
  let service: DataService;
  
  beforeEach(() => {
    TestBed.configureTestingModule({
      providers: [DataService]
    });
    
    service = TestBed.inject(DataService);
  });
  
  it('æ‡‰è©²å»ºç«‹æœå‹™', () => {
    expect(service).toBeTruthy();
  });
});
```

### 11.2 E2E æ¸¬è©¦

```bash
# å®‰è£ Cypress
ng add @cypress/schematics

# åŸ·è¡Œ E2E æ¸¬è©¦
ng e2e
```

---

## 12. å»ºç½®èˆ‡éƒ¨ç½²

### 12.1 é–‹ç™¼æ¨¡å¼

```bash
# å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
ng serve

# å•Ÿå‹•ä¸¦é–‹å•Ÿç€è¦½å™¨
ng serve --open

# æŒ‡å®šé€£æ¥åŸ 
ng serve --port 4201
```

### 12.2 ç”Ÿç”¢å»ºç½®

```bash
# ç”Ÿç”¢å»ºç½®
ng build

# ç”Ÿç”¢å»ºç½®ï¼ˆæœ€ä½³åŒ–ï¼‰
ng build --configuration production

# ç°¡åŒ–å»ºç½®è¼¸å‡º
ng build --optimization --source-map=false
```

### 12.3 å»ºç½®ç”¢ç‰©

å»ºç½®å®Œæˆå¾Œï¼Œç”¢ç‰©åœ¨ `dist/` ç›®éŒ„ä¸‹ï¼š

```
dist/
â””â”€â”€ my-app/
    â”œâ”€â”€ index.html
    â”œâ”€â”€ main.js
    â”œâ”€â”€ polyfills.js
    â”œâ”€â”€ runtime.js
    â””â”€â”€ styles.css
```

### 12.4 éƒ¨ç½²åˆ°éœæ…‹ä¼ºæœå™¨

#### éƒ¨ç½²åˆ° Nginx

```nginx
server {
    listen 80;
    server_name example.com;
    root /var/www/my-app;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # å¿«å–éœæ…‹è³‡æº
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

#### éƒ¨ç½²åˆ° Vercel

```bash
# å®‰è£ Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel
```

---

## 13. æœ€ä½³å¯¦è¸

### 13.1 å°ˆæ¡ˆçµæ§‹æœ€ä½³å¯¦è¸

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/                 # æ ¸å¿ƒæ¨¡çµ„ï¼ˆå–®ä¾‹æœå‹™ã€æ””æˆªå™¨ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ interceptors/
â”‚   â”‚   â””â”€â”€ guards/
â”‚   â”œâ”€â”€ shared/               # å…±ç”¨æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ directives/
â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â””â”€â”€ models/
â”‚   â”œâ”€â”€ features/             # åŠŸèƒ½æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”œâ”€â”€ app.component.ts
â”‚   â”œâ”€â”€ app.config.ts
â”‚   â””â”€â”€ app.routes.ts
â”œâ”€â”€ assets/
â”œâ”€â”€ environments/
â””â”€â”€ styles.scss
```

### 13.2 å‘½åæ…£ä¾‹

```bash
# å…ƒä»¶
ng g c features/users/user-list
ng g c shared/components/loading-spinner

# æœå‹™
ng g s core/services/auth

# ç®¡é“
ng g p shared/pipes/format-date
```

### 13.3 æ•ˆèƒ½æœ€ä½³åŒ–

1. **ä½¿ç”¨ OnPush è®Šæ›´åµæ¸¬ç­–ç•¥**
   ```typescript
   @Component({
     changeDetection: ChangeDetectionStrategy.OnPush
   })
   ```

2. **ä½¿ç”¨ trackBy æé«˜åˆ—è¡¨æ•ˆèƒ½**
   ```html
   @for (item of items; track item.id) {
     <li>{{ item.name }}</li>
   }
   ```

3. **å»¶é²è¼‰å…¥æ¨¡çµ„**
   ```typescript
   export const routes: Routes = [
     { 
       path: 'admin', 
       loadComponent: () => import('./admin/admin.component')
     }
   ];
   ```

4. **ä½¿ç”¨ Signal**
   ```typescript
   // å„ªå…ˆä½¿ç”¨ Signal è€Œä¸æ˜¯ Zone.js è®Šæ›´åµæ¸¬
   count = signal(0);
   ```

### 13.4 å®‰å…¨æ€§æœ€ä½³å¯¦è¸

1. **é˜²æ­¢ XSS**
   - ä½¿ç”¨ Angular çš„å…§å»ºä¿è­·
   - é¿å…ä½¿ç”¨ `innerHTML`ï¼Œæˆ–ä½¿ç”¨ `DomSanitizer`

2. **é˜²æ­¢ CSRF**
   - ä½¿ç”¨ HttpClient çš„ CSRF ä¿è­·
   ```typescript
   provideHttpClient(withCsrf())
   ```

3. **é˜²æ­¢ URL æ³¨å…¥**
   - ä½¿ç”¨ Angular Router çš„å°èˆªå®ˆè¡›

---

## ğŸ“š ç›¸é—œè³‡æº

- å®˜æ–¹æ–‡æª”ï¼šhttps://angular.io/docs
- Angular CLIï¼šhttps://angular.io/cli
- Angular æ•™å­¸ï¼šhttps://angular.io/tutorial
- Angular Materialï¼šhttps://material.angular.io/
- NgRxï¼šhttps://ngrx.io/

---

*æœ¬æ–‡æª”ç”± AI åŠ©æ‰‹ç”Ÿæˆï¼Œæ­¡è¿æäº¤å›é¥‹å’Œæ”¹é€²å»ºè­°ã€‚*
