# Node.js - 简介

Node.js 是一个基于 Chrome V8 引擎的 JavaScript 运行时，于 2009 年由 Ryan Dahl 创建。Node.js 使 JavaScript 能够在服务器端运行，打破了 JavaScript 只能在浏览器中执行的限制。

## Node.js 的核心特性

### 1. 事件驱动

Node.js 采用事件驱动的非阻塞 I/O 模型，使其在处理高并发连接时表现出色：

```javascript
const fs = require('fs');

// 异步读取文件，不会阻塞后续代码
fs.readFile('file.txt', 'utf8', (err, data) => {
  if (err) throw err;
  console.log(data);
});

console.log('文件读取进行中...');
```

### 2. 非阻塞 I/O

Node.js 的 I/O 操作是异步的，不会等待操作完成就继续执行：

```javascript
const http = require('http');

http.createServer((req, res) => {
  // 处理请求
  res.writeHead(200, { 'Content-Type': 'text/plain' });
  res.end('Hello World!');
}).listen(3000);

console.log('服务器运行在 http://localhost:3000/');
```

### 3. 跨平台

Node.js 可以运行在 Windows、macOS、Linux 等多种操作系统上。

### 4. npm 包管理器

Node.js 自带 npm（Node Package Manager），是世界上最大的开源库生态系统：

```bash
# 安装包
npm install express

# 全局安装
npm install -g nodemon

# 查看已安装的包
npm list
```

## Node.js 的应用场景

### 1. Web 服务器

Node.js 非常适合构建高性能 Web 服务器：

```javascript
const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.send('Hello World!');
});

app.listen(3000, () => {
  console.log('应用运行在端口 3000');
});
```

### 2. API 服务

构建 RESTful API：

```javascript
const express = require('express');
const app = express();
app.use(express.json());

const users = [
  { id: 1, name: 'Tom' },
  { id: 2, name: 'Jerry' }
];

app.get('/api/users', (req, res) => {
  res.json(users);
});

app.post('/api/users', (req, res) => {
  const newUser = { id: users.length + 1, ...req.body };
  users.push(newUser);
  res.status(201).json(newUser);
});

app.listen(3000);
```

### 3. 实时应用

适合构建聊天应用、游戏服务器等实时应用：

```javascript
const io = require('socket.io')(3000);

io.on('connection', (socket) => {
  console.log('用户连接');
  
  socket.on('chat message', (msg) => {
    io.emit('chat message', msg);
  });
  
  socket.on('disconnect', () => {
    console.log('用户断开连接');
  });
});
```

### 4. 命令行工具

Node.js 适合开发命令行工具：

```javascript
#!/usr/bin/env node

const program = require('commander');

program
  .version('1.0.0')
  .description('命令行工具')
  .option('-n, --name <name>', '你的名字')
  .parse(process.argv);

if (program.name) {
  console.log(`你好, ${program.name}!`);
}
```

### 5. 微服务

Node.js 的轻量级特性非常适合构建微服务架构。

### 6. 前端构建工具

许多前端构建工具基于 Node.js：

- Webpack
- Vite
- Parcel
- Gulp
- Grunt

## Node.js 的模块系统

### CommonJS

Node.js 使用 CommonJS 模块系统：

```javascript
// 导出模块
module.exports = {
  name: 'MyModule',
  version: '1.0.0',
  greet() {
    return 'Hello!';
  }
};

// 或使用 exports
exports.greet = function() {
  return 'Hello!';
};
```

```javascript
// 导入模块
const myModule = require('./myModule');
const { greet } = require('./myModule');
```

### ES Modules

Node.js 也支持 ES Modules：

```javascript
// 导出
export const name = 'MyModule';
export function greet() {
  return 'Hello!';
}

// 导入
import { name, greet } from './myModule.mjs';
```

## Node.js 的核心模块

| 模块 | 说明 |
|------|------|
| fs | 文件系统操作 |
| http | HTTP 服务器和客户端 |
| path | 路径处理 |
| url | URL 处理 |
| querystring | 查询字符串解析 |
| events | 事件处理 |
| stream | 流处理 |
| buffer | 二进制数据 |
| crypto | 加密功能 |
| os | 操作系统信息 |

## Node.js 的版本历史

| 版本 | 发布年份 | 主要特性 |
|------|----------|----------|
| Node.js 0.10 | 2013 | 首个广泛使用版本 |
| Node.js 4.0 | 2015 | 合并 io.js |
| Node.js 6.0 | 2016 | ES6 支持改进 |
| Node.js 8.0 | 2017 | async/await 支持 |
| Node.js 10.0 | 2018 | N-API 引入 |
| Node.js 12.0 | 2019 | ES2019 支持 |
| Node.js 14.0 | 2020 | 默认启用 ES Modules |
| Node.js 16.0 | 2021 | 稳定的 Timers Promises API |
| Node.js 18.0 | 2022 | 实验性 Fetch API |
| Node.js 20.0 | 2023 | 稳定版 Fetch API |
| Node.js 22.0 | 2024 | 稳定版 test runner |

## Node.js 与其他技术对比

### Node.js vs 传统服务器

| 特性 | Node.js | 传统服务器 |
|------|---------|------------|
| I/O 模型 | 非阻塞 | 阻塞 |
| 并发处理 | 单线程+事件循环 | 多线程 |
| 性能 | 高并发下优秀 | 较慢 |
| 开发效率 | JavaScript | 多种语言 |

### Node.js vs Python

| 特性 | Node.js | Python |
|------|---------|--------|
| 性能 | 更高 | 较低 |
| 并发 | 更强 | 较弱 |
| 生态 | npm | pip |
| 学习曲线 | JavaScript 基础 | 更平缓 |

## Node.js 的统计数据

- **GitHub 星标**：97,000+ ⭐
- **npm 包数量**：2,000,000+
- **周下载量**：1,000,000,000+
- **企业用户**：Netflix、Uber、LinkedIn、PayPal 等

## 为什么选择 Node.js？

1. **JavaScript 全栈**：前后端使用相同语言
2. **高性能**：非阻塞 I/O，高并发处理
3. **丰富生态**：npm 拥有海量包
4. **实时应用**：WebSocket 原生支持
5. **跨平台**：Windows、macOS、Linux
6. **轻量级**：资源占用少
7. **社区活跃**：丰富的学习资源

## 相关资源

- 官方网站：https://nodejs.org
- 中文文档：https://nodejs.org/zh-cn/
- npm：https://www.npmjs.com
- 社区：https://nodeforum.com

Node.js 是现代 Web 开发的重要技术，无论是构建 API 服务、实时应用还是命令行工具，都能提供优秀的开发体验。
