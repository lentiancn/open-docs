# Oracle 資料庫安裝指南

Oracle 資料庫是業界領先的關聯式資料庫涵蓋在管理系統。本指南各種環境中的安裝方法。

## 版本資訊

| 版本 | 狀態 | 說明 |
|------|------|------|
| Oracle 21c | ✅ 目前 | 最新版本 |
| Oracle 19c | ✅ LTS | 長期支援版本 |
| Oracle 18c | ❌ 舊版 | 已停止支援 |

> **重要提示**：本指南主要針對 **Oracle 19c/21c**。

## 系統需求

### 硬體需求

| 需求 | 最低配置 | 推薦配置 |
|------|----------|----------|
| CPU | 2 核心 | 4+ 核心 |
| 記憶體 | 2 GB | 8+ GB |
| 磁碟 | 40 GB | 100+ GB |

### 作業系統支援

- **Linux**: Oracle Linux, RHEL, CentOS, SLES, Ubuntu
- **Windows**: Windows Server 2016+

## 安裝方法

### 方法一：Linux 安裝

#### 1. 準備系統

```bash
# 建立使用者群組
groupadd oinstall
groupadd dba
groupadd oper
groupadd backupdba
groupadd dgdba
groupadd kmdba
groupadd racdba
groupadd asmdba
groupadd asmoper
groupadd asmadmin

# 建立 Oracle 使用者
useradd -g oinstall -G dba,oper,backupdba,dgdba,kmdba,racdba,asmdba,asmoper,asmadmin oracle

# 設定密碼
passwd oracle

# 建立目錄
mkdir -p /u01/app/oracle/product/19.3.0/dbhome_1
mkdir -p /u01/app/oraInventory
mkdir -p /u01/app/oracle

# 設定權限
chown -R oracle:oinstall /u01
chmod -R 775 /u01
```

#### 2. 設定核心參數

```bash
# /etc/sysctl.conf
cat >> /etc/sysctl.conf << EOF
kernel.shmmax = 68719476736
kernel.shmmni = 4096
kernel.shmall = 2097152
kernel.sem = 250 32000 100 128
fs.file-max = 6815744
net.ipv4.ip_local_port_range = 9000 65500
net.core.rmem_default = 262144
net.core.rmem_max = 4194304
net.core.wmem_default = 262144
net.core.wmem_max = 1048576
fs.aio-max-nr = 1048576
EOF

# 生效
sysctl -p

# /etc/security/limits.conf
cat >> /etc/security/limits.conf << EOF
oracle soft nproc 2047
oracle hard nproc 16384
oracle soft nofile 1024
oracle hard nofile 65536
oracle soft stack 10240
oracle hard stack 32768
EOF
```

#### 3. 安裝相依套件

```bash
# Oracle Linux
yum install -y libaio libaio-devel libXi libXtst libXext

# Ubuntu
apt-get install -y libaio1 libaio-dev libxi6 libxtst6 libxext6
```

#### 4. 執行安裝程式

```bash
# 解壓安裝檔案
unzip -q LINUX.X64_193000_db_home.zip -d /u01/app/oracle/product/19.3.0/dbhome_1/

# 以 oracle 使用者執行
cd /u01/app/oracle/product/19.3.0/dbhome_1
./runInstaller
```

### 方法二：Windows 安裝

1. 下載 Oracle 安裝程式
2. 執行 setup.exe
3. 按照安裝精靈完成：
   - 選擇「建立和設定單一實例資料庫」
   - 選擇「桌面類」或「伺服器類」
   - 設定 sys 和 system 密碼
   - 完成安裝

### 方法三：使用 Docker

```bash
# 拉取映像檔
docker pull container-registry.oracle.com/database/express:21.3.0-xe

# 執行容器
docker run -d \
  --name oracle \
  -p 1521:1521 \
  -e ORACLE_PWD=MyPassword123 \
  -v oracle_data:/opt/oracle/oradata \
  container-registry.oracle.com/database/express:21.3.0-xe
```

## 安裝後設定

### 環境變數

```bash
# ~/.bash_profile
export ORACLE_HOME=/u01/app/oracle/product/19.3.0/dbhome_1
export ORACLE_SID=orcl
export PATH=$ORACLE_HOME/bin:$PATH
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
```

### 啟動資料庫

```bash
# 啟動監聽器
lsnrctl start

# 啟動資料庫
sqlplus / as sysdba
STARTUP;
```

## 常見問題

### 記憶體不足？

```bash
# 檢查記憶體
grep MemTotal /proc/meminfo

# 調整 swap
```

### 安裝失敗？

檢查日誌：
```bash
cat /u01/app/oraInventory/logs/installActions*.log
```

## 相關連結

- [Oracle 官方文件](https://docs.oracle.com/)
- [Oracle 下載](https://www.oracle.com/database/technologies/)