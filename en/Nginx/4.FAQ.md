# Nginx FAQ

## General Questions

### What is Nginx?

Nginx (engine x) is a high-performance HTTP server and reverse proxy server known for its stability and low resource usage.

### Nginx vs Apache - which is better?

Nginx is generally better for:
- High concurrency scenarios
- Static file serving
- Reverse proxy and load balancing

Apache is better for:
- .htaccess support
- Dynamic content processing
- Extensive module ecosystem

### What is the difference between Nginx and Nginx Plus?

- **Nginx (Open Source)**: Free, core functionality
- **Nginx Plus**: Commercial, includes advanced features like:
  - Active health checks
  - Session persistence
  - Advanced caching
  - Technical support

---

## Installation

### How to install Nginx?

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install nginx
```

**CentOS/RHEL:**
```bash
sudo yum install nginx
```

**macOS:**
```bash
brew install nginx
```

**Docker:**
```bash
docker run -d -p 80:80 nginx
```

### Where are the configuration files?

- Main config: `/etc/nginx/nginx.conf`
- Server blocks: `/etc/nginx/conf.d/`
- Sites enabled: `/etc/nginx/sites-enabled/`

---

## Configuration

### How to test Nginx configuration?

```bash
nginx -t
```

### How to reload configuration without restarting?

```bash
nginx -s reload
```

### How to redirect HTTP to HTTPS?

```nginx
server {
    listen 80;
    server_name example.com;
    return 301 https://$server_name$request_uri;
}
```

---

## Reverse Proxy

### How to configure Nginx as a reverse proxy?

```nginx
server {
    listen 80;
    server_name api.example.com;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### How to load balance with Nginx?

```nginx
upstream backend {
    server backend1.example.com;
    server backend2.example.com;
    server backend3.example.com;
}

server {
    location / {
        proxy_pass http://backend;
    }
}
```

---

## SSL/TLS

### How to enable HTTPS?

1. Obtain SSL certificate (Let's Encrypt, etc.)
2. Configure SSL in server block
3. Redirect HTTP to HTTPS

```nginx
server {
    listen 443 ssl http2;
    server_name example.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;

    location / {
        root /var/www/html;
    }
}
```

### How to use Let's Encrypt?

```bash
# Install certbot
sudo apt install certbot python3-certbot-nginx

# Obtain certificate
sudo certbot --nginx -d example.com -d www.example.com

# Auto-renewal
sudo certbot renew --dry-run
```

---

## Performance

### How to improve Nginx performance?

1. **Enable gzip compression**
```nginx
gzip on;
gzip_types text/plain application/json application/javascript;
```

2. **Configure caching**
```nginx
location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
    expires 7d;
}
```

3. **Optimize worker processes**
```nginx
worker_processes auto;
worker_connections 4096;
```

4. **Use connection pooling**

---

## Troubleshooting

### How to check Nginx status?

```bash
# Check if running
systemctl status nginx

# Check version
nginx -v

# Test configuration
nginx -t
```

### Common errors and solutions

**"Address already in use"**
```bash
# Find what's using the port
sudo lsof -i :80

# Stop the conflicting service
sudo systemctl stop apache2
```

**"Permission denied"**
- Check file permissions
- Verify SELinux settings

**"502 Bad Gateway"**
- Check backend service
- Verify proxy_pass URL

**"504 Gateway Timeout"**
- Increase proxy_read_timeout
- Check backend performance

---

## Modules

### How to install modules?

Most modules are included by default. Additional modules:
- With package manager: `apt install nginx-module-image-filter`
- Compile from source for custom modules

---

## Resources

- Official Documentation: https://nginx.org/en/docs/
- Nginx Blog: https://www.nginx.com/blog/
- Community Forum: https://forum.nginx.org/
