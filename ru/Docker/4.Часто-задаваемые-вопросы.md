# Docker FAQ

Часто задаваемые вопросы.

## Установка

### Q: Docker Desktop не запускается на Windows?

**Решения**:
1. Включить виртуализацию в BIOS
2. Установить/обновить WSL 2
3. Перезагрузить компьютер
4. Проверить конфликтующее ПО (VirtualBox, VMware)

### Q: Ошибка "docker: permission denied"?

**Решение**:
```
sudo usermod -aG docker $USER
# Выйти и войти заново
```

### Q: Какая версия Docker?

```
docker --version
docker-compose --version
```

## Образы

### Q: Как уменьшить размер образа?

**Лучшие практики**:
1. Использовать образы на базе alpine
2. Использовать многоэтапную сборку
3. Минимизировать слои
4. Очищать в том же слое

### Q: Как собрать образ без кэша?

```
docker build --no-cache -t my-image .
```

### Q: Как удалить неиспользуемые образы?

```
docker image prune -a
```

## Контейнеры

### Q: Как_keep контейнер работающим?

```
docker run -d nginx tail -f /dev/null
# или
docker run -d nginx sleep infinity
```

### Q: Контейнер сразу завершается?

**Причины**:
1. Нет приоритетного процесса
2. Процесс завершён

**Решения**:
```
docker run -it image_name /bin/bash
docker run -d image_name tail -f /dev/null
```

### Q: Как войти в работающий контейнер?

```
docker exec -it container_id /bin/bash
```

### Q: Как копировать файлы в/из контейнера?

```
# Из контейнера на хост
docker cp container_id:/path/file.txt ./

# С хоста в контейнер
docker cp ./file.txt container_id:/path/
```

## Сеть

### Q: Как получить доступ к контейнеру с хоста?

Использовать проброс портов:
```
docker run -p 8080:80 nginx
```

### Q: Как подключить контейнеры?

Создать сеть:
```
docker network create my-network
docker run --network my-network -d nginx
```

## Тома

### Q: Как сохранить данные?

Использовать тома:
```
docker volume create my-data
docker run -v my-data:/data nginx
```

## Docker Compose

### Q: Как пересобрать после изменений кода?

```
docker-compose up -d --build
```

### Q: Как посмотреть логи?

```
docker-compose logs -f
```

### Q: Как масштабировать сервисы?

```
docker-compose up -d --scale web=3
```

## Производительность

### Q: Docker медленный / занимает много диска?

**Решения**:
```
docker system prune -a
docker system df
docker volume prune
```

### Q: Как ограничить ресурсы контейнера?

```
docker run -m 512m nginx
docker run --cpus=0.5 nginx
```

## Устранение неполадок

### Q: Как отладить упавший контейнер?

```
docker logs container_id
docker inspect container_id
```

### Q: Сеть контейнера не работает?

```
sudo systemctl restart docker
docker network ls
```

## Безопасность

### Q: Как сканировать уязвимости?

```
docker scan my-image
```

### Q: Запускать от root?

Нет, создайте не-root пользователя:

```
FROM node:18-alpine
RUN addgroup -g 1000 appgroup && \
    adduser -u 1000 -G appgroup -D appuser
USER appuser
```

## Docker vs VM

### Q: В чём разница между Docker и VM?

| Аспект | Docker | VM |
|--------|--------|-----|
| ОС | Общее ядро хоста | Отдельная ОС |
| Размер | МБ | ГБ |
| Запуск | Секунды | Минуты |
| Изоляция | Контейнеры | Полная изоляция |

## Ресурсы

- Документация: https://docs.docker.com
- Интерактивные лабы: https://labs.play-with-docker.com
- Сообщество: https://www.docker.com/community
