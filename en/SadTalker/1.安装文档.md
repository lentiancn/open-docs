# SadTalker Installation Guide

SadTalker is an AI project for generating realistic talking head videos from a single image and audio input.

## System Requirements

### Hardware
- **GPU**: NVIDIA GPU with 8GB+ VRAM (recommended 16GB)
- **RAM**: 16GB+ system RAM
- **Storage**: 30GB+ free space

### Software
- **OS**: Ubuntu 20.04/22.04, Windows 10/11, macOS
- **Python**: 3.8 - 3.10
- **CUDA**: 11.7+ (for GPU acceleration)
- **cuDNN**: 8.5+

## Install on Linux/Ubuntu

### 1. Install Dependencies

```bash
# Update system
sudo apt update && sudo apt upgrade

# Install Python and dependencies
sudo apt install python3.10 python3-pip python3-venv

# Install system dependencies
sudo apt install libgl1-mesa-glx libglib2.0-0 libsm6 libxext6 libxrender-dev

# Install ffmpeg
sudo apt install ffmpeg
```

### 2. Clone Repository

```bash
git clone https://github.com/OpenTalker/SadTalker.git
cd SadTalker
```

### 3. Create Virtual Environment

```bash
python3 -m venv venv
source venv/bin/activate
```

### 4. Install Python Dependencies

```bash
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu117
pip install -r requirements.txt
```

### 5. Download Models

Models will be downloaded automatically on first run, or manually:

```bash
# Download checkpoint files
mkdir -p checkpoints
# Download from release page or use provided scripts
bash scripts/download_models.sh
```

## Install on Windows

### 1. Install Python

Download Python 3.10 from python.org and install.

### 2. Install CUDA

Download and install CUDA 11.7+ from NVIDIA website.

### 3. Clone and Setup

```bash
git clone https://github.com/OpenTalker/SadTalker.git
cd SadTalker

python -m venv venv
venv\Scripts\activate

pip install torch torchvision --index-url https://download.pytorch.org/whl/cu117
pip install -r requirements.txt
```

### 4. Download Models

Download models from the release page and place in `checkpoints/` folder.

## Install on macOS

### 1. Install Dependencies

```bash
# Install Homebrew if not installed
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Install Python and ffmpeg
brew install python@3.10 ffmpeg
```

### 2. Clone and Setup

```bash
git clone https://github.com/OpenTalker/SadTalker.git
cd SadTalker

python3 -m venv venv
source venv/bin/activate

pip install torch torchvision
pip install -r requirements.txt
```

Note: macOS uses CPU-only mode, GPU acceleration not available.

## Docker Installation

### Using Docker

```bash
# Pull image
docker pull ghcr.io/opentalker/sadtalker:latest

# Run
docker run --gpus all -v /path/to/data:/data ghcr.io/opentalker/sadtalker:latest
```

### Using Docker Compose

```yaml
version: '3.8'
services:
  sadtalker:
    image: ghcr.io/opentalker/sadtalker:latest
    volumes:
      - ./data:/data
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]
```

## Verify Installation

```bash
# Test inference
python inference.py --help
```

## Common Issues

### CUDA Out of Memory
- Reduce batch size
- Use lower resolution
- Enable model optimization

### Missing DLL Errors (Windows)
- Install Visual C++ Redistributable
- Ensure CUDA paths are set correctly

### Model Download Failures
- Use VPN or proxy
- Download manually from release page

## Related Links

- [GitHub Repository](https://github.com/OpenTalker/SadTalker)
- [HuggingFace Demo](https://huggingface.co/spaces/fffilo/SadTalker)
- [Paper](https://arxiv.org/abs/2303.17550)
