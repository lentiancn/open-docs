# Vite インストールガイド

Viteは次世代のフロントエンドビルドツールです。このガイドでは、すべての環境でのインストール方法を説明します。

## バージョン情報

| バージョン | 状態 | 説明 |
|------------|------|------|
| Vite 5.x | ✅ 現行 | 最新安定版 |
| Vite 4.x | ✅ サポート | 安定版 |
| Vite 3.x | ⚠️ メンテナンス | セキュリティ更新 |
| Vite 2.x | ❌ 旧版 | 新規プロジェクトには非推奨 |

> **重要**：このガイドは**Vite 5.x**を対象としています。新規プロジェクトでは最新バージョンを使用することをお勧めします。

## 前提条件

### システム要件

| 要件 | バージョン |
|------|------------|
| Node.js | 18.0.0+ |
| npm | 8.0.0+ |

### ブラウザサポート

| ブラウザ | バージョン |
|----------|------------|
| Chrome | 80+ |
| Firefox | 80+ |
| Safari | 14+ |
| Edge | 80+ |

## インストール方法

### 方法1：npmでプロジェクトを作成（推奨）

```bash
# Vueプロジェクトを作成
npm create vite@latest my-vue-app -- --template vue

# Reactプロジェクトを作成
npm create vite@latest my-react-app -- --template react

# Vanilla JSプロジェクトを作成
npm create vite@latest my-vanilla-app -- --template vanilla

# Svelteプロジェクトを作成
npm create vite@latest my-svelte-app -- --template svelte

# Preactプロジェクトを作成
npm create vite@latest my-preact-app -- --template preact
```

### 方法2：グローバルインストール

```bash
# Viteをインストール
npm install -g create-vite

# プロジェクトを作成
create-vite my-app --template vue
```

### 方法3：yarnを使用

```bash
# Vueプロジェクトを作成
yarn create vite my-vue-app --template vue

# Reactプロジェクトを作成
yarn create vite my-react-app --template react
```

### 方法4：pnpmを使用

```bash
# Vueプロジェクトを作成
pnpm create vite my-vue-app --template vue
```

### 方法5：手動作成

```bash
# プロジェクトディレクトリを作成
mkdir my-vite-project
cd my-vite-project

# npmを初期化
npm init -y

# Viteをインストール
npm install vite --save-dev

# Vueをインストール
npm install vue
```

## プロジェクト構造

```
my-vite-project/
├── public/
│   └── favicon.ico
├── src/
│   ├── main.js
│   ├── App.vue
│   └── style.css
├── index.html
├── package.json
└── vite.config.js
```

## 設定ファイル

### vite.config.js

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  server: {
    port: 3000,
    open: true,
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
})
```

### 環境変数

```
# .env
VITE_APP_TITLE=My App
VITE_API_URL=https://api.example.com
```

### 本番環境設定

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
  build: {
    outDir: 'dist',
    sourcemap: false,
    minify: 'terser',
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router'],
        },
      },
    },
  },
})
```

## 開発コマンド

### 一般的なコマンド

```bash
# 開発サーバーを起動
npm run dev

# 本番ビルドを実行
npm run build

# 本番ビルドをプレビュー
npm run preview

# テストを実行
npm run test

# 型チェックを実行
npm run typecheck
```

### package.jsonスクリプト

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "test": "vitest",
    "typecheck": "vue-tsc --noEmit"
  }
}
```

## プラグイン設定

### Vueプラグイン

```bash
npm install @vitejs/plugin-vue
```

```javascript
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
})
```

### Reactプラグイン

```bash
npm install @vitejs/plugin-react
```

```javascript
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
})
```

### 画像処理

```bash
npm install -D vite-plugin-imagemin
```

```javascript
import viteImagemin from 'vite-plugin-imagemin'

export default defineConfig({
  plugins: [
    viteImagemin({
      pngquant: [10],
      jpegoptim: true,
    }),
  ],
})
```

## スタイル設定

### CSS

```javascript
export default defineConfig({
  css: {
    preprocessorOptions: {
      css: {
        charset: false,
      },
    },
  },
})
```

### Sass

```bash
npm install -D sass
```

```javascript
export default defineConfig({
  css: {
    preprocessorOptions: {
      scss: {
        additionalData: `@import "@/styles/variables.scss";`,
      },
    },
  },
})
```

### PostCSS

```bash
npm install -D autoprefixer postcss
```

```javascript
// postcss.config.js
export default {
  plugins: {
    autoprefixer: {},
  },
}
```

## プロキシ設定

```javascript
export default defineConfig({
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ''),
      },
    },
  },
})
```

## パフォーマンス最適化

### コード分割

```javascript
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['vue', 'vue-router', 'pinia'],
        },
      },
    },
  },
})
```

### 圧縮

```bash
npm install -D terser
```

```javascript
export default defineConfig({
  build: {
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
      },
    },
  },
})
```

### アセットインライン化

```javascript
export default defineConfig({
  build: {
    assetsInlineLimit: 4096,
  },
})
```

## よくある質問

### ビルドが失敗する場合は？

すべての依存関係がインストールされていることを確認してください：

```bash
npm install
```

### ホットリロードが動作しない場合は？

devServer設定を確認してください：

```javascript
export default defineConfig({
  server: {
    hmr: true,
  },
})
```

### パスエイリアスが必要な場合は？

resolve.aliasを設定してください：

```javascript
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

## 関連リンク

- [Vite 公式ドキュメント](https://vitejs.dev/)
- [Vite 日本語ドキュメント](https://ja.vitejs.dev/)
- [Awesome Vite](https://github.com/vitejs/awesome-vite)
