# Руководство пользователя JMeter

В этом руководстве описано, как использовать JMeter для нагрузочного тестирования.

## Быстрый старт

### Создание тестового плана

1. Откройте JMeter
2. Создайте тестовый план
3. Добавьте группу потоков
4. Добавьте сэмплер
5. Добавьте слушатель
6. Запустите тест

## Группы потоков

### Настройка группы потоков

```
Количество потоков：10
 Время разгона：5 секунд
 Количество циклов：1
```

### Свойства потоков

- Количество потоков: количество одновременных пользователей
- Время разгона: время запуска
- Количество циклов: количество выполнений на пользователя

## Сэмплеры

### HTTP-запрос

```
Протокол：http
Имя сервера：www.example.com
Путь：/api/users
Метод：GET
```

### Параметры

- Параметры запроса
- Параметры POST/GET
- Загрузка файлов

## Слушатели

### Просмотр дерева результатов

```markdown
- Просмотр запросов и ответов
- Отладка тестовых скриптов
```

### агрегированный отчет

```markdown
- Среднее время отклика
- Медиана
- 90-й процентиль
- Пропускная способность
```

### Графические результаты

```markdown
- Визуализация времени отклика
- Мониторинг в реальном времени
```

## Контроллеры

### Логические контроллеры

- Контроллер If
- Контроллер цикла
- Контроллер случайного выбора
- Транзакционный контроллер

### Использование контроллеров

```bash
# Цикл 5 раз
Loop Controller: 5

# Случайный выбор
Random Controller
```

## Утверждения

### Утверждение ответа

```bash
# Проверить содержимое ответа
Response Assertion
Pattern: "success"

# Проверить код ответа
Response Code: 200
```

### JSON-утверждение

```bash
# Проверить значение JSON
JSON Path: $.status
Expected Value: success
```

## Параметризация

### CSV-файл данных

```bash
# Создать CSV-файл
username,password
user1,pass1
user2,pass2
```

### Конфигурация

```
CSV Data Set Config
Filename: users.csv
Variable Names: username,password
```

### Функции

- __Random
- __time
- __counter

## Корреляция

### Извлечение регулярным выражением

```
Регулярное выражение：token="(.+?)"
Шаблон：$1$
Номер совпадения：1
```

### Извлечение JSON

```
JSON Path: $.data.token
```

## Распределенное тестирование

### Настройка главный/подчиненный

```bash
# Конфигурация подчиненного
remote_hosts=192.168.1.2,192.168.1.3

# Запуск
jmeter -R 192.168.1.2
```

### Выполнение

```bash
# Распределенное выполнение
jmeter -n -t test.jmx -R server1,server2
```

## Выполнение из командной строки

### Основные команды

```bash
# Запустить тест
jmeter -n -t test.jmx -l result.jtl

# Создать отчет
jmeter -g result.jtl -o report
```

### Параметры

```bash
-n Режим без GUI
-t Файл тестового плана
-l Файл результатов
-r Распределенное выполнение
```

## Оптимизация производительности

### 1. Использование утверждений

```bash
# Добавлять только необходимые утверждения
Response Assertion
```

### 2. Оптимизация слушателей

```bash
# Уменьшить количество слушателей в продакшене
# Использовать Simple Data Writer
```

### 3. Прогрев

```bash
# Прогреть перед основным тестом
```

## Генерация отчетов

### HTML-отчет

```bash
jmeter -g result.jtl -o /path/to/report
```

### Панель мониторинга

```bash
# Полный отчет
jmeter -n -t test.jmx -l result.jtl -e -o report
```

## Рекомендации

### 1. Проектирование тестов

```bash
# Реалистично моделировать поведение пользователя
# Параметризировать тестовые данные
```

### 2. Анализ результатов

```bash
# Обращать внимание на время отклика
# Анализировать частоту ошибок
```

## Ресурсы

- [Официальная документация JMeter](https://jmeter.apache.org/usermanual/)
- [Плагины JMeter](https://jmeter-plugins.org/)
