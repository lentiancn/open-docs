# Руководство по использованию FantasyTalking

В этом руководстве описано, как использовать FantasyTalking для создания видео talking head.

## Быстрый старт

### Основное использование

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4
```

## Требования к входным данным

### Требования к изображению

- Формат: JPG, PNG
- Разрешение: 512x512 или выше
- Лицо: Фронтальное положение, чёткие черты
- Фон: Предпочтительно простой фон

### Требования к аудио

- Формат: WAV, MP3
- Частота дискретизации: 16000 Hz или выше
- Длительность: Без ограничений
- Язык: Многоязычная поддержка

## Расширенное использование

### Улучшение лица

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4 \
  --face_enhancer
```

### Пакетная обработка

```bash
python batch_inference.py \
  --image_dir images/ \
  --audio_dir audio/ \
  --output_dir results/
```

### Пользовательская частота кадров

```bash
python inference.py \
  --source_image images/face.jpg \
  --audio audio/speech.wav \
  --output results/output.mp4 \
  --fps 30
```

## Настройка

### Файл конфигурации

Отредактируйте `config.yaml`:

```yaml
inference:
  face_enhancer: true
  fps: 25
  output_resolution: 512
  
model:
  checkpoint: "checkpoints/fantasytalking.pth"
```

## Обучение модели

### Подготовка набора данных

```bash
python prepare_dataset.py \
  --video_dir videos/ \
  --output_dir dataset/
```

### Обучение

```bash
python train.py \
  --config config/train.yaml \
  --epochs 100
```

## Рекомендации

### 1. Используйте высококачественные изображения

- Используйте чёткие фронтальные фотографии
- Хорошие условия освещения
- Предпочтительно высокое разрешение

### 2. Соответствующее качество аудио

- Чистое аудио без фоновых шумов
- Правильная частота дискретизации
- Соответствие языка этничности лица

### 3. Постобработка

- Используйте улучшение лица для лучшего качества
- Настраивайте частоту кадров по необходимости

## Устранение неполадок

### Видео слишком тёмное?

Проверьте освещение на исходном изображении.

### Аудио не синхронизировано?

Убедитесь, что частотизации аудита дискрео правильная.

### Низкое качество?

Попробуйте опцию улучшения лица.

## Ресурсы

- [GitHub](https://github.com/FantasyTalking/FantasyTalking)
- [Демо](https://fantasytalking.demo.com)
