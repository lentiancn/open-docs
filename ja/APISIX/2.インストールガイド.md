# APISIX インストールガイド

APISIX の複数のインストール方法。

## 環境要件

### ハードウェア要件

- CPU: 2 コア以上
- メモリ: 4GB 以上
- ディスク: 40GB 以上

### ソフトウェア要件

- OS: Linux（Ubuntu 20.04+、CentOS 7+ を推奨）
- Nginx または OpenResty
- Lua 5.1+
- etcd 3.4+

## Docker インストール（推奨）

### クイックスタート

```bash
# etcd を起動
docker run -d --name etcd \
  -p 2379:2379 \
  apache/apisix:latest etcd

# APISIX を起動
docker run -d --name apisix \
  -p 9080:9080 \
  -p 9090:9090 \
  apache/apisix:latest
```

### docker-compose

```yaml
version: '3'
services:
  etcd:
    image: apache/apisix:3.5.0-etcd
    ports:
      - "2379:2379"
  apisix:
    image: apache/apisix:3.5.0
    ports:
      - "9080:9080"
    depends_on:
      - etcd
```

```bash
docker-compose up -d
```

## Helm インストール（Kubernetes）

```bash
helm repo add apisix https://apache.github.io/apisix-helm-chart
helm install apisix apisix/apisix
```

## ソースインストール

### 依存関係のインストール

**Ubuntu/Debian:**

```bash
wget -qO - https://openresty.org/package/pubkey.gpg | sudo apt-key add -
sudo apt-get update
sudo apt-get install -y openresty etcd
```

### ソースをクローン

```bash
git clone https://github.com/apache/apisix.git
cd apisix
git checkout 3.5.0
```

### 依存関係をインストール

```bash
make deps
make init
```

### サービスを起動

```bash
make run
```

## 設定

### メイン設定ファイル

```yaml
apisix:
  node_listen: 9080
  enable_admin: true
  admin_key:
    - name: admin
      key: 123456

etcd:
  host:
    - "http://127.0.0.1:2379"
```

## よくある問題

### ポートが既に使用されている

```bash
netstat -tlnp | grep 9080
```

### etcd 接続エラー

```bash
etcdctl endpoint health
```

## アンインストール

```bash
docker stop apisix etcd
docker rm apisix etcd
```

## 次のステップ

- 最初のルートを構成: 「ユーザーマニュアル」を参照
- 認証プラグインを構成
