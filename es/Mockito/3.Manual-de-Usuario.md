# Mockito Manual de Usuario

Guía detallada sobre cómo usar Mockito.

## Básicos

### Crear Mocks

```java
// Mock de una interfaz
List<String> mockList = mock(List.class);

// Mock de una clase
MyService myService = mock(MyService.class);
```

### Stubbing

```java
// Stubbing simple
when(mockList.get(0)).thenReturn("first");
when(mockList.size()).thenReturn(10);

// Lanzar excepción
when(mockList.get(0)).thenThrow(new IndexOutOfBoundsException());

// Múltiples valores de retorno
when(mockList.get(anyInt()))
    .thenReturn("first")
    .thenReturn("second");
```

### Verificación

```java
// Verificar que se llamó un método
verify(mockList).add("one");

// Verificar número de llamadas
verify(mockList, times(1)).add("one");
verify(mockList, never()).clear();
verify(mockList, atLeastOnce()).add("one");
```

## Conceptos Avanzados

### Argument Matchers

```java
// Cualquier argumento
when(mockList.get(anyInt())).thenReturn("element");

// Matchers específicos
when(mockList.contains(argThat(s -> s.startsWith("test")))).thenReturn(true);
```

### Spy

```java
List<String> spyList = spy(new ArrayList<>());

// Comportamiento parcial real
doReturn("real").when(spyList).get(0);
```

## Mejores Prácticas

1. **Mock de interfaces** - Siempre haga mock de interfaces, no de clases concretas
2. **Sin objetos reales** - No convierta objetos reales en mocks
3. **Nombrado** - Use nombres significativos para los mocks
4. **Verificación** - Use verificación solo cuando sea necesario

## Casos Comunes

### Mock de Base de Datos

```java
@Mock
private UserRepository userRepository;

@Test
void testUserCreation() {
    User user = new User("test@test.com");
    when(userRepository.save(any(User.class))).thenReturn(user);
    
    User result = userService.createUser("test@test.com");
    
    assertNotNull(result);
    verify(userRepository).save(any(User.class));
}
```

## Recursos

- Sitio Web: https://site.mockito.org
- GitHub: https://github.com/mockito/mockito

## Licencia

MIT License
