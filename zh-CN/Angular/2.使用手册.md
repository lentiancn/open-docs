# Angular 使用手册

本手册详细介绍 Angular 的核心概念和使用方法。

---

## 目录

1. [组件](#组件)
2. [模板](#模板)
3. [服务](#服务)
4. [路由](#路由)
5. [表单](#表单)
6. [HTTP](#http)
7. [状态管理](#状态管理)

---

## 组件

### 创建组件

```bash
ng generate component my-component
# 或
ng g c my-component
```

### 组件示例

```typescript
import { Component, Input, Output, EventEmitter } from '@angular/core';

@Component({
  selector: 'app-user-card',
  templateUrl: './user-card.component.html',
  styleUrls: ['./user-card.component.css']
})
export class UserCardComponent {
  @Input() user: any;
  @Output() delete = new EventEmitter<number>();

  onDelete() {
    if (this.user) {
      this.delete.emit(this.user.id);
    }
  }
}
```

### 生命周期钩子

```typescript
ngOnInit() { }
ngOnDestroy() { }
ngAfterViewInit() { }
```

### 独立组件

```typescript
@Component({
  selector: 'app-standalone',
  standalone: true,
  imports: [CommonModule],
  template: `<h1>{{ title }}</h1>`
})
export class StandaloneComponent { }
```

---

## 模板

### 插值

```html
<h1>Hello, {{ name }}!</h1>
```

### 属性绑定

```html
<img [src]="imageUrl">
<button [class.active]="isActive">Click</button>
```

### 事件绑定

```html
<button (click)="onClick()">Click</button>
<input (input)="onInput($event)">
```

### 双向绑定

```html
<input [(ngModel)]="username">
```

### 指令

```html
<div *ngIf="isLoggedIn">Welcome!</div>
<li *ngFor="let user of users">{{ user.name }}</li>
```

### 管道

```html
<p>{{ name | uppercase }}</p>
<p>{{ price | currency:'USD' }}</p>
<p>{{ date | date:'fullDate' }}</p>
```

---

## 服务

### 创建服务

```bash
ng generate service user
# 或
ng g s user
```

### 服务示例

```typescript
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

@Injectable({ providedIn: 'root' })
export class UserService {
  constructor(private http: HttpClient) {}

  getUsers(): Observable<any[]> {
    return this.http.get<any[]>('https://api.example.com/users');
  }
}
```

---

## 路由

### 配置路由

```typescript
import { Routes } from '@angular/router';

export const routes: Routes = [
  { path: '', redirectTo: '/home', pathMatch: 'full' },
  { path: 'home', loadComponent: () => import('./home/home.component').then(m => m.HomeComponent) },
  { path: '**', loadComponent: () => import('./not-found/not-found.component').then(m => m.NotFoundComponent) }
];
```

### 路由参数

```typescript
constructor(private route: ActivatedRoute) {}

ngOnInit() {
  this.route.paramMap.subscribe(params => {
    const id = params.get('id');
  });
}
```

### 路由守卫

```typescript
@Injectable({ providedIn: 'root' })
export class AuthGuard implements CanActivate {
  canActivate(): boolean {
    return true;
  }
}
```

---

## 表单

### 模板驱动表单

```html
<form #form="ngForm" (ngSubmit)="onSubmit(form)">
  <input [(ngModel)]="user.email" name="email" required>
  <button type="submit" [disabled]="form.invalid">Submit</button>
</form>
```

### 响应式表单

```typescript
this.form = this.fb.group({
  username: ['', Validators.required],
  email: ['', [Validators.required, Validators.email]],
  password: ['', [Validators.required, Validators.minLength(8)]]
});
```

```html
<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <input formControlName="username">
  <button type="submit" [disabled]="form.invalid">Submit</button>
</form>
```

---

## HTTP

### 配置

```typescript
export const appConfig: ApplicationConfig = {
  providers: [provideHttpClient()]
};
```

### 请求

```typescript
this.http.get('/api/users').subscribe(data => console.log(data));
this.http.post('/api/users', data).subscribe();
this.http.put('/api/users/1', data).subscribe();
this.http.delete('/api/users/1').subscribe();
```

---

## 状态管理

### 使用信号 (Angular 16+)

```typescript
count = signal(0);
doubled = computed(() => this.count() * 2);

increment() {
  this.count.update(c => c + 1);
}
```

### 使用 BehaviorSubject

```typescript
private data$ = new BehaviorSubject<any[]>([]);

getData() {
  return this.data$.asObservable();
}

updateData(data: any[]) {
  this.data$.next(data);
}
```

---

## 相关资源

- 官方文档：https://angular.io/docs
- CLI 参考：https://angular.io/cli

---

*最后更新：2024*
