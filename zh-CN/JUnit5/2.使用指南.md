# JUnit 5 使用指南

高效使用 JUnit 5 的完整指南。

---

## 基础测试

### 简单测试类

```java
import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

class CalculatorTest {

    @Test
    void testAdd() {
        Calculator calc = new Calculator();
        assertEquals(5, calc.add(2, 3));
    }
}
```

---

## 注解

### @Test

```java
@Test
void testMethod() {
    // 测试代码
}
```

### @BeforeEach

```java
@BeforeEach
void setUp() {
    // 每个测试方法之前运行
}
```

### @AfterEach

```java
@AfterEach
void tearDown() {
    // 每个测试方法之后运行
}
```

### @Disabled

```java
@Disabled("暂未实现")
@Test
void testPending() {
    // 会被跳过
}
```

### @DisplayName

```java
@DisplayName("自定义测试名")
@Test
void testWithCustomName() {
    // 自定义显示名称的测试
}
```

---

## 断言

### assertEquals

```java
assertEquals(expected, actual);
```

### assertTrue / assertFalse

```java
assertTrue(condition);
assertFalse(condition);
```

### assertNull / assertNotNull

```java
assertNull(object);
assertNotNull(object);
```

### assertThrows

```java
assertThrows(ArithmeticException.class, () -> {
    int x = 1 / 0;
});
```

### assertAll

```java
assertAll("组名",
    () -> assertEquals(4, 2 + 2),
    () -> assertEquals("test", "test".toLowerCase())
);
```

---

## 嵌套测试

```java
@Nested
@DisplayName("加法测试")
class AdditionTests {

    @Test
    void testPositiveNumbers() {
        assertEquals(5, 2 + 3);
    }
}
```

---

## 参数化测试

```java
@ParameterizedTest
@ValueSource(ints = { 1, 2, 3, 4, 5 })
void testWithValueSource(int number) {
    assertTrue(number > 0);
}
```

### CSV 数据源

```java
@ParameterizedTest
@CsvSource({ "1, 1", "2, 2", "3, 3" })
void testWithCsvSource(int input, int expected) {
    assertEquals(expected, input);
}
```

---

## 最佳实践

1. **每个方法测试一件事** - 每个测试应验证一个行为
2. **使用描述性名称** - @DisplayName 提供更好的可读性
3. **遵循 AAA 模式** - Arrange, Act, Assert
4. **保持测试独立** - 测试之间不应相互依赖
5. **使用嵌套测试** - 将相关测试分组

---

## 下一步

- 探索 [JUnit 5 文档](https://junit.org/junit5/)
