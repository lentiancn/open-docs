# Go 使用手册

> Go 语言核心语法和常用功能

---

## 基础语法

### Hello World

```go
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
```

### 变量声明

```go
// 显式声明
var name string = "Tom"

// 类型推断
var age = 18

// 短声明
city := "Beijing"

// 常量
const Pi = 3.14159
```

### 数据类型

| 类型 | 说明 |
|------|------|
| int, int8, int16, int32, int64 | 整数 |
| uint, uint8, uint16, uint32, uint64 | 无符号整数 |
| float32, float64 | 浮点数 |
| string | 字符串 |
| bool | 布尔值 |
| byte | uint8 的别名 |
| rune | int32 的别名（Unicode） |

---

## 控制流

### 条件判断

```go
if age >= 18 {
    fmt.Println("成年人")
} else {
    fmt.Println("未成年人")
}

// switch
switch day {
case 1:
    fmt.Println("周一")
case 2:
    fmt.Println("周二")
default:
    fmt.Println("其他")
}
```

### 循环

```go
// 无限循环
for {
    // ...
}

// 条件循环
for i := 0; i < 10; i++ {
    fmt.Println(i)
}

// range 遍历
nums := []int{1, 2, 3}
for index, value := range nums {
    fmt.Println(index, value)
}
```

---

## 函数

### 基础函数

```go
func add(a, b int) int {
    return a + b
}

// 多返回值
func divide(a, b int) (int, error) {
    if b == 0 {
        return 0, errors.New("除数不能为零")
    }
    return a / b, nil
}
```

### 变参函数

```go
func sum(nums ...int) int {
    total := 0
    for _, n := range nums {
        total += n
    }
    return total
}
```

---

## 数据结构

### 数组和切片

```go
// 数组（固定长度）
arr := [5]int{1, 2, 3, 4, 5}

// 切片（动态数组）
slice := []int{1, 2, 3}
slice = append(slice, 4)

// 切片操作
sub := slice[1:3]  // 子切片
copy := make([]int, len(slice))
copy(slice, copy)
```

### Map

```go
// 声明和初始化
m := make(map[string]int)
m["age"] = 18
m["score"] = 100

// 遍历
for key, value := range m {
    fmt.Println(key, value)
}

// 删除
delete(m, "age")
```

### 结构体

```go
type Person struct {
    Name string
    Age  int
}

p := Person{Name: "Tom", Age: 18}
fmt.Println(p.Name)
```

---

## 并发编程

### Goroutine

```go
func say(s string) {
    for i := 0; i < 3; i++ {
        fmt.Println(s)
    }
}

func main() {
    go say("Hello")
    say("World")
    time.Sleep(time.Second)
}
```

### Channel

```go
func main() {
    ch := make(chan string)

    go func() {
        ch <- "message"
    }()

    msg := <-ch
    fmt.Println(msg)
}
```

### 并发控制

```go
import "sync"

func main() {
    var wg sync.WaitGroup
    wg.Add(2)

    go func() {
        defer wg.Done()
        // 工作 1
    }()

    go func() {
        defer wg.Done()
        // 工作 2
    }()

    wg.Wait()
}
```

---

## 错误处理

### 基础错误

```go
import "errors"

func divide(a, b int) (int, error) {
    if b == 0 {
        return 0, errors.New("除数不能为零")
    }
    return a / b, nil
}

result, err := divide(10, 0)
if err != nil {
    fmt.Println("错误:", err)
}
```

### 自定义错误

```go
type DivideError struct {
    a, b int
}

func (e *DivideError) Error() string {
    return fmt.Sprintf("不能除以零: %d / %d", e.a, e.b)
}
```

---

## 包管理

### 初始化模块

```bash
go mod init github.com/username/project
```

### 下载依赖

```bash
go mod tidy
```

### 构建和运行

```bash
# 构建
go build -o app

# 运行
go run main.go

# 测试
go test ./...
```

---

## 常用标准库

| 包 | 说明 |
|----|------|
| fmt | 格式化 I/O |
| os | 操作系统功能 |
| io | I/O 原语 |
| net/http | HTTP 客户端和服务端 |
| encoding/json | JSON 编码/解码 |
| time | 时间处理 |
| strings | 字符串操作 |
| sync | 同步原语 |

---

## 相关资源

- Go 标准库：https://pkg.go.dev/
- Go 语言教程：https://go.dev/doc/
- Go by Example：https://gobyexample.com/
