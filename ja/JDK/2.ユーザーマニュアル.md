# JDK ユーザーマニュアル

本ガイドでは、JDKを使用したJava開発の方法について説明します。

## クイックスタート

### コンパイルと実行

```bash
# コンパイル
javac HelloWorld.java

# 実行
java HelloWorld
```

### 単一ファイル実行（JDK 11+）

```bash
# 直接実行
java HelloWorld.java
```

## 基本コマンド

### javac - Javaコンパイラー

```bash
# 単一ファイルをコンパイル
javac MyClass.java

# 複数のファイルをコンパイル
javac *.java

# 特定のエンコーディングでコンパイル
javac -encoding UTF-8 MyClass.java

# 特定のディレクトリにコンパイル
javac -d bin MyClass.java

# すべての警告を表示
javac -Xlint MyClass.java
```

### java - Javaランチャー

```bash
# クラスを実行
java MyClass

# 引数を付けて実行
java MyClass arg1 arg2

# クラスパスを設定
java -classpath "lib/*:." MyClass

# メモリを設定
java -Xmx2g -Xms512m MyClass
```

### jar - Javaアーカイブツール

```bash
# JARを作成
jar cf myapp.jar -C bin .

# マニフェスト付きでJARを作成
jar cfm myapp.jar manifest.txt -C bin .

# JARを展開
jar xf myapp.jar

# JARの内容を表示
jar tf myapp.jar
```

### javadoc - ドキュメントジェネレーター

```bash
# ドキュメントを生成
javadoc -d docs -sourcepath src *.java

# カスタムタイトルでドキュメントを生成
javadoc -d docs -header "My App" *.java
```

### jdb - Javaデバッガー

```bash
# デバッガーを起動
jdb MyClass

# ブレークポイントを設定
stop at MyClass:10

# 実行
run

# ステップ実行
next
step
```

## JVMオプション

### メモリオプション

```bash
# ヒープサイズ
-Xmx2g        # 最大ヒープ
-Xms512m      # 初期ヒープ
-Xss256k      # スタックサイズ

# ガベージコレクション
-XX:+UseG1GC  # G1ガベージコレクタ
-XX:+UseParallelGC # パラレルGC
```

### パフォーマンスオプション

```bash
# JITコンパイラー
-XX:+TieredCompilation

# クラデータ共有
-Xshare:on

# 文字列重複排除
-XX:+UseStringDeduplication
```

## IDE統合

### IntelliJ IDEA

1. File → Project Structure → SDKs
2. JDKインストールパスを追加
3. Project SDKを設定

### VS Code

1. "Extension Pack for Java"をインストール
2. 設定でJAVA_HOMEを構成

### Eclipse

1. Window → Preferences → Java → Installed JREs
2. Standard VMを追加
3. デフォルトに設定

## ビルドツール

### Maven

```xml
<properties>
    <maven.compiler.source>21</maven.compiler.source>
    <maven.compiler.target>21</maven.compiler.target>
</properties>
```

### Gradle

```groovy
sourceCompatibility = '21'
targetCompatibility = '21'
```

## モジュール（Java 9+）

### モジュールのリスト

```bash
java --list-modules
```

### モジュールオプション

```bash
# パッケージをエクスポート
--export-module java.base/java.lang

# モジュールを開く
--open-module java.base
```

## セキュリティ

### Keytool

```bash
# 鍵ペアを生成
keytool -genkeypair -alias mykey -keyalg RSA -keystore keystore.jks

# 証明書をリスト
keytool -list -keystore keystore.jks

# 証明書をエクスポート
keytool -export -alias mykey -file cert.crt -keystore keystore.jks
```

## プロファイリング

### jcmd

```bash
# 実行中のJavaプロセスをリスト
jcmd

# プロセス情報を取得
jcmd <pid> VM.flags

# GCをトリガー
jcmd <pid> GC.run
```

### jvisualvm

```bash
# ビジュアルVMを起動
jvisualvm
```

## ベストプラクティス

### 1. 本番環境ではLTSを使用

```bash
# 推奨：本番環境ではJDK 17または21を使用
```

### 2. 適切なメモリを設定

```bash
# Webアプリケーションの場合
java -Xmx4g -Xms2g -XX:+UseG1GC MyApp
```

### 3. GCログを有効化

```bash
# GCログを有効化
-Xlog:gc*:file=gc.log:time,uptime,level,tags
```

## 関連リソース

- [Oracle Java ドキュメント](https://docs.oracle.com/en/java/)
- [JDK API ドキュメント](https://docs.oracle.com/en/java/javase/21/docs/api/)
