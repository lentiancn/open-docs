# Angular 安装指南

Angular 是一个由 Google 维护的现代 Web 应用框架。本指南涵盖在所有环境中的安装方法。

## 版本信息

| 版本 | 状态 | 说明 |
|------|------|------|
| Angular 17+ | ✅ 当前 | 最新版本，包含所有新功能 |
| Angular 16 | ✅ 支持 | 稳定版本 |
| Angular 14-15 | ⚠️ 维护 | 安全更新 |
| Angular 2-13 | ❌ 旧版 | 不建议新项目使用 |

> **重要提示**：本指南主要针对 **Angular 17+**。建议新项目使用最新版本以获得最佳性能和最新功能。

## 前提条件

### 系统要求

| 要求 | 版本 |
|------|------|
| Node.js | 18.10.0+ |
| npm | 9.0.0+ |
| TypeScript | 5.2+ |

### 浏览器支持

| 浏览器 | 版本 |
|--------|------|
| Chrome | 90+ |
| Firefox | 90+ |
| Safari | 14+ |
| Edge | 90+ |

## 安装方法

### 方法一：使用 Angular CLI（推荐）

Angular CLI 是官方推荐的创建和管理 Angular 项目的方式。

```bash
# 安装 Angular CLI
npm install -g @angular/cli

# 创建新项目
ng new my-app

# 进入项目目录
cd my-app

# 启动开发服务器
ng serve
```

#### 创建项目选项

```bash
# 创建带有路由的项目
ng new my-app --routing

# 创建带有 SCSS 的项目
ng new my-app --style=scss

# 创建带有 SSR 的项目
ng new my-app --ssr

# 跳过安装依赖
ng new my-app --skip-install
```

### 方法二：手动创建项目

```bash
# 初始化 npm 项目
npm init -y

# 安装 Angular 核心依赖
npm install @angular/core@17 @angular/common@17 @angular/compiler@17

# 安装 Angular 平台相关
npm install @angular/platform-browser@17 @angular/platform-browser-dynamic@17

# 安装 Angular 编译器
npm install @angular/compiler-cli@17 typescript@~5.2.0 zone.js@~0.14.0
```

### 方法三：使用 Vite

```bash
# 使用 Vite 创建 Angular 项目
npm create vite@latest my-angular-app -- --template angular

# 进入项目目录
cd my-angular-app

# 安装依赖
npm install
```

### 方法四：使用 Nx 工作区

Nx 是一个强大的单体仓库工具，适合大型企业项目。

```bash
# 安装 Nx
npm install -g nx

# 创建 Angular 应用
npx create-nx-workspace my-org --preset=angular

# 添加 Angular 应用
nx g @nx/angular:app my-app
```

## 项目结构

```
my-angular-app/
├── src/
│   ├── app/
│   │   ├── app.component.ts
│   │   ├── app.component.html
│   │   ├── app.component.css
│   │   └── app.config.ts
│   ├── main.ts
│   ├── index.html
│   └── styles.css
├── angular.json
├── package.json
├── tsconfig.json
└── node_modules/
```

## 开发命令

### 常用命令

```bash
# 启动开发服务器
ng serve

# 构建生产版本
ng build

# 运行测试
ng test

# 运行端到端测试
ng e2e

# 生成组件
ng g c my-component

# 生成服务
ng g s my-service

# 生成模块
ng g m my-module

# 生成路由
ng g m my-module --routing
```

### 开发服务器选项

```bash
# 指定端口
ng serve --port 4200

# 打开浏览器
ng serve --open

# 热模块替换
ng serve --hmr

# 生产构建
ng serve --configuration production
```

## 配置

### tsconfig.json

```json
{
  "compileOnSave": false,
  "compilerOptions": {
    "outDir": "./dist/out-tsc",
    "strict": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "sourceMap": true,
    "declaration": false,
    "experimentalDecorators": true,
    "moduleResolution": "bundler",
    "importHelpers": true,
    "target": "ES2022",
    "module": "ES2022",
    "useDefineForClassFields": false,
    "lib": ["ES2022", "dom"]
  },
  "angularCompilerOptions": {
    "enableI18nLegacyMessageIdFormat": false,
    "strictInjectionParameters": true,
    "strictInputAccessModifiers": true,
    "strictTemplates": true
  }
}
```

### angular.json

```json
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "newProjectRoot": "projects",
  "projects": {
    "my-app": {
      "projectType": "application",
      "root": "",
      "sourceRoot": "src",
      "prefix": "app",
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:application",
          "options": {
            "outputPath": "dist/my-app",
            "index": "src/index.html",
            "browser": "src/main.ts",
            "polyfills": ["zone.js"],
            "tsConfig": "tsconfig.app.json",
            "assets": ["src/favicon.ico", "src/assets"],
            "styles": ["src/styles.css"],
            "scripts": []
          }
        }
      }
    }
  }
}
```

## 依赖管理

### 安装依赖

```bash
# 安装运行时依赖
npm install @angular/animations @angular/common @angular/compiler @angular/core @angular/forms @angular/platform-browser @angular/platform-browser-dynamic @angular/router

# 安装开发依赖
npm install --save-dev @angular-devkit/build-angular @angular/cli @angular/compiler-cli @types/jasmine @types/node typescript jasmine-core jasmine-spec-reporter karma karma-chrome-launcher karma-coverage karma-jasmine karma-jasmine-html-reporter zone.js
```

### 使用 yarn

```bash
# 使用 yarn 安装
yarn install

# 添加依赖
yarn add @angular/core@17

# 添加开发依赖
yarn add --dev @angular/cli@17
```

## 常见问题

### Angular CLI 命令不工作？

确保已全局安装 Angular CLI：

```bash
npm install -g @angular/cli
```

### Node.js 版本不匹配？

使用 nvm 管理 Node.js 版本：

```bash
# 安装 nvm (Windows)
winget install CoreyButler.NVMforWindows

# 使用特定版本
nvm install 18
nvm use 18
```

### 构建失败？

清理缓存并重新安装：

```bash
rm -rf node_modules dist
npm install
```

## 相关链接

- [Angular 官方文档](https://angular.io/)
- [Angular 中文文档](https://angular.cn/)
- [Angular CLI 文档](https://angular.io/cli)
- [Angular Material](https://material.angular.io/)
