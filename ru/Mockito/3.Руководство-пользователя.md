# Mockito Руководство пользователя

Подробное руководство по использованию Mockito.

## Основы

### Создание моков

```java
// Мок интерфейса
List<String> mockList = mock(List.class);

// Мок класса
MyService myService = mock(MyService.class);
```

### Стаббинг

```java
// Простой стаббинг
when(mockList.get(0)).thenReturn("first");
when(mockList.size()).thenReturn(10);

// Выброс исключения
when(mockList.get(0)).thenThrow(new IndexOutOfBoundsException());
```

### Проверка

```java
// Проверить, что метод был вызван
verify(mockList).add("one");

// Проверить количество вызовов
verify(mockList, times(1)).add("one");
verify(mockList, never()).clear();
```

## Продвинутые концепты

### Argument Matchers

```java
// Любой аргумент
when(mockList.get(anyInt())).thenReturn("element");

// Специфичные матчеры
when(mockList.contains(argThat(s -> s.startsWith("test")))).thenReturn(true);
```

### Spy

```java
List<String> spyList = spy(new ArrayList<>());

// Частичное реальное поведение
doReturn("real").when(spyList).get(0);
```

## Лучшие практики

1. **Мокируйте интерфейсы** - Всегда мокируйте интерфейсы, а не конкретные классы
2. **Не используйте реальные объекты** - Не превращайте реальные объекты в моки
3. **Именование** - Используйте осмысленные имена для моков

## Частые сценарии

### Мокирование базы данных

```java
@Mock
private UserRepository userRepository;

@Test
void testUserCreation() {
    User user = new User("test@test.com");
    when(userRepository.save(any(User.class))).thenReturn(user);
    
    User result = userService.createUser("test@test.com");
    
    assertNotNull(result);
    verify(userRepository).save(any(User.class));
}
```

## Ресурсы

- Веб-сайт: https://site.mockito.org
- GitHub: https://github.com/mockito/mockito

## Лицензия

MIT License
