# Nacos FAQ

This page answers frequently asked questions about Nacos.

---

## General Questions

### What is Nacos?

Nacos (Dynamic Naming and Configuration Service) is an open-source platform developed by Alibaba for service discovery and dynamic configuration management. It helps developers build cloud-native applications easily.

### What are the main features of Nacos?

- Service Discovery (DNS-based and RPC-based)
- Configuration Management (centralized, versioned)
- Service Health Checks
- Dynamic DNS Routing
- Service Metadata Management

### What languages does Nacos support?

Nacos provides SDK support for:
- Java
- Go
- Node.js
- Python
- C#
- And more via HTTP API

---

## Installation

### What are the system requirements for Nacos?

- **OS**: Linux/Unix/macOS/Windows
- **JDK**: JDK 1.8+
- **Memory**: Minimum 512MB, recommended 2GB+
- **Disk**: At least 1GB free space
- **Database**: MySQL 5.6+ (for cluster mode)

### How to install Nacos?

**Standalone Mode:**
```bash
wget https://github.com/alibaba/nacos/releases/download/v2.3.0/nacos-server-2.3.0.tar.gz
tar -xvf nacos-server-2.3.0.tar.gz
cd nacos/bin
./startup.sh -m standalone
```

**Docker Mode:**
```bash
docker run --name nacos -d -p 8848:8848 nacos/nacos-server:v2.3.0
```

### How to access Nacos console?

- URL: http://localhost:8848/nacos
- Default username: nacos
- Default password: nacos

---

## Service Discovery

### How to register a service in Nacos?

**Using Java SDK:**
```java
NamingService namingService = NacosFactory.createNamingService("127.0.0.1:8848");
namingService.registerInstance("my-service", "192.168.1.10", 8080);
```

**Using HTTP API:**
```bash
curl -X POST 'http://127.0.0.1:8848/nacos/v1/ns/instance' \
  -d 'serviceName=my-service' \
  -d 'ip=192.168.1.10' \
  -d 'port=8080'
```

### How to discover services in Nacos?

**Using Java SDK:**
```java
List<Instance> instances = namingService.selectInstances("my-service", true);
```

**Using HTTP API:**
```bash
curl 'http://127.0.0.1:8848/nacos/v1/ns/instance/list?serviceName=my-service'
```

### How does Nacos handle service health checks?

Nacos supports multiple health check mechanisms:
- **TCP**: Checks if port is open
- **HTTP**: Checks HTTP endpoint response
- **MySQL**: Checks database connectivity
- **None**: No health check

---

## Configuration Management

### How to create a configuration in Nacos?

**Using Console:**
1. Navigate to Configuration Management
2. Click "Create"
3. Fill in Data ID, Group, and Content

**Using API:**
```bash
curl -X POST 'http://127.0.0.1:8848/nacos/v1/cs/configs' \
  -d 'dataId=app-config' \
  -d 'group=DEFAULT_GROUP' \
  -d 'content=key=value'
```

### How to listen for configuration changes?

```java
configService.addListener("dataId", "group", new Listener() {
    @Override
    public void receiveConfigInfo(String configInfo) {
        // Handle configuration change
    }
});
```

### What is the difference between Data ID and Group?

- **Data ID**: Unique identifier for a configuration file
- **Group**: Used to organize configurations, typically by environment or application

---

## Namespace

### What is a namespace in Nacos?

Namespaces provide logical isolation for configurations and services. Different namespaces can represent different environments (dev, test, prod).

### How to use namespaces?

```bash
# Create namespace
curl -X POST 'http://127.0.0.1:8848/nacos/v1/console/namespaces' \
  -d 'customNamespaceId=dev' \
  -d 'namespaceName=Development'

# Use namespace in request
curl 'http://127.0.0.1:8848/nacos/v1/cs/configs?dataId=app.yml&group=DEFAULT_GROUP&namespaceId=dev'
```

---

## Cluster

### How to set up a Nacos cluster?

1. Prepare multiple Nacos servers
2. Configure `cluster.conf` with all node addresses
3. Use MySQL as the persistent storage
4. Start all nodes with cluster mode

### How many nodes are recommended for a Nacos cluster?

For production:
- Minimum 3 nodes recommended
- Use odd number for majority voting
- All nodes should be in the same data center for best performance

### How to ensure high availability?

1. Deploy Nacos cluster with at least 3 nodes
2. Use load balancer in front of Nacos cluster
3. Enable monitoring and alerting
4. Regular backups of configuration data

---

## Security

### How to enable authentication in Nacos?

In `application.properties`:
```properties
nacos.core.auth.enabled=true
nacos.core.auth.server.identity.key=serverIdentity
nacos.core.auth.server.identity.value=security
```

### How to secure Nacos with SSL?

Configure SSL in `application.properties`:
```properties
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-store-password=password
server.ssl.key-store-type=PKCS12
```

---

## Performance

### How to tune Nacos performance?

1. **JVM Settings**: Adjust heap size based on load
2. **Database**: Use MySQL with proper indexing
3. **Health Check**: Adjust check intervals
4. **Connection Pool**: Configure appropriate pool sizes

### What to do with high memory usage?

1. Increase JVM heap size: `-Xms2g -Xmx2g`
2. Reduce number of monitored configurations
3. Optimize health check frequency
4. Monitor and clean up old instances

---

## Troubleshooting

### Instance not appearing in service list

1. Check if registration was successful
2. Verify network connectivity to Nacos server
3. Check Nacos server logs for errors
4. Verify instance metadata is correct

### Configuration changes not being pushed

1. Verify listener is registered
2. Check client network connectivity
3. Verify group and data ID match
4. Check client logs for errors

### Unable to login to Nacos console

1. Default credentials: nacos/nacos
2. Check if authentication is enabled
3. Reset password if forgotten
4. Check authentication settings in configuration

---

## Migration

### How to migrate from other service discovery systems?

1. Export current service data
2. Import into Nacos using API
3. Update client configurations to point to Nacos
4. Test and verify service discovery

### How to backup Nacos data?

```bash
# Export configurations
curl 'http://127.0.0.1:8848/nacos/v1/cs/configs?search=accurate' > backup.json
```

---

## Resources

- Official Documentation: https://nacos.io/docs/latest/
- GitHub: https://github.com/alibaba/nacos
- Community: https://nacos.io/community/
- Issues: https://github.com/alibaba/nacos/issues
