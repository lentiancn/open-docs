# FantasyTalking 安裝指南

FantasyTalking 是一款由 AI 驅動的 talking head 生成工具，可根據單張圖片和音頻輸入生成逼真的 talking head 影片。

## 版本資訊

| 版本 | 狀態 | 描述 |
|---------|--------|-------------|
| FantasyTalking v1.0 | ✅ 當前版本 | 初始發布 |

## 系統需求

### 硬體需求

| 需求 | 最低配置 | 推薦配置 |
|-------------|---------|-------------|
| GPU | NVIDIA 4GB VRAM | NVIDIA 8GB+ VRAM |
| RAM | 8GB | 16GB+ |
| 儲存空間 | 10GB | 20GB+ SSD |

### 軟體需求

| 軟體 | 版本 |
|----------|---------|
| Python | 3.8+ |
| CUDA | 11.0+ |
| cuDNN | 8.0+ |

## 安裝方法

### 方法一：從源碼安裝

#### 1. 克隆倉庫

```bash
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking
```

#### 2. 創建虛擬環境

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# 或
venv\Scripts\activate  # Windows
```

#### 3. 安裝依賴

```bash
pip install torch torchvision
pip install -r requirements.txt
```

#### 4. 下載模型

```bash
# 下載預訓練模型
bash scripts/download_models.sh
```

### 方法二：Docker

```bash
# 拉取鏡像
docker pull fantasytalking/fantasytalking:latest

# 運行
docker run --gpus all -v /path/to/data:/data fantasytalking/fantasytalking:latest
```

## 配置

### 環境變量

```bash
export CUDA_VISIBLE_DEVICES=0
export PYTHONPATH=/path/to/FantasyTalking:$PYTHONPATH
```

### 模型路徑

編輯 `config.yaml` 來設置模型路徑：

```yaml
model:
  checkpoint_path: "checkpoints/fantasytalking.pth"
  face_parser: "models/face_parser.pth"
```

## 快速開始

### 生成 Talking Head

```bash
python inference.py \
  --source_image path/to/image.jpg \
  --audio path/to/audio.wav \
  --output output.mp4
```

### 參數

```bash
--source_image    # 來源人臉圖片
--audio          # 輸入音頻文件
--output         # 輸出影片路徑
--face enhancer  # 啟用人臉增強
--fps            # 輸出幀率（默認：25）
```

## 常見問題

### GPU 不可用？

檢查 CUDA 安裝：

```bash
nvidia-smi
python -c "import torch; print(torch.cuda.is_available())"
```

### 記憶體不足？

減少批次大小或使用較低分辨率。

## 相關鏈接

- [FantasyTalking GitHub](https://github.com/FantasyTalking/FantasyTalking)
- [論文](https://arxiv.org/abs/)
