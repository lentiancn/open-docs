# Docker Benutzerhandbuch

Dieses Handbuch enthält detaillierte Anweisungen zur grundlegenden Verwendung von Docker, einschließlich Image-Verwaltung, Container-Operationen, Netzwerkkonfiguration, Volumen-Verwaltung und mehr.

---

## Inhaltsverzeichnis

1. [Docker Grundkonzepte](#docker-grundkonzepte)
2. [Image-Operationen](#image-operationen)
3. [Container-Operationen](#container-operationen)
4. [Netzwerkverwaltung](#netzwerkverwaltung)
5. [Volumen-Verwaltung](#volumen-verwaltung)
6. [Docker Compose verwenden](#docker-compose-verwenden)
7. [Dockerfiles schreiben](#dockerfiles-schreiben)
8. [Docker Häufig verwendete Befehle Kurzreferenz](#docker-häufig-verwendete-befehle-kurzreferenz)
9. [Best Practices](#best-practices)
10. [Fehlerbehebung](#fehlerbehebung)

---

## Docker Grundkonzepte

### Was ist ein Container?

Container sind leichtgewichtige, ausführbare eigenständige Pakete, die alles enthalten, was zur Ausführung der Software benötigt wird: Code, Laufzeit, Systemwerkzeuge, Systembibliotheken und Einstellungen. Containerisierung sorgt dafür, dass Software konsistent in jeder Umgebung ausgeführt wird.

### Hauptkomponenten

- **Image**: Schreibgeschützte Vorlage zum Erstellen von Containern
- **Container**: Laufende Instanz eines Images
- **Repository**: Ort zur Speicherung von Images
- **Dockerfile**: Skript zum Erstellen von Images
- **Docker Compose**: Tool zum Definieren und Ausführen von Multi-Container-Anwendungen

---

## Image-Operationen

### Images herunterladen

Images von Docker Hub herunterladen:

```bash
# Neueste Version herunterladen
docker pull nginx

# Bestimmte Version herunterladen
docker pull nginx:1.25
```

### Images auflisten

```bash
# Alle lokalen Images auflisten
docker images
```

### Images entfernen

```bash
# Bestimmtes Image entfernen
docker rmi nginx:latest

# Erzwingen
docker rmi -f nginx:latest
```

### Images bauen

Images mit Dockerfile bauen:

```bash
docker build -t myapp:latest .
```

---

## Container-Operationen

### Container erstellen und starten

```bash
# Interaktiver Container (mit Terminal)
docker run -it ubuntu /bin/bash

# Daemon-Container (im Hintergrund ausgeführt)
docker run -d nginx

# Port-Mapping
docker run -d -p 8080:80 nginx

# Containername angeben
docker run -d --name my-nginx nginx
```

### Container anzeigen

```bash
 # Laufende Container auflisten
docker ps

# Alle Container auflisten (einschließlich gestoppter)
docker ps -a
```

### Container-Lebenszyklusverwaltung

```bash
# Container starten
docker start my-nginx

# Container stoppen
docker stop my-nginx

# Container neu starten
docker restart my-nginx

# Container entfernen
docker rm my-nginx
```

### In Container eintreten

```bash
# exec verwenden, um in laufenden Container einzutreten
docker exec -it my-nginx /bin/bash
```

---

## Netzwerkverwaltung

### Netzwerke anzeigen

```bash
# Alle Netzwerke auflisten
docker network ls

# Netzwerk-Details anzeigen
docker network inspect bridge
```

### Netzwerk erstellen

```bash
# Bridge-Netzwerk erstellen
docker network create my-network
```

---

## Volumen-Verwaltung

### Volumen erstellen

```bash
# Volumen erstellen
docker volume create my-volume

# Volumes auflisten
docker volume ls
```

### Volumes verwenden

```bash
# Volumen einhängen
docker run -d -v my-volume:/container/path nginx

# Host-Verzeichnis einhängen
docker run -d -v /host/path:/container/path nginx
```

---

## Docker Compose verwenden

### Docker Compose Dateistruktur

```yaml
version: '3.8'

services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
    depends_on:
      - redis

  redis:
    image: redis:alpine
```

### Häufig verwendete Befehle

```bash
# Alle Dienste starten
docker-compose up

# Im Hintergrund starten
docker-compose up -d

# Alle Dienste stoppen
docker-compose down
```

---

## Dockerfiles schreiben

### Grundlegende Anweisungen

```dockerfile
# Basisimage angeben
FROM node:18-alpine

# Arbeitsverzeichnis setzen
WORKDIR /app

# Dateien kopieren
COPY . .

# Ports freigeben
EXPOSE 3000

# Startbefehl
CMD ["node", "index.js"]
```

### Beispiel für mehrstufigen Build

```dockerfile
# Build-Stufe
FROM golang:1.20 AS builder
WORKDIR /app
RUN go build -o main .

# Laufzeit-Stufe
FROM alpine:latest
WORKDIR /app
COPY --from=builder /app/main .
CMD ["./main"]
```

---

## Docker Häufig verwendete Befehle Kurzreferenz

### Image-Befehle

| Befehl | Beschreibung |
|--------|-------------|
| `docker pull <image>` | Image herunterladen |
| `docker images` | Images auflisten |
| `docker rmi <image>` | Image entfernen |
| `docker build -t <name> .` | Image bauen |

### Container-Befehle

| Befehl | Beschreibung |
|--------|-------------|
| `docker run -d <image>` | Container im Hintergrund ausführen |
| `docker run -it <image>` | Container interaktiv ausführen |
| `docker ps` | Laufende Container auflisten |
| `docker ps -a` | Alle Container auflisten |
| `docker start <container>` | Container starten |
| `docker stop <container>` | Container stoppen |
| `docker rm <container>` | Container entfernen |
| `docker exec -it <container> /bin/bash` | In Container eintreten |

---

## Best Practices

### Image-Optimierung

1. **Mehrstufige Builds verwenden**: Endgute-Image-Größe reduzieren
2. **Angemessene Basisimages wählen**: Leichte Images wie alpine bevorzugen
3. **Ebenen reduzieren**: RUN-Anweisungen kombinieren
4. **.dockerignore verwenden**: Unnötige Dateien ausschließen

### Sicherheitsempfehlungen

1. **Nicht als root ausführen**: USER-Anweisung verwenden
2. **Basisimages regelmäßig aktualisieren**: Neueste Sicherheitspatches erhalten
3. **Offizielle Images verwenden**: Verifizierte offizielle Images bevorzugen

---

## Fehlerbehebung

### Container startet nicht

```bash
# Container-Logs anzeigen
docker logs <container>
```

### Port-Konflikte

```bash
# Port-Nutzung prüfen
netstat -tlnp | grep <port>

# Anderen Port verwenden
docker run -d -p 8081:80 nginx
```

### Speicherplatzprobleme

```bash
# Unbenutzte Images bereinigen
docker image prune -a

# Alle unbenutzten Ressourcen bereinigen
docker system prune -a
---

## Verwandte Links

- [Docker Offizielle Dokumentation](https://docs.docker.com/)
- [Docker Hub](https://hub.docker.com/)
- [Docker Compose Dokumentation](https://docs.docker.com/compose/)
