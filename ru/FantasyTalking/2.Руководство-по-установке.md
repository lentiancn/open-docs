# FantasyTalking - Руководство по установке

Полное руководство по установке и настройке.

## Требования

### Аппаратное обеспечение

- **GPU**: NVIDIA GPU, 8GB+ VRAM (рекомендуется 16GB)
- **Накопитель**: 20GB+ свободного места
- **Оперативная память**: 16GB+

### Программное обеспечение

- **ОС**: Linux (Ubuntu 20.04+), Windows 10/11, macOS
- **Python**: 3.8 - 3.10
- **CUDA**: 11.8+
- **cuDNN**: 8.0+

## Установка

### Способ 1: Из исходного кода (Рекомендуется)

```bash
# 1. Клонировать репозиторий
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking

# 2. Создать виртуальное окружение (рекомендуется)
python -m venv venv
source venv/bin/activate  # Linux/macOS
# или
venv\Scripts\activate  # Windows

# 3. Установить зависимости
pip install -r requirements.txt

# 4. Скачать предобученные модели
python download_models.py
```

### Способ 2: Docker (Рекомендуется)

```bash
# 1. Скачать образ
docker pull fantasytalking/fantasytalking:latest

# 2. Запустить контейнер
docker run -it --gpus all -v /your/data:/data fantasytalking/fantasytalking:latest
```

### Способ 3: pip

```bash
pip install fantasytalking
```

## Проверка

После установки выполните следующую команду:

```bash
python -c "import fantasytalking; print(fantasytalking.__version__)"
```

## Настройка

### Файл конфигурации

Создайте `config.yaml` в корне проекта:

```yaml
model:
  checkpoint_path: "./models/checkpoint.pth"
  face_enhancer: "realusf"

output:
  resolution: "512x512"
  fps: 30

audio:
  sample_rate: 16000
```

### Переменные окружения

```bash
export FT_MODEL_PATH="./models"
export FT_OUTPUT_PATH="./output"
```

## Устранение проблем

### CUDA недоступен?

1. Подтвердите, что установлен драйвер NVIDIA: `nvidia-smi`
2. Проверьте версию CUDA
3. Установите совместимую версию PyTorch

### Недостаточно памяти?

1. Используйте меньшие входные изображения
2. Уменьшите разрешение вывода
3. Используйте пакетный режим

### Ошибка загрузки модели?

```bash
# Использовать прокси
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890

# Загрузить вручную
python download_models.py --mirror china
```

## Удаление

```bash
pip uninstall fantasytalking
rm -rf FantasyTalking
```

## Следующие шаги

- см. Руководство пользователя: ./3.Руководство-пользователя.md
- Подробнее: ./4.Часто-задаваемые-вопросы.md
