# Redis - 简介

Redis（Remote Dictionary Server）是一个开源的、基于内存的数据结构存储系统，常用于作为数据库、缓存和消息队列。Redis 由 Salvatore Sanfilippo 于 2009 年创建，以其高性能和丰富的数据结构而闻名。

## Redis 的核心特性

### 1. 内存存储

Redis 将数据存储在内存中，提供极快的读写速度：

```bash
# 设置键值
SET user:1 "Tom"

# 获取值
GET user:1

# 性能对比
# Redis: 100,000+ 次/秒
# MySQL: 1,000-10,000 次/秒
```

### 2. 丰富的数据结构

Redis 支持多种数据结构：

| 数据类型 | 说明 | 示例命令 |
|----------|------|----------|
| STRING | 字符串 | SET, GET |
| LIST | 列表 | LPUSH, RPUSH |
| SET | 集合 | SADD, SMEMBERS |
| ZSET | 有序集合 | ZADD, ZRANGE |
| HASH | 哈希表 | HSET, HGET |
| BITMAP | 位图 | SETBIT, GETBIT |
| HYPERLOGLOG | HyperLogLog | PFADD, PFCOUNT |
| GEospatial | 地理位置 | GEOADD, GEORADIUS |
| STREAM | 流 | XADD, XRANGE |

### 3. 持久化

Redis 支持两种持久化方式：

```bash
# RDB 快照
# 定期保存数据到磁盘
save 900 1      # 900秒内1个key变化
save 300 10     # 300秒内10个key变化
save 60 10000   # 60秒内10000个key变化

# AOF 日志
# 记录所有写操作
appendonly yes
appendfsync everysec
```

### 4. 主从复制

Redis 支持主从复制，提高可用性和读取性能：

```bash
# 从节点配置
replicaof 192.168.1.100 6379
```

### 5. 集群

Redis Cluster 提供数据分片和高可用：

```
┌─────────┐     ┌─────────┐     ┌─────────┐
│ Master1 │     │ Master2 │     │ Master3 │
│  Slot0  │     │ Slot1   │     │ Slot2   │
└─────────┘     └─────────┘     └─────────┘
     │               │               │
┌─────────┐     ┌─────────┐     ┌─────────┐
│Replica1 │     │Replica2 │     │Replica3 │
└─────────┘     └─────────┘     └─────────┘
```

## Redis 的应用场景

### 1. 缓存

Redis 最常用的场景是作为缓存层：

```bash
# 缓存用户信息
SET user:1:info "{\"name\":\"Tom\",\"age\":25}"
GET user:1:info

# 设置过期时间
SET user:2:info "{\"name\":\"Jerry\"}" EX 3600  # 1小时过期
```

### 2. 会话存储

```bash
# 存储用户会话
SET session:abc123 "{\"userId\":1,\"loginTime\":\"2024-01-01\"}"
EXPIRE session:abc123 86400  # 24小时
```

### 3. 实时排行榜

```bash
# 有序集合实现排行榜
ZADD leaderboard 1000 "user1"
ZADD leaderboard 800 "user2"
ZADD leaderboard 900 "user3"

# 获取排名前3
ZREVRANGE leaderboard 0 2 WITHSCORES
```

### 4. 消息队列

```bash
# 发布/订阅
PUBLISH chat:room1 "Hello everyone"

# 列表实现队列
LPUSH queue:tasks "task1"
LPUSH queue:tasks "task2"
RPOP queue:tasks  # 取出任务
```

### 5. 分布式锁

```bash
# 获取锁
SET lock:order "1" NX EX 10  # 10秒过期

# 释放锁
DEL lock:order
```

## Redis 的版本历史

| 版本 | 发布年份 | 主要特性 |
|------|----------|----------|
| Redis 1.0 | 2010 | 初始版本 |
| Redis 2.0 | 2010 | 发布/订阅、虚拟机 |
| Redis 2.2 | 2011 | 慢查询日志 |
| Redis 2.4 | 2011 | AOF 优化 |
| Redis 2.6 | 2012 | Lua 脚本、过期优化 |
| Redis 3.0 | 2015 | Redis Cluster |
| Redis 4.0 | 2017 | 模块系统、缓存驱逐优化 |
| Redis 5.0 | 2018 | Streams 数据类型 |
| Redis 6.0 | 2020 | ACL、RESP3 协议 |
| Redis 7.0 | 2022 | 函数、Sharded Pub/Sub |

## Redis 与其他技术对比

### Redis vs Memcached

| 特性 | Redis | Memcached |
|------|-------|-----------|
| 数据结构 | 多种 | 仅字符串 |
| 持久化 | 支持 | 不支持 |
| 复制 | 支持 | 不支持 |
| 集群 | 支持 | 不支持 |

### Redis vs 关系型数据库

| 特性 | Redis | MySQL |
|------|-------|-------|
| 存储位置 | 内存 | 磁盘 |
| 数据结构 | 多种 | 表格 |
| 事务 | 有限 | 完整 ACID |
| 查询能力 | 有限 | 强大 |

## Redis 的统计数据

- **GitHub 星标**：160,000+ ⭐
- **企业用户**：Twitter、Instagram、Snapchat、Uber 等
- **性能**：100,000+ QPS

## 为什么选择 Redis？

1. **高性能**：内存存储，读写速度极快
2. **丰富数据结构**：满足多种业务需求
3. **持久化**：数据可保存到磁盘
4. **高可用**：主从复制、哨兵、集群
5. **简单易用**：安装配置简单，命令直观
6. **应用广泛**：缓存、会话、消息队列、排行榜
7. **社区活跃**：丰富的客户端和工具

## 相关资源

- 官方网站：https://redis.io
- 中文文档：https://redis.io/docs/
- GitHub：https://github.com/redis/redis

Redis 是现代应用架构中不可或缺的组件，无论是作为缓存加速应用，还是构建实时系统，都能提供出色的性能。
