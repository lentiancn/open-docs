# Mockito 常見問題

關於 Mockito 的常見問題。

##  一般問題

### 什麼是 Mockito？

Mockito 是一個開源的 Java 模擬框架。它允許為單元測試建立和配置模擬物件。

### 為什麼使用 Mockito？

- 無需外部依賴的隔離測試
- 更快的測試執行
- 簡單直觀的 API
- 與 JUnit 良好整合

### Mock 和 Spy 有什麼區別？

- **Mock** - 一個完全由您控制的虛構物件
- **Spy** - 一個部分真實的物件，您只覆蓋特定方法

## 技術問題

### 如何模擬 final 類別？

使用 `mockito-inline`：

```groovy
testImplementation 'org.mockito:mockito-inline:5.8.0'
```

### 如何模擬靜態方法？

使用 Mockito 3.7+，可以模擬靜態方法：

```java
try (MockedStatic<Utilities> mocked = Mockito.mockStatic(Utilities.class)) {
    mocked.when(Utilities::getName).thenReturn("mocked");
    // 您的測試代碼
}
```

## 故障排除

### 錯誤：「Cannot mock/spy class」

**原因：** 類別是 final 或有 final 方法。

**解決方案：**
- 使用 `mockito-inline`
- 模擬介面而不是類別

### 警告：「Unnecessary stubbing」

**原因：** Stub 未被使用。

**解決方案：**
- 刪除未使用的 stub
- 或使用 `lenient()`：

```java
lenient().when(mock.method()).thenReturn("value");
```

## 整合

### 與 JUnit 4

```java
@RunWith(MockitoJUnitRunner.class)
public class MyTest {
    @Mock
    private List mockList;
}
```

### 與 JUnit 5

```java
@ExtendWith(MockitoExtension.class)
public class MyTest {
    @Mock
    private List mockList;
}
```

## 資源

- Stack Overflow: https://stackoverflow.com/questions/tagged/mockito

## 許可證

MIT License
