# Docker User Manual

> ðŸŽ¯ This article provides detailed information on Docker core concepts, basic usage, and development guide
> 
> ðŸ“… Last Updated: February 2026
> 
> ðŸ“– Applicable Version: Docker 27.x

---

## Table of Contents

1. [Docker Core Concepts](#1-docker-core-concepts)
2. [Image Operations](#2-image-operations)
3. [Container Operations](#3-container-operations)
4. [Writing Dockerfiles](#4-writing-dockerfiles)
5. [Docker Compose](#5-docker-compose)
6. [Network Management](#6-network-management)
7. [Data Management](#7-data-management)
8. [Dockerfile Best Practices](#8-dockerfile-best-practices)
9. [Monitoring and Debugging](#9-monitoring-and-debugging)
10. [Security Configuration](#10-security-configuration)

---

## 1. Docker Core Concepts

### 1.1 Image

Images are read-only templates used to create containers. Think of images as classes in object-oriented programming.

#### Common Image Operations

```bash
# List images
docker images
docker image ls

# Pull image
docker pull ubuntu:22.04
docker pull nginx:latest

# Remove image
docker rmi ubuntu:22.04
docker image rm nginx:latest

# Build image
docker build -t my-image:tag .

# View image details
docker image inspect ubuntu:22.04
```

### 1.2 Container

Containers are running instances of images.

#### Container Lifecycle

```
Created â†’ Running â†’ Paused â†’ Stopped â†’ Deleted
```

#### Common Container Operations

```bash
# Create and start container
docker run -it ubuntu /bin/bash
docker run -d nginx

# List containers
docker ps          # Running containers
docker ps -a       # All containers

# Start/Stop/Restart container
docker start container_id
docker stop container_id
docker restart container_id

# Delete container
docker rm container_id
docker rm -f container_id    # Force delete

# Enter running container
docker exec -it container_id /bin/bash

# View container logs
docker logs -f container_id
```

### 1.3 Repository

Repositories store Docker images. The most common one is Docker Hub.

```bash
# Login to Docker Hub
docker login

# Push image to Docker Hub
docker push my-image:tag

# Search images
docker search nginx
```

---

## 2. Image Operations

### 2.1 Pull Images

```bash
# Pull latest version
docker pull nginx

# Pull specific version
docker pull nginx:1.25

# Pull from custom registry
docker pull my-registry.com/my-image:tag
```

### 2.2 Build Images

#### Using Dockerfile

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

```bash
# Build image
docker build -t my-app:tag .

# Build with no cache
docker build --no-cache -t my-app:tag .
```

### 2.3 Manage Images

```bash
# List images
docker images
docker image ls

# List dangling images
docker images -f dangling=true

# Remove unused images
docker image prune
docker image prune -a

# Remove image by name
docker rmi nginx

# Tag image
docker tag my-app:latest my-app:v1.0

# Push to registry
docker push my-app:latest
```

---

## 3. Container Operations

### 3.1 Create and Start Containers

```bash
# Interactive container
docker run -it ubuntu /bin/bash

# Detached container
docker run -d nginx

# With port mapping
docker run -d -p 8080:80 nginx

# With volume mapping
docker run -v /host/path:/container/path nginx

# With environment variables
docker run -e MYSQL_ROOT_PASSWORD=123456 mysql
```

### 3.2 Container Management

```bash
# List containers
docker ps              # Running
docker ps -a           # All
docker ps -l           # Latest

# Start/Stop
docker start container_id
docker stop container_id
docker restart container_id

# Pause/Unpause
docker pause container_id
docker unpause container_id

# Delete
docker rm container_id
docker rm -f container_id      # Force delete
docker rm $(docker ps -aq)      # Delete all
```

### 3.3 Container Interaction

```bash
# Enter container
docker exec -it container_id /bin/bash

# Run command in container
docker exec container_id ls -la

# Copy files
docker cp container_id:/path/file.txt ./file.txt
docker cp ./file.txt container_id:/path/

# View logs
docker logs container_id
docker logs -f container_id          # Follow
docker logs --tail 100 container_id  # Last 100 lines
```

### 3.4 Resource Limits

```bash
# Memory limit
docker run -m 512m nginx

# CPU limit
docker run --cpus=0.5 nginx

# Restart policy
docker run --restart=always nginx
docker run --restart=on-failure:3 nginx
```

---

## 4. Writing Dockerfiles

### 4.1 Basic Instructions

```dockerfile
# Base image
FROM node:18-alpine

# Maintainer (deprecated, use LABEL)
MAINTAINER yourname <email@example.com>

# Use LABEL instead
LABEL maintainer="yourname@example.com"

# Set working directory
WORKDIR /app

# Copy files
COPY package*.json ./
COPY . .

# Run commands
RUN npm install

# Expose ports
EXPOSE 3000

# Environment variables
ENV NODE_ENV=production

# Start command
CMD ["npm", "start"]
```

### 4.2 Multi-stage Builds

```dockerfile
# Build stage
FROM node:18 AS builder
WORKDIR /app
COPY . .
RUN npm run build

# Production stage
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 4.3 .dockerignore

```
node_modules
.git
*.md
.env
```

---

## 5. Docker Compose

### 5.1 Basic docker-compose.yml

```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    volumes:
      - .:/app
      - /app/node_modules

  db:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: secret
    volumes:
      - db-data:/var/lib/postgresql/data

volumes:
  db-data:
```

### 5.2 Common Commands

```bash
# Start services
docker-compose up
docker-compose up -d          # Detached

# Stop services
docker-compose down

# View logs
docker-compose logs -f

# List services
docker-compose ps

# Build images
docker-compose build

# Scale service
docker-compose up -d --scale web=3
```

### 5.3 Advanced Usage

```yaml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
      - db
      - redis
    networks:
      - frontend
      - backend
    restart: always

  db:
    image: postgres:15
    networks:
      - backend
    volumes:
      - db-data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    networks:
      - backend

networks:
  frontend:
  backend:

volumes:
  db-data:
```

---

## 6. Network Management

### 6.1 Network Types

```bash
# Bridge (default)
docker run --network bridge nginx

# Host
docker run --network host nginx

# None
docker run --network none nginx
```

### 6.2 Custom Networks

```bash
# Create network
docker network create my-network

# Connect container to network
docker network connect my-network container_id

# Disconnect
docker network disconnect my-network container_id

# List networks
docker network ls

# Inspect network
docker network inspect my-network
```

### 6.3 Port Mapping

```bash
# Map container port to host port
docker run -p 8080:80 nginx

# Map to specific IP
docker run -p 127.0.0.1:8080:80 nginx

# UDP port
docker run -p 8080:80/udp nginx

# Random port
docker run -P nginx
```

---

## 7. Data Management

### 7.1 Volumes

```bash
# Create volume
docker volume create my-volume

# List volumes
docker volume ls

# Inspect volume
docker volume inspect my-volume

# Remove unused volumes
docker volume prune

# Mount volume
docker run -v my-volume:/data nginx
```

### 7.2 Bind Mounts

```bash
# Mount host directory
docker run -v /host/path:/container/path nginx

# Read-only mount
docker run -v /host/path:/container/path:ro nginx
```

### 7.3 tmpfs Mounts

```bash
# Mount tmpfs
docker run --tmpfs /app/data nginx
```

---

## 8. Dockerfile Best Practices

### 8.1 Image Size

```dockerfile
# Use alpine images
FROM node:18-alpine

# Multi-stage builds
FROM node:18 AS builder
RUN npm run build

FROM node:18-alpine
COPY --from=builder /app/dist /app

# Clean up in same layer
RUN apt-get update && apt-get install -y pkg && apt-get clean
```

### 8.2 Caching

```dockerfile
# Copy package files first
COPY package*.json ./
RUN npm install

# Then copy source code
COPY . .
```

### 8.3 Security

```dockerfile
# Don't run as root
USER node

# Use specific versions
FROM nginx:1.25-alpine

# Scan for vulnerabilities
# docker scan my-image
```

---

## 9. Monitoring and Debugging

### 9.1 Container Stats

```bash
# View resource usage
docker stats
docker stats container_id

# Detailed info
docker inspect container_id
```

### 9.2 Logs

```bash
# View logs
docker logs container_id

# Follow logs
docker logs -f container_id

# Timestamps
docker logs -t container_id
```

### 9.3 Process List

```bash
# Processes in container
docker top container_id
```

### 9.4 Troubleshooting

```bash
# Run with interactive tty
docker run -it --rm ubuntu /bin/bash

# Inspect container
docker inspect container_id

# Copy files from container
docker cp container_id:/path/file.txt ./
```

---

## 10. Security Configuration

### 10.1 User Isolation

```dockerfile
# Create user
RUN addgroup -g 1000 appgroup && \
    adduser -u 1000 -G appgroup -D appuser

USER appuser
```

### 10.2 Secrets Management

```bash
# Create secret (Docker Swarm)
echo "password" | docker secret create my_secret -

# Use secret
docker secret ls
```

### 10.3 Scan Images

```bash
# Scan for vulnerabilities
docker scan my-image

# Update scanner
docker scan --update
```

---

## ðŸ“š Related Resources

- Official Documentation: https://docs.docker.com
- Best Practices: https://docs.docker.com/develop/develop-images/dockerfile_best-practices/
- Docker Compose: https://docs.docker.com/compose/

---

*This document is generated by AI Assistant*
