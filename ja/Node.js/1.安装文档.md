# Node.js インストールガイド

Node.jsはChrome V8エンジンに基づくJavaScriptランタイムです。このガイドでは、すべての環境でのインストール方法を説明します。

## バージョン情報

| バージョン | ステータス | 説明 |
|------|------|------|
| Node.js 22.x | ✅ 最新 | 最新のLTSバージョン |
| Node.js 20.x | ✅ LTS | 長期サポートバージョン |
| Node.js 18.x | ✅ LTS | 長期サポートバージョン |
| Node.js 16.x | ⚠️ メンテナンス | セキュリティ更新のみ |
| Node.js 14.x | ❌ 旧版 | サポート終了 |

> **重要**：このガイドは**Node.js 20.x LTS**を主に対象としています。新規プロジェクトにはLTSバージョンの使用をお勧めします。

## インストール方法

### 方法1：Windowsへのインストール

#### 1. インストーラーを使用（推奨）

1. Node.js インストーラーをダウンロード：https://nodejs.org/
2. .msi インストーラーを実行
3. インストールウィザードに従ってインストールを完了

#### 2. Chocolateyを使用

```powershell
# Node.js をインストール
choco install nodejs

# 特定バージョンをインストール
choco install nodejs --version=20.10.0
```

#### 3. wingetを使用

```powershell
# Node.js LTS をインストール
winget install OpenJS.NodeJS.LTS

# 特定バージョンをインストール
winget install OpenJS.NodeJS --version=20.10.0
```

### 方法2：macOSへのインストール

#### 1. Homebrewを使用（推奨）

```bash
# Node.js LTS をインストール
brew install node@20

# サービスを起動
brew services start node@20
```

#### 2. nvmを使用

```bash
# nvm をインストール
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Node.js をインストール
nvm install 20
nvm use 20
nvm alias default 20
```

#### 3. インストーラーを使用

macOS インストーラーをダウンロード：https://nodejs.org/

### 方法3：Linuxへのインストール

#### 1. パッケージマネージャーを使用

**Ubuntu/Debian:**

```bash
# Node.js リポジトリを追加
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -

# Node.js をインストール
sudo apt-get install -y nodejs
```

**CentOS/RHEL:**

```bash
# Node.js リポジトリを追加
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -

# Node.js をインストール
sudo yum install -y nodejs
```

**Fedora:**

```bash
# Node.js リポジトリを追加
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -

# Node.js をインストール
sudo dnf install -y nodejs
```

#### 2. nvmを使用（推奨）

```bash
# nvm をインストール
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# Node.js をインストール
nvm install 20
nvm use 20
```

### 方法4：fnmを使用（高速ノードバージョン管理）

```bash
# fnm をインストール
curl -fsSL https://fnm.vercel.app/install | bash

# Node.js をインストール
fnm install 20
fnm use 20
fnm default 20
```

### 方法5：Docker

```bash
# Node.js 公式イメージを使用
docker pull node:20

# コンテナを実行
docker run -it node:20 node --version
```

#### Dockerfileの例

```dockerfile
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000
CMD ["node", "server.js"]
```

## インストール確認

### バージョンの確認

```bash
# Node.js バージョンを確認
node --version

# npm バージョンを確認
npm --version
```

### npmのアップグレード

```bash
# npm を最新バージョンにアップグレード
npm install -g npm
```

## パッケージ管理

### npmの一般的なコマンド

```bash
# プロジェクトを初期化
npm init

# 依存関係をインストール
npm install

# 本番用依存関係をインストール
npm install <package>

# 開発用依存関係をインストール
npm install <package> --save-dev

# グローバルにインストール
npm install -g <package>

# 依存関係を更新
npm update

# 依存関係を削除
npm uninstall <package>
```

### yarnの使用

```bash
# yarn をインストール
npm install -g yarn

# 依存関係をインストール
yarn install

# 依存関係を追加
yarn add <package>

# グローバルにインストール
yarn global add <package>
```

### pnpmの使用

```bash
# pnpm をインストール
npm install -g pnpm

# 依存関係をインストール
pnpm install

# 依存関係を追加
pnpm add <package>
```

## 環境設定

### nvmで複数バージョンを管理

```bash
# インストール済みバージョンを表示
nvm list

# 新バージョンをインストール
nvm install 21

# バージョンを切り替え
nvm use 21

# デフォルトバージョンを設定
nvm alias default 20
```

### ミラーサイトの設定

```bash
# npm のミラーを設定
npm config set registry https://registry.npmmirror.com

# yarn のミラーを設定
yarn config set registry https://registry.npmmirror.com
```

## よくある問題

### Node.jsとnpmのバージョンが合わない？

nvmでバージョンを統一管理：

```bash
nvm use 20
```

### インストール失敗（権限問題）

```bash
# Linux/macOS は sudo を使用
sudo npm install -g <package>

# または npm の権限を修正
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### ビルド失敗

キャッシュをクリア：

```bash
npm cache clean --force
```

## 関連リンク

- [Node.js 公式サイト](https://nodejs.org/)
- [Node.js 日本語ドキュメント](https://nodejs.org/ja/)
- [npm 公式ドキュメント](https://docs.npmjs.com/)
- [nvm GitHub](https://github.com/nvm-sh/nvm)
