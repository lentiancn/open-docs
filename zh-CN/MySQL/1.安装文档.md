# MySQL 安装文档

在所有主流平台上安装 MySQL 的完整指南。

---

## 目录

- [Linux](#linux)
  - [Ubuntu/Debian](#ubuntudebian)
  - [CentOS/RHEL](#centosrhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Homebrew](#homebrew)
  - [DMG 包](#dmg-包)
- [Windows](#windows)
  - [MSI 安装程序](#msi-安装程序)
  - [ZIP 包](#zip-包)
  - [Docker](#docker)
- [验证安装](#验证安装)
- [初始配置](#初始配置)
- [卸载](#卸载)

---

## Linux

### Ubuntu / Debian

#### 方法一：APT 仓库（推荐）

```bash
# 更新软件包索引
sudo apt update

# 安装 MySQL 服务器
sudo apt install mysql-server

# 启动 MySQL 服务
sudo systemctl start mysql
sudo systemctl enable mysql

# 安全配置
sudo mysql_secure_installation
```

#### 方法二：Docker

```bash
# 拉取 MySQL 镜像
docker pull mysql:latest

# 运行 MySQL 容器
docker run -d \
  --name mysql \
  -e MYSQL_ROOT_PASSWORD=your_password \
  -v mysql-data:/var/lib/mysql \
  -p 3306:3306 \
  mysql:latest
```

### CentOS / RHEL

#### 使用 YUM 仓库

```bash
# 下载 MySQL YUM 仓库
sudo yum install https://dev.mysql.com/get/mysql80-community-release-el8-4.noarch.rpm

# 安装 MySQL 服务器
sudo yum install mysql-community-server

# 启动 MySQL 服务
sudo systemctl start mysqld
sudo systemctl enable mysqld

# 获取临时密码
sudo grep 'temporary password' /var/log/mysqld.log

# 安全配置
mysql_secure_installation
```

### Fedora

```bash
# 安装 MySQL
sudo dnf install @mysql

# 启动服务
sudo systemctl start mysqld
sudo systemctl enable mysqld
```

### Arch Linux

```bash
# 安装 MySQL (MariaDB)
sudo pacman -S mariadb

# 初始化数据库
sudo mysql_install_db --user=mysql --basedir=/usr --datadir=/var/lib/mysql

# 启动服务
sudo systemctl start mariadb
sudo systemctl enable mariadb
```

---

## macOS

### Homebrew（推荐）

```bash
# 安装 Homebrew（如未安装）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 MySQL
brew install mysql

# 启动 MySQL
brew services start mysql
```

### DMG 包

1. 从 MySQL 官网下载 MySQL
2. 安装 .dmg 包
3. 从系统偏好设置或命令行运行 MySQL

---

## Windows

### MSI 安装程序（推荐）

1. 从 MySQL 官网下载 MySQL 安装程序
2. 运行安装程序
3. 选择"完整"或"自定义"安装
4. 按向导操作

### ZIP 包

```powershell
# 下载 ZIP 包
# 解压到 C:\mysql

# 初始化 MySQL
cd C:\mysql
mysqld --initialize-insecure

# 安装 MySQL 服务
mysqld --install MySQL

# 启动 MySQL
net start MySQL

# 设置 root 密码
mysql -u root
ALTER USER 'root'@'localhost' IDENTIFIED BY 'YourPassword';
```

### Docker

```powershell
# 拉取并运行 MySQL
docker run -d --name mysql -e MYSQL_ROOT_PASSWORD=secret -p 3306:3306 -v mysql-data:/var/lib/mysql mysql:latest
```

---

## 验证安装

```bash
# 检查 MySQL 版本
mysql --version

# 检查 MySQL 服务状态
sudo systemctl status mysql

# 连接 MySQL
mysql -u root -p

# 查看数据库
SHOW DATABASES;
```

---

## 初始配置

### 创建数据库和用户

```sql
-- 以 root 身份连接
mysql -u root -p

-- 创建数据库
CREATE DATABASE app_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- 创建用户
CREATE USER 'app_user'@'localhost' IDENTIFIED BY 'user_password';

-- 授予权限
GRANT ALL PRIVILEGES ON app_db.* TO 'app_user'@'localhost';

-- 刷新权限
FLUSH PRIVILEGES;
```

### 配置文件

#### Linux: `/etc/mysql/mysql.conf.d/mysqld.cnf`

```ini
[mysqld]
# 基本设置
max_connections = 200
port = 3306
datadir = /var/lib/mysql

# 字符集
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

# InnoDB 设置
innodb_buffer_pool_size = 1G

# 日志
log_error = /var/log/mysql/error.log
slow_query_log = 1
```

---

## 卸载

### Ubuntu/Debian

```bash
# 停止 MySQL
sudo systemctl stop mysql

# 卸载软件包
sudo apt purge mysql-server mysql-client mysql-common
sudo apt autoremove

# 删除数据目录
sudo rm -rf /var/lib/mysql
sudo rm -rf /etc/mysql
```

### macOS (Homebrew)

```bash
# 停止 MySQL
brew services stop mysql

# 卸载
brew uninstall mysql
```

---

## 下一步

- [使用指南](./2.使用指南.md)
- 阅读 [官方 MySQL 文档](https://dev.mysql.com/doc/)
