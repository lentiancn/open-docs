# Node.js 安裝指南

Node.js 是一個基於 Chrome V8 引擎的 JavaScript 運行時。本指南涵蓋在所有環境中的安裝方法。

## 版本資訊

| 版本 | 狀態 | 說明 |
|------|------|------|
| Node.js 22.x | ✅ 當前 | 最新 LTS 版本 |
| Node.js 20.x | ✅ LTS | 長期支援版本 |
| Node.js 18.x | ✅ LTS | 長期支援版本 |
| Node.js 16.x | ⚠️ 維護 | 僅安全更新 |
| Node.js 14.x | ❌ 舊版 | 已停止維護 |

> **重要提示**：本指南主要針對 **Node.js 20.x LTS**。建議新專案使用 LTS 版本。

## 安裝方法

### 方法一：Windows 安裝

#### 1. 使用安裝程式（推薦）

1. 下載 Node.js 安裝程式：https://nodejs.org/
2. 執行 .msi 安裝程式
3. 按照安裝精靈完成安裝

#### 2. 使用 Chocolatey

```powershell
# 安裝 Node.js
choco install nodejs

# 安裝特定版本
choco install nodejs --version=20.10.0
```

#### 3. 使用 winget

```powershell
# 安裝 Node.js LTS
winget install OpenJS.NodeJS.LTS

# 安裝特定版本
winget install OpenJS.NodeJS --version=20.10.0
```

### 方法二：macOS 安裝

#### 1. 使用 Homebrew（推薦）

```bash
# 安裝 Node.js LTS
brew install node@20

# 啟動服務
brew services start node@20
```

#### 2. 使用 nvm

```bash
# 安裝 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 安裝 Node.js
nvm install 20
nvm use 20
nvm alias default 20
```

#### 3. 使用安裝程式

下載 macOS 安裝程式：https://nodejs.org/

### 方法三：Linux 安裝

#### 1. 使用套件管理器

**Ubuntu/Debian:**

```bash
# 新增 Node.js 倉庫
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -

# 安裝 Node.js
sudo apt-get install -y nodejs
```

**CentOS/RHEL:**

```bash
# 新增 Node.js 倉庫
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -

# 安裝 Node.js
sudo yum install -y nodejs
```

**Fedora:**

```bash
# 新增 Node.js 倉庫
curl -fsSL https://rpm.nodesource.com/setup_20.x | sudo bash -

# 安裝 Node.js
sudo dnf install -y nodejs
```

#### 2. 使用 nvm（推薦）

```bash
# 安裝 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 安裝 Node.js
nvm install 20
nvm use 20
```

### 方法四：使用 fnm（快速節點版本管理器）

```bash
# 安裝 fnm
curl -fsSL https://fnm.vercel.app/install | bash

# 安裝 Node.js
fnm install 20
fnm use 20
fnm default 20
```

### 方法五：Docker

```bash
# 使用 Node.js 官方映像檔
docker pull node:20

# 執行容器
docker run -it node:20 node --version
```

#### Dockerfile 範例

```dockerfile
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE 3000
CMD ["node", "server.js"]
```

## 驗證安裝

### 檢查版本

```bash
# 檢查 Node.js 版本
node --version

# 檢查 npm 版本
npm --version
```

### 升級 npm

```bash
# 升級 npm 到最新版本
npm install -g npm
```

## 套件管理

### npm 常用指令

```bash
# 初始化專案
npm init

# 安裝依賴
npm install

# 安裝生產依賴
npm install <package>

# 安裝開發依賴
npm install <package> --save-dev

# 全域安裝
npm install -g <package>

# 更新依賴
npm update

# 刪除依賴
npm uninstall <package>
```

### 使用 yarn

```bash
# 安裝 yarn
npm install -g yarn

# 安裝依賴
yarn install

# 新增依賴
yarn add <package>

# 全域安裝
yarn global add <package>
```

### 使用 pnpm

```bash
# 安裝 pnpm
npm install -g pnpm

# 安裝依賴
pnpm install

# 新增依賴
pnpm add <package>
```

## 環境配置

### 使用 nvm 管理多版本

```bash
# 查看已安裝版本
nvm list

# 安裝新版本
nvm install 21

# 切換版本
nvm use 21

# 設定預設版本
nvm alias default 20
```

### 設定鏡像源

```bash
# 設定 npm 鏡像
npm config set registry https://registry.npmmirror.com

# 設定 yarn 鏡像
yarn config set registry https://registry.npmmirror.com
```

## 常見問題

### Node.js 和 npm 版本不匹配？

使用 nvm 統一管理版本：

```bash
nvm use 20
```

### 安裝失敗（權限問題）？

```bash
# Linux/macOS 使用 sudo
sudo npm install -g <package>

# 或者修復 npm 權限
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

### 建置失敗？

清理快取：

```bash
npm cache clean --force
```

## 相關連結

- [Node.js 官方網站](https://nodejs.org/)
- [Node.js 中文網站](https://nodejs.cn/)
- [npm 官方文件](https://docs.npmjs.com/)
- [nvm GitHub](https://github.com/nvm-sh/nvm)
