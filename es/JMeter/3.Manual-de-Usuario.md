# Manual de Usuario de JMeter

## Primeros pasos con JMeter

### Creando su primer plan de prueba

1. **Iniciar JMeter**: Inicie la GUI de JMeter
2. **Agregar Grupo de Hilos**: Clic derecho en Plan de Prueba → Agregar → Grupo de Hilos
3. **Configurar Grupo de Hilos**:
   - Número de Hilos: Número de usuarios
   - Período de Ramp-up: Tiempo para iniciar todos los usuarios
   - Contador de bucles: Número de veces para ejecutar la prueba
4. **Agregar Sampler**: Clic derecho en Grupo de Hilos → Agregar → Solicitud HTTP
5. **Configurar Solicitud HTTP**: Ingrese nombre del servidor, ruta y parámetros
6. **Agregar Listeners**: Clic derecho en Grupo de Hilos → Agregar → Listener (Árbol de Resultados, Informe Resumido)
7. **Ejecutar Prueba**: Haga clic en el botón verde "Iniciar"

## Componentes principales

### Grupo de Hilos
El Grupo de Hilos simula usuarios. Configuraciones clave:
- **Número de Hilos**: Usuarios concurrentes
- **Período de Ramp-up**: Tiempo para alcanzar la carga completa
- **Contador de bucles**: Cuántas veces cada usuario ejecuta la prueba
- **Retrasar creación de hilos**: Agregar retraso entre creación de hilos

### Samplers
Los samplers realizan las solicitudes reales:

| Sampler | Descripción |
|---------|-------------|
| Solicitud HTTP | Probar servidores web |
| Solicitud JDBC | Probar bases de datos |
| Solicitud LDAP | Probar servidores LDAP |
| Solicitud FTP | Probar servidores FTP |
| SOAP/XML-RPC | Probar servicios web |
| Sampler TCP | Probar servidores TCP |

### Controllers
Los controllers organizan el flujo de prueba:

- **Simple Controller**: Agrupa solicitudes
- **Loop Controller**: Repite solicitudes
- **If Controller**: Ejecución condicional
- **Transaction Controller**: Mide tiempo de transacción

### Listeners
Los listeners muestran los resultados de las pruebas:
- **Árbol de Resultados**: Solicitud/respuesta detallada
- **Informe Resumido**: Estadísticas agregadas
- **Resultados Gráficos**: Gráficos de rendimiento visuales
- **Gráfico de Tiempo de Respuesta**: Visualización de tiempo de respuesta

### Timers
Los timers agregan retrasos entre solicitudes:
- **Timer Constante**: Retraso fijo
- **Timer Aleatorio Gaussiano**: Retraso aleatorio con distribución gaussiana
- **Timer Aleatorio Uniforme**: Retraso aleatorio dentro de un rango

### Assertions
Las assertions validan las respuestas:
- **Assertion de Respuesta**: Verificar contenido de respuesta
- **Assertion de Duración**: Verificar tiempo de respuesta
- **Assertion de Tamaño**: Verificar tamaño de respuesta
- **Assertion XML**: Validar formato XML

## Características avanzadas

### Extracción de datos (Correlación)

Extraer valores de respuestas para datos dinámicos:

1. **Extractor JSON**: Extraer valores JSON
2. **Extractor XPath**: Extraer valores XML
3. **Extractor CSS/JQuery**: Extraer valores HTML
4. **Extractor de Expresión Regular**: Extraer usando regex

### Variables y funciones

Use variables para parametrizar pruebas:
- `${variable_name}`: Referenciar variables
- `${__functionName(param)}`: Usar funciones integradas

Funciones comunes:
- `__Random`: Generar valores aleatorios
- `__time`: Marca de tiempo actual
- `__counter`: Contador incremental
- `__property`: Leer propiedades

### Pruebas distribuidas

Ejecutar pruebas en múltiples máquinas:

1. **Configurar Servidores Remotos**: Editar `remote_hosts` en jmeter.properties
2. **Iniciar Servidores Remotos**: Ejecutar `jmeter-server` en cada slave
3. **Ejecutar Prueba**: Hacer clic en "Inicio Remoto" en la GUI

```bash
# Iniciar servidor remoto
jmeter-server

# Ejecutar prueba distribuida
jmeter -R server1,server2 -t testplan.jmx
```

### Archivos de propiedades

Personalizar el comportamiento de JMeter:
- `jmeter.properties`: Configuración principal
- `user.properties`: Configuración específica del usuario
- `system.properties`: Propiedades del sistema

## Mejores prácticas

1. **Usar Modo CLI para Pruebas de Carga**: El modo GUI usa más memoria
2. **Comenzar con Carga Baja**: Verificar que la prueba funcione antes de escalar
3. **Usar Assertions**: Validar respuestas para detectar errores
4. **Extraer Datos Dinámicos**: Manejar IDs de sesión, tokens, etc.
5. **Limpiar Recursos**: Usar Grupo de Hilos tearDown para limpieza
6. **Monitorear Recursos del Sistema**: CPU, memoria, red
7. **Usar Nombres Adecuados**: Nombres claros facilitan la depuración
8. **Control de Versiones**: Mantener planes de prueba en control de versiones

## Optimización de rendimiento

### Configuración JVM
```bash
HEAP="-Xms1g -Xmx4g"
NEW="-XX:NewSize=512m -XX:MaxNewSize=1024m"
```

### Configuración de JMeter
```properties
# Aumentar límite de hilos
thread_nums_higher_limit=10000

# Desactivar logging verboso
log_level.jmeter=INFO
```

## Solución de problemas

### OutOfMemoryError
- Aumentar tamaño del heap
- Reducir número de hilos
- Usar modo CLI

### Alta latencia
- Verificar condiciones de red
- Optimizar plan de prueba
- Usar pruebas distribuidas

### Errores de script
- Verificar Árbol de Resultados para detalles
- Habilitar logging de depuración
- Verificar assertions
