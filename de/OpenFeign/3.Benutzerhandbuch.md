# OpenFeign Benutzerhandbuch

## Grundlegende Verwendung

### Feign-Client erstellen

Definieren Sie eine Schnittstelle mit der `@FeignClient`-Annotation:

```java
@FeignClient(name = "user-service", url = "https://api.users.com")
public interface UserClient {
    
    @RequestMapping(method = RequestMethod.GET, value = "/users/{id}")
    User getUserById(@PathVariable("id") Long id);
    
    @RequestMapping(method = RequestMethod.POST, value = "/users")
    User createUser(@RequestBody User user);
}
```

### Client verwenden

Injizieren und verwenden Sie den Client in Ihrem Service:

```java
@Service
public class UserService {
    
    @Autowired
    private UserClient userClient;
    
    public User getUser(Long id) {
        return userClient.getUserById(id);
    }
}
```

---

## Erweiterte Funktionen

### Anfrage-/Antwort-Interceptoren

```java
@Component
public class AuthInterceptor implements RequestInterceptor {
    
    @Override
    public void apply(RequestTemplate template) {
        template.header("Authorization", "Bearer " + getToken());
    }
}
```

### Fehlerbehandlung

```java
@Component
public class ErrorDecoder implements ErrorDecoder {
    
    @Override
    public Exception decode(String methodKey, Response response) {
        if (response.status() == 404) {
            return new NotFoundException("Resource not found");
        }
        return new RuntimeException("Unknown error: " + response.status());
    }
}
```

### Fallback-Mechanismus

```java
@FeignClient(name = "user-service", fallback = UserClientFallback.class)
public interface UserClient {
    @RequestMapping(method = RequestMethod.GET, value = "/users/{id}")
    User getUser(@PathVariable("id") Long id);
}

@Component
public class UserClientFallback implements UserClient {
    
    @Override
    public User getUser(Long id) {
        return new User();
    }
}
```

---

## Konfiguration

### Anwendungseigenschaften

```yaml
feign:
  client:
    config:
      default:
        connectTimeout: 5000
        readTimeout: 5000
        loggerLevel: basic
```
