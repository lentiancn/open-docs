# Preguntas Frecuentes de GitLab

> Respuestas a preguntas comunes sobre GitLab

---

## Instalación

### Q: ¿GitLab no es accesible después de la instalación?

**A**: Verifica lo siguiente:
- ¿La URL externa está configurada correctamente?
- ¿El firewall permite los puertos 80 y 443?
- Verifica que el servicio esté运行ando: `sudo gitlab-ctl status`
- Revisa los registros: `sudo gitlab-ctl tail`

### Q: ¿Uso de memoria muy alto?

**A**: GitLab es intensivo en recursos, recomendaciones:
- Mínimo 4GB RAM, recomendado 8GB o más
- Optimizar con:
  ```ruby
  # /etc/gitlab/gitlab.rb
  postgresql['shared_buffers'] = "256MB"
  unicorn['worker_processes'] = 2
  ```

### Q: ¿Cómo migrar datos de GitLab?

**A**: Usar respaldo y restauración de GitLab:
```bash
# Respaldo
sudo gitlab-backup create

# Restaurar
sudo gitlab-backup restore BACKUP=timestamp
```

---

## Operaciones Git

### Q: ¿Permiso denegado al empujar?

**A**: 
1. Verificar que la clave pública SSH esté añadida al perfil de GitLab
2. Verificar permisos de miembro del proyecto
3. Si usas HTTPS, verificar usuario y token de acceso

### Q: ¿Merge request muestra conflictos?

**A**:
1. Hacer pull de la rama objetivo más reciente localmente
2. Rebasar tu rama sobre la rama objetivo
3. Resolver conflictos y hacer force push:
   ```bash
   git fetch origin
   git checkout tu-rama
   git rebase origin/main
   # Después de resolver conflictos
   git push --force-with-lease
   ```

### Q: ¿Falla al empujar archivos grandes?

**A**: GitLab limita el tamaño de archivos por defecto, ajustar configuración:
```ruby
# /etc/gitlab/gitlab.rb
gitlab_rails['max_attachment_size'] = 100 * 1024 * 1024 # 100MB
```
O usar Git LFS:
```bash
git lfs install
git lfs track "*.psd"
```

---

## CI/CD

### Q: ¿Pipeline	atascado en pendiente?

**A**: 
1. Verificar si GitLab Runner está registrado y en línea
2. Verificar que etiquetas de Runner coincidan con Jobs
3. Verificar límite de concurrencia del Runner

### Q: ¿Cómo usar registro de imágenes privado?

**A**: 
```yaml
build:
  image: my-private-image
  variables:
    DOCKER_AUTH_CONFIG: '{"auths":{"registry.example.com":{"username":"user","password":"pass"}}}'
```

### Q: ¿Caché no funciona?

**A**: Asegurar que la configuración de caché sea correcta:
```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
  policy: pull-push
```

---

## Permisos

### Q: ¿Cómo establecer protección de rama?

**A**: 
1. Ir a Proyecto → Configuración → Repositorio → Ramas Protegidas
2. Seleccionar rama a proteger
3. Configurar quién puede empujar y hacer merge

### Q: ¿No puedo acceder al proyecto?

**A**: 
1. Verificar configuración de visibilidad del proyecto (público/interno/privado)
2. Verificar que se haya añadido como miembro del proyecto
3. Contactar al administrador del proyecto para acceso

---

## Optimización de Rendimiento

### Q: ¿Páginas cargan lentamente?

**A**: 
1. Habilitar monitoreo de Prometheus para análisis
2. Optimizar configuración de PostgreSQL
3. Usar caché de Redis
4. Considerar replicación maestro-esclavo de PostgreSQL

### Q: ¿Cómo limitar cuotas de usuario?

**A**: Establecer en área de administración:
- Límites de cuota de almacenamiento
- Límites de cantidad de repositorios
- Cuotas de usuario

---

## Respaldo y Restauración

### Q: ¿Cómo configurar respaldos automáticos?

**A**: Configurar trabajo cron:
```bash
# Respaldo automático diariamente a las 2 AM
0 2 * * * /opt/gitlab/bin/gitlab-backup create CRON=1
```

### Q: ¿Dónde están los archivos de respaldo?

**A**: La ubicación predeterminada es `/var/opt/gitlab/backups/`

---

## Actualizaciones

### Q: ¿Cómo actualizar GitLab?

**A**: 
```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install gitlab-ee

# Luego reconfigurar
sudo gitlab-ctl reconfigure
```

### Q: ¿Debería hacer respaldo antes de actualizar?

**A**: Sí, strongly recommend hacer respaldo antes de actualizar:
```bash
sudo gitlab-backup create
sudo gitlab-ctl stop
```

---

## Códigos de Error Comunes

| Código | Descripción | Solución |
|--------|-------------|----------|
| 500 | Error Interno del Servidor | Revisar registros |
| 502 | Error de Puerta de Enlace | Verificar estado del servicio |
| 503 | Servicio No Disponible | Verificar uso de recursos |
| 404 | Recurso No Encontrado | Verificar URL |
| 422 | Entidad No Procesable | Verificar parámetros |
