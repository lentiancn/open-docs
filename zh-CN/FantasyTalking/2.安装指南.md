# FantasyTalking 安装指南

完整的 FantasyTalking 安装和配置指南。

## 环境要求

### 硬件要求

- **GPU**：NVIDIA 显卡，显存 8GB 及以上（推荐 16GB）
- **显存**：至少 8GB，建议 16GB
- **硬盘**：至少 20GB 可用空间（模型和输出）
- **内存**：至少 16GB RAM

### 软件要求

- **操作系统**：Linux (Ubuntu 20.04+)、Windows 10/11、macOS
- **Python**：3.8 - 3.10
- **CUDA**：11.8 或更高版本
- **cuDNN**：8.0 或更高版本

## 安装步骤

### 方式一：从源码安装（推荐）

```bash
# 1. 克隆仓库
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking

# 2. 创建虚拟环境（推荐）
python -m venv venv
source venv/bin/activate  # Linux/macOS
# 或
venv\Scripts\activate  # Windows

# 3. 安装依赖
pip install -r requirements.txt

# 4. 下载预训练模型
python download_models.py
```

### 方式二：使用 Docker（推荐）

```bash
# 1. 拉取镜像
docker pull fantasytalking/fantasytalking:latest

# 2. 运行容器
docker run -it --gpus all -v /your/data:/data fantasytalking/fantasytalking:latest
```

### 方式三：pip 安装

```bash
pip install fantasytalking
```

## 环境验证

安装完成后，运行以下命令验证：

```bash
python -c "import fantasytalking; print(fantasytalking.__version__)"
```

## 配置说明

### 配置文件

在项目根目录创建 `config.yaml`：

```yaml
model:
  checkpoint_path: "./models/checkpoint.pth"
  face_enhancer: "realusf"

output:
  resolution: "512x512"
  fps: 30

audio:
  sample_rate: 16000
```

### 环境变量

```bash
export FT_MODEL_PATH="./models"
export FT_OUTPUT_PATH="./output"
```

## 常见问题

### CUDA 不可用？

1. 确认已安装 NVIDIA 驱动
2. 检查 CUDA 版本：`nvidia-smi`
3. 安装匹配版本的 PyTorch

### 显存不足？

1. 使用更小的输入图像
2. 降低输出分辨率
3. 使用批处理模式

### 模型下载失败？

```bash
# 使用代理
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890

# 手动下载
python download_models.py --mirror china
```

## 卸载

```bash
pip uninstall fantasytalking
rm -rf FantasyTalking
```

## 下一步

- 查看使用指南：./2.使用指南.md
- 了解更多功能：./3.使用手册.md
