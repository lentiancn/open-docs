# ZooKeeper 常见问题

## 启动问题

### 问题：无法启动

**排查步骤**：
1. 检查端口占用
2. 检查 myid 文件
3. 检查配置文件
4. 查看日志

```bash
# 查看日志
tail -f zookeeper.out
```

### 问题：集群无法选举 leader

**排查步骤**：
1. 检查（节点数量需要超过半数）
2. 检查网络连通性
3. 检查时钟同步

## 使用问题

### 问题：连接超时

**解决方案**：
1. 检查服务器负载
2. 增加超时时间
3. 检查网络

### 问题：节点数据不同步

**原因**：网络分区或节点故障

**解决方案**：检查集群状态

```bash
zkServer.sh status
```

## 性能问题

### 问题：写入慢

**优化建议**：
1. 使用 SSD
2. 分离数据目录和日志目录
3. 合理设置 tickTime

## 数据问题

### 问题：数据丢失

**原因**：未正确关闭

**解决方案**：始终使用 stop 命令关闭

```bash
zkServer.sh stop
```
