# Go 使用手冊

> 完整的使用指南

---

## 快速開始

### 第一個程式

```go
package main

import "fmt"

func main() {
    fmt.Println("Hello, World!")
}
```

### 執行

```bash
go run hello.go
```

---

## 基礎語法

### 變數

```go
// 明確宣告
var name string = "Go"

// 短宣告
name := "Go"

// 常數
const pi = 3.14159
```

### 資料類型

| 類型 | 說明 |
|------|------|
| int | 整數 |
| float64 | 浮點數 |
| string | 字串 |
| bool | 布林值 |
| []int | 整數切片 |

### 控制結構

```go
// if 語句
if x > 0 {
    fmt.Println("positive")
} else if x < 0 {
    fmt.Println("negative")
} else {
    fmt.Println("zero")
}

// for 迴圈
for i := 0; i < 10; i++ {
    fmt.Println(i)
}

// range
for index, value := range slice {
    fmt.Println(index, value)
}
```

---

## 函數

```go
func add(a int, b int) int {
    return a + b
}

// 多返回值
func divide(a, b float64) (float64, error) {
    if b == 0 {
        return 0, errors.New("division by zero")
    }
    return a / b, nil
}
```

---

## 並發

### Goroutines

```go
go func() {
    fmt.Println("Hello from goroutine")
}()

// 等待 goroutine
time.Sleep(time.Second)
```

### Channels

```go
ch := make(chan string)
go func() {
    ch <- "message"
}()

msg := <-ch
```

### WaitGroups

```go
var wg sync.WaitGroup

for i := 0; i < 5; i++ {
    wg.Add(1)
    go func(i int) {
        defer wg.Done()
        fmt.Println(i)
    }(i)
}

wg.Wait()
```

---

## 套件

### 建立模組

```bash
go mod init mymodule
```

### 安裝套件

```bash
go get github.com/gin-gonic/gin
```

### 使用套件

```go
import "github.com/gin-gonic/gin"

func main() {
    r := gin.Default()
    r.GET("/ping", func(c *gin.Context) {
        c.JSON(200, gin.H{"message": "pong"})
    })
    r.Run()
}
```

---

## 測試

### 單元測試

```go
package main

import "testing"

func TestAdd(t *testing.T) {
    result := add(2, 3)
    if result != 5 {
        t.Errorf("Expected 5, got %d", result)
    }
}
```

### 執行測試

```bash
go test ./...
go test -v ./...
go test -cover ./...
```

---

## 工具

### 格式化

```bash
go fmt ./...
```

### 文件

```bash
go doc fmt.Println
```

### 建置

```bash
go build -o myapp
```

---

## 資源

- 官方文檔：https://go.dev/doc/
- Go by Example：https://gobyexample.com/
- Go 語言規範：https://go.dev/ref/spec
