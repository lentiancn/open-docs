# APISIX 常見問題

常見問題解答。

## 安裝問題

### Q: Docker 容器無法啟動？

**解決方案**：
1. 確認 Docker 已安裝並運行
```bash
docker --version
docker ps
```
2. 檢查端口是否被佔用
```bash
netstat -tlnp | grep 9080
```
3. 查看容器日誌
```bash
docker logs apisix
docker logs etcd
```

### Q: 啟動失敗，提示 etcd 連接失敗？

**解決方案**：
1. 確認 etcd 已啟動
```bash
docker ps | grep etcd
```
2. 檢查 etcd 是否在監聽正確端口
3. 檢查配置文件中的 etcd 地址是否正確

### Q: 端口被佔用？

**解決方案**：
1. 查找佔用端口的進程
```bash
lsof -i:9080
```
2. 殺掉佔用進程或修改 APISIX 端口配置
```yaml
apisix:
  node_listen: 9081
```

## 使用問題

### Q: 路由不生效？

**解決方案**：
1. 檢查路由配置格式是否正確
2. 確認路由已正確創建
3. 查看 APISIX 錯誤日誌

### Q: 插件不生效？

**解決方案**：
1. 確認插件已啟用
2. 檢查插件配置格式
3. 確認插件依賴滿足

### Q: 上游服務無法訪問？

**解決方案**：
1. 確認上游服務正常運行
2. 檢查網絡連通性
3. 檢查防火牆規則

## 配置問題

### Q: 如何配置 SSL/TLS 證書？

**解決方案**：
1. 上傳 SSL 證書
```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/ssls/1 \
  -H "X-API-KEY: 123456" \
  -d '{"cert":"證書內容","key":"私鑰內容","sni":"example.com"}'
```

### Q: 如何配置跨域（CORS）？

**解決方案**：
使用 cors 插件：

```bash
curl -X PUT http://127.0.0.1:9180/apisix/admin/routes/1 \
  -H "X-API-KEY: 123456" \
  -d '{"uri":"/api/*","plugins":{"cors":{}}}'
```

## 性能問題

### Q: 內存佔用越來越高？

**解決方案**：
1. 檢查是否有內存洩漏的插件
2. 限制緩沖區大小

### Q: CPU 使用率高？

**解決方案**：
1. 檢查是否有大量請求
2. 優化正則匹配規則
3. 減少插件數量

## 安全問題

### Q: 如何保護 Admin API？

**解決方案**：
1. 使用強密鑰
2. 限制訪問 IP
3. 啟用 HTTPS

### Q: 如何防止被攻擊？

**解決方案**：
1. 啟用限流插件
2. 啟用 IP 黑名單
3. 啟用防火牆
4. 監控異常請求

## 學習資源

### Q: 哪裡學習 APISIX？

- 官方文檔：https://apisix.apache.org/docs
- GitHub：https://github.com/apache/apisix
- 社區論壇：https://apisix.discourse.group
