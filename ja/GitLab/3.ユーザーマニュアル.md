# GitLab ユーザーマニュアル

> GitLabを効果的に使用するための完全なガイド

---

## クイックスタート

### 最初のプロジェクトを作成

1. ログイン後、「新規プロジェクト」をクリック
2. プロジェクトテンプレートまたは空白のプロジェクトを選択
3. プロジェクト名、説明、公開レベルを入力
4. 「プロジェクトを作成」をクリックして完了

### ローカルにプロジェクトをクローン

```bash
# HTTPSでクローン
git clone https://gitlab.example.com/username/project.git

# SSHでクローン
git clone git@gitlab.example.com:username/project.git
```

---

## コード管理

### ブランチ操作

```bash
# 新しいブランチを作成
git checkout -b feature/new-feature

# リモートにブランチをプッシュ
git push -u origin feature/new-feature

# すべてのブランチを表示
git branch -a

# ローカルブランチを削除
git branch -d feature/new-feature

# リモートブランチを削除
git push origin --delete feature/new-feature
```

### マージリクエスト

1. ローカルブランチで開発後、リモートにプッシュ
2. プロジェクトページを開き、「マージリクエストを作成」をクリック
3. タイトルと説明を入力し、ソースブランチとターゲットブランチを選択
4. レビュアーを指定し、関連するラベルとマイルストーンを追加
5. マージリクエストを作成し、コードレビューを待つ

### コードレビュー

- **インラインコメント**: レビュアーはコード行に直接コメントできる
- **承認ルール**: マージに必要な承認数を設定可能
- **パイプラインチェック**: マージ前にパイプラインをパスすることを要求可能
- **競合の解決**: マージ前に可能性のある競合を解決する必要がある

---

## 問題追跡

### 問題を作成

1. プロジェクト → 問題 → 新規問題へ移動
2. タイトルと説明を入力（Markdownサポート）
3. ラベル、マイルストーン、担当者itypeを設定
4. 重みりと期限を設定

### ボードを使用

1. プロジェクト → 問題 → ボードへ移動
2. カラムを作成（例：未着手、進行中、完了）
3. 問題カードを соответствующихカラムにドラッグ
4. メンバーまたはラベルでフィルタ

### マイルストーン

- 開始と終了日付を持つマイルストーンを作成
- 関連する問題をマイルストーンにリンク
- マイルストーンの進捗を追跡

---

## CI/CDパイプライン

### .gitlab-ci.yml基本構造

```yaml
stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - echo "Building..."
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/
    expire_in: 1 week

test:
  stage: test
  script:
    - echo "Testing..."
    - npm test
  coverage: '/Coverage: \d+\.\d+%/'

deploy:
  stage: deploy
  script:
    - echo "Deploying..."
  only:
    - main
  environment:
    name: production
```

### 一般的なRunner設定

#### Docker Executor

```yaml
job:
  image: node:18
  services:
    - postgres:14
  variables:
    POSTGRES_DB: test_db
    POSTGRES_USER: test_user
    POSTGRES_PASSWORD: test_password
```

#### キャッシュ設定

```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
    - .npm/
```

### デプロイ環境

- **本番**: 公式リリース用
- **ステージング**: リリース前のテスト用
- **開発**: 日常の開発用

---

## Wikiドキュメント

### Wikiページを作成

1. プロジェクト → Wiki → 新規ページへ移動
2. Markdownでコンテンツを記述
3. ページを保存

### サイドバー

- 自動生成された目次ナビゲーション
- サイドバーコンテンツはカスタマイズ可能

---

## コンテナレジストリ

### イメージをプッシュ

```bash
# GitLab Registryにログイン
docker login registry.gitlab.example.com

# イメージにタグ付け
docker tag my-image:latest registry.gitlab.example.com/username/project/my-image:latest

# イメージをプッシュ
docker pull registry.gitlab.example.com/username/project/my-image:latest
```

### イメージをプル

```bash
docker pull registry.gitlab.example.com/username/project/my-image:latest
```

---

## セキュリティスキャン

### 自動スキャン機能

- **依存関係スキャン**: プロジェクトの依存関係におけるセキュリティ脆弱性をチェック
- **コンテナスキャン**: Dockerイメージにおけるセキュリティ問題をチェック
- **SAST**: 静的アプリケーションセキュリティテスト
- **DAST**: 動的アプリケーションセキュリティテスト

### セキュリティダッシュボードを表示

1. プロジェクト → セキュリティとコンプライアンス → セキュリティダッシュボードへ移動
2. すべての脆弱性のリストを表示
3. 重大度でフィルタ
4. 脆弱性を追跡するための問題を作成

---

## プロジェクト管理のヒント

### テンプレートを使用

- 新規プロジェクトのデフォルトブランチ保護ルールを設定
- プロジェクトテンプレートを設定
- プロジェクト継承を使用

### メンバー管理

- プロジェクトメンバーを追加し、アクセスレベルを設定
- グループを使用して複数のプロジェクトを管理
- アクセストークンを設定

### Webhooks

- 外部サービスとのWebhook統合を設定
- サポートされているトリガー: push、merge request、tagなど

---

## ベストプラクティス

1. **フィーチャーブランチを使用**: 各機能または修正を別々のブランチで開発
2. **頻繁にコミット**: 明確なメッセージで頻繁にコミット
3. **コードレビュー**: すべてのコードはマージ前にレビューが必要
4. **自動テスト**: CI/CDパイプラインがテストステップを含むことを確認
5. **ドキュメントの維持**: プロジェクトドキュメントにWikiを使用
6. **セキュリティ**: セキュリティスキャレポートを定期的に確認
