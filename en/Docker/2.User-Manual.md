# Docker User Manual

> ðŸŽ¯ This document provides detailed introduction to Docker's core concepts, usage, and development guide
> 
> ðŸ“… Last Updated: February 2026
> 
> ðŸ“– Applicable Version: Docker 27.x

---

## Table of Contents

1. [Core Concepts](#1-core-concepts)
2. [Image Operations](#2-image-operations)
3. [Container Operations](#3-container-operations)
4. [Writing Dockerfiles](#4-writing-dockerfiles)
5. [Docker Compose](#5-docker-compose)
6. [Network Management](#6-network-management)
7. [Data Management](#7-data-management)
8. [Dockerfile Best Practices](#8-dockerfile-best-practices)
9. [Monitoring and Debugging](#9-monitoring-and-debugging)
10. [Security Configuration](#10-security-configuration)

---

## 1. Core Concepts

### 1.1 Images

Images are read-only templates used to create containers.

```bash
# List images
docker images
docker image ls

# Pull image
docker pull ubuntu:22.04
docker pull nginx:latest

# Remove image
docker rmi ubuntu:22.04

# Build image
docker build -t my-image:tag .

# Inspect image
docker image inspect nginx:latest
```

### 1.2 Containers

Containers are running instances of images.

```bash
# Run container
docker run -it ubuntu:22.04 /bin/bash
docker run -d nginx:latest
docker run -p 8080:80 nginx:latest

# List running containers
docker ps

# List all containers
docker ps -a

# Stop container
docker stop container_id

# Start container
docker start container_id

# Remove container
docker rm container_id

# Enter container
docker exec -it container_id /bin/bash
```

### 1.3 Repositories

Repositories store images. Docker Hub is the official public repository.

```bash
# Login to Docker Hub
docker login

# Push image
docker push my-image:tag

# Search images
docker search ubuntu
```

---

## 2. Image Operations

### 2.1 Pulling Images

```bash
# Pull latest version
docker pull ubuntu

# Pull specific version
docker pull ubuntu:22.04

# Pull all tags
docker pull -a ubuntu
```

### 2.2 Building Images

```bash
# Build from Dockerfile
docker build -t my-app:1.0 .

# Use specific Dockerfile
docker build -f Dockerfile.dev -t my-app:dev .

# Use build cache
docker build --cache-from my-app:old .
```

### 2.3 Managing Images

```bash
# List images
docker images

# Tag image
docker tag my-app:latest my-app:1.0

# Export image
docker save -o my-app.tar my-app:1.0

# Import image
docker load -i my-app.tar
```

---

## 3. Container Operations

### 3.1 Creating and Running Containers

```bash
# Interactive container
docker run -it ubuntu /bin/bash

# Daemon container (background)
docker run -d nginx

# Named container
docker run --name my-nginx nginx

# Port mapping
docker run -p 8080:80 nginx

# Random port
docker run -P nginx

# Environment variables
docker run -e APP_ENV=production -e DB_HOST=localhost my-app

# Volume mount
docker run -v /host/path:/container/path my-app

# Resource limits
docker run -m 512m --cpus=0.5 my-app
```

### 3.2 Container Lifecycle

```bash
# Start container
docker start container_id

# Stop container
docker stop container_id

# Restart container
docker restart container_id

# Pause container
docker pause container_id

# Unpause container
docker unpause container_id

# Remove container
docker rm container_id

# Force remove running container
docker rm -f container_id

# Remove exited containers
docker container prune
```

### 3.3 Entering Containers

```bash
# exec (recommended)
docker exec -it container_id /bin/bash

# attach
docker attach container_id

# Execute command in container
docker exec container_id cat /etc/passwd
```

### 3.4 Viewing Containers

```bash
# View running containers
docker ps

# View all containers
docker ps -a

# View container logs
docker logs container_id
docker logs -f container_id
docker logs --tail 100 container_id

# View container processes
docker top container_id

# View container details
docker inspect container_id

# View resource usage
docker stats container_id
docker stats --no-stream
```

---

## 4. Writing Dockerfiles

### 4.1 Basic Syntax

```dockerfile
# Base image
FROM ubuntu:22.04

# Maintainer
MAINTAINER Your Name <your@email.com>

# Labels
LABEL version="1.0"
LABEL description="My Application"

# Working directory
WORKDIR /app

# Copy files
COPY package*.json ./
COPY . .

# Run commands
RUN npm install
RUN apt update && apt install -y nginx

# Environment variables
ENV APP_ENV=production
ENV PORT=8080

# Expose port
EXPOSE 8080

# Default command
CMD ["npm", "start"]
ENTRYPOINT ["nginx", "-g", "daemon off;"]
```

### 4.2 Common Instructions

| Instruction | Description | Example |
|------------|-------------|---------|
| FROM | Base image | FROM ubuntu:22.04 |
| RUN | Execute command | RUN apt update |
| COPY | Copy files | COPY . /app |
| WORKDIR | Working directory | WORKDIR /app |
| ENV | Environment variable | ENV NODE_ENV=prod |
| EXPOSE | Declare port | EXPOSE 8080 |
| CMD | Default command | CMD ["npm", "start"] |
| ENTRYPOINT | Entry point | ENTRYPOINT ["nginx"] |

### 4.3 Multi-stage Build

```dockerfile
# Build stage
FROM node:18 AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Runtime stage
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

### 4.4 .dockerignore

```
node_modules
npm-debug.log
.git
.gitignore
README.md
.env
*.md
```

---

## 5. Docker Compose

### 5.1 docker-compose.yml Basics

```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "8080:80"
    environment:
      - NODE_ENV=production
    volumes:
      - ./data:/app/data
    depends_on:
      - db
    networks:
      - frontend
      - backend

  db:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: secret
    volumes:
      - db-data:/var/lib/postgresql/data
    networks:
      - backend

volumes:
  db-data:

networks:
  frontend:
  backend:
```

### 5.2 Common Commands

```bash
# Start all services
docker-compose up
docker-compose up -d

# Stop all services
docker-compose down

# View logs
docker-compose logs -f

# View status
docker-compose ps

# Build images
docker-compose build
```

---

## 6. Network Management

### 6.1 Network Modes

| Mode | Description |
|------|-------------|
| bridge | Default, inter-container communication |
| host | Share host network |
| none | No network |
| container | Share another container's network |

### 6.2 Creating Networks

```bash
# Create network
docker network create my-network

# List networks
docker network ls

# Inspect network
docker network inspect my-network

# Remove network
docker network rm my-network
```

---

## 7. Data Management

### 7.1 Volumes

```bash
# Create volume
docker volume create my-volume

# List volumes
docker volume ls

# Inspect volume
docker volume inspect my-volume

# Remove volume
docker volume rm my-volume
```

### 7.2 Bind Mounts

```bash
# Bind mount
docker run -v /host/path:/container/path my-app

# Read-only
docker run -v /host/path:/container/path:ro my-app
```

---

## 8. Dockerfile Best Practices

### 8.1 Optimize Build Speed

```dockerfile
# Copy dependencies first, then install, then copy code
COPY package*.json ./
RUN npm install
COPY . .
```

### 8.2 Reduce Image Size

```dockerfile
# Use alpine images
FROM node:18-alpine

# Clean cache
RUN apt-get clean && rm -rf /var/lib/apt/lists/*

# Multi-stage build
```

### 8.3 Security Best Practices

```dockerfile
# Don't use root user
RUN groupadd -r appgroup && useradd -r -g appgroup appuser
USER appuser
```

---

## 9. Monitoring and Debugging

### 9.1 Viewing Logs

```bash
# View logs
docker logs container_id

# Real-time logs
docker logs -f container_id

# Last 100 lines
docker logs --tail 100 container_id
```

### 9.2 Resource Monitoring

```bash
# View resource usage
docker stats

# View system info
docker info
```

### 9.3 Debugging

```bash
# Enter container
docker exec -it container_id /bin/bash

# View processes
docker top container_id

# View details
docker inspect container_id
```

---

## 10. Security Configuration

### 10.1 Run as Non-root User

```dockerfile
FROM node:18-alpine
RUN addgroup -r appgroup && adduser -r -S appuser -G appgroup
USER appuser
```

### 10.2 Scan Vulnerabilities

```bash
# Install trivy
brew install aquasecurity/trivy/trivy

# Scan image
trivy image my-app:latest
```

---

## ðŸ“š Related Resources

- Official Documentation: https://docs.docker.com
- Docker Hub: https://hub.docker.com

---

*This document is generated by AI Assistant*
