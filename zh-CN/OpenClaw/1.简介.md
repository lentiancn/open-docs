# OpenClaw 🦞

## 什么是 OpenClaw？

OpenClaw 是一个**自托管网关**，它将你喜欢的聊天应用——WhatsApp、Telegram、Discord、iMessage 等——连接到 AI 编程助手（如 Pi）。你只需在自己的电脑或服务器上运行一个 Gateway 进程，它就会成为你的消息应用与随时可用的 AI 助手之间的桥梁。

### 核心特点

- **自托管**：运行在你的硬件上，你做主
- **多渠道**：一个 Gateway 同时服务 WhatsApp、Telegram、Discord 等
- **原生 AI 代理**：专为编程代理设计，支持工具调用、会话管理、记忆和多代理路由
- **开源**：MIT 许可证，社区驱动

### 适用人群

开发者和高级用户，他们想要一个可以随时随地消息发送的私人 AI 助手，同时不想放弃对数据的控制，也不依赖托管服务。

### 系统要求

- Node.js 22 或更高版本
- 一个 API 密钥（推荐 Anthropic）
- 5 分钟时间

---

## 主要功能一览

### 多渠道网关
一个 Gateway 进程同时支持 WhatsApp、Telegram、Discord、iMessage 等主流聊天平台，还可以通过扩展插件添加 Mattermost 等更多渠道。

### 多代理路由
支持为不同的渠道、账号或用户运行隔离的代理，每个代理拥有独立的工作空间和会话。

### 媒体支持
支持发送和接收图片、音频和文档，并可对媒体文件进行转录和处理。

### Web 控制界面
通过浏览器仪表板进行聊天、配置、会话管理和节点控制。

### 移动端节点
支持将 iOS 和 Android 设备配对为节点，实现相机拍摄、屏幕录制、位置获取等功能。

### 语音模式
通过 Voice Wake 和 Talk Mode 实现随时随地的语音交互，支持 macOS、iOS 和 Android。

### 自动化
支持定时任务（Cron Jobs）、Webhooks 和 Gmail Pub/Sub 触发器，可实现复杂的工作流自动化。

---

## 工作原理

```
聊天应用 → Gateway → AI 代理
              ↓
           CLI / Web UI / macOS 应用 / 移动端节点
```

Gateway 是会话、路由和渠道连接的唯一数据源。

---

## 快速开始

### 第一步：安装 OpenClaw

**macOS / Linux：**
```bash
curl -fsSL https://openclaw.ai/install.sh | bash
```

**Windows（PowerShell）：**
```powershell
iwr -useb https://openclaw.ai/install.ps1 | iex
```

**通过 npm 安装：**
```bash
npm install -g openclaw@latest
```

### 第二步：运行初始化向导

```bash
openclaw onboard --install-daemon
```

向导会引导你完成认证、Gateway 设置和可选渠道的配置。

### 第三步：检查 Gateway 状态

```bash
openclaw gateway status
```

### 第四步：打开控制界面

```bash
openclaw dashboard
```

或直接在浏览器访问：http://127.0.0.1:18789/

---

## 渠道配置

### WhatsApp

```bash
openclaw channels login
openclaw gateway --port 18789
```

通过 `channels.whatsapp.allowFrom` 设置白名单，控制谁可以向助手发送消息。

### Telegram

在配置文件中添加：
```json5
{
  channels: {
    telegram: {
      botToken: "你的BotToken",
    },
  },
}
```

### Discord

```json5
{
  channels: {
    discord: {
      token: "你的Bot令牌",
    },
  },
}
```

---

## 配置说明

OpenClaw 使用 JSON5 格式的配置文件，默认路径为 `~/.openclaw/openclaw.json`。

### 最小配置示例

```json5
{
  agents: {
    defaults: {
      workspace: "~/.openclaw/workspace",
    },
  },
  channels: {
    whatsapp: {
      allowFrom: ["+15555550123"],
    },
  },
}
```

### 常用配置项

- **agents.defaults.model**：设置主模型和备用模型
- **channels**：配置各个渠道的连接和策略
- **session**：控制会话范围、重置策略
- **cron**：配置定时任务
- **hooks**：配置 Webhook 端点
- **browser**：配置浏览器控制

配置支持热重载，修改后无需手动重启 Gateway。

---

## 安全建议

- 将入站 DM 视为不可信输入
- 使用配对（pairing）策略，未知发送者需要获得批准才能使用
- 对于群组，建议启用提及模式（requireMention）
- 使用沙盒模式隔离非主要会话
- 定期运行 `openclaw doctor` 检查配置风险

---

## 相关资源

- 官方网站：https://openclaw.ai
- 官方文档：https://docs.openclaw.ai
- GitHub：https://github.com/openclaw/openclaw
- Discord 社区：https://discord.gg/clawd
