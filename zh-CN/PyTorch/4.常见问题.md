# PyTorch 常见问题

## 安装问题

### 问题：ImportError: No module named torch

**解决方案**：
```bash
pip show torch
pip install torch torchvision
```

### 问题：CUDA 不可用

**排查步骤**：
1. 确认 CUDA 安装正确
2. 检查 PyTorch CUDA 版本匹配

```python
import torch
print(torch.version.cuda)
print(torch.cuda.is_available())
```

## 使用问题

### 问题：梯度不更新

**常见原因**：
1. 未调用 optimizer.zero_grad()
2. 未调用 loss.backward()
3. 参数 requires_grad=False

### 问题：GPU 内存不足

**解决方案**：
```python
# 清理缓存
torch.cuda.empty_cache()

# 减少 batch_size
# 使用梯度累积
```

### 问题：模型训练慢

**优化建议**：
1. 使用 DataLoader 的 num_workers
2. 启用 cuDNN 自动调优
3. 使用 .to(non_blocking=True) 异步传输数据

```python
torch.backends.cudnn.benchmark = True
```

## 调试问题

### 问题：梯度为 None

检查是否正确设置 requires_grad 或使用 detach() 断开计算图。
