# Apache APISIX 简介

## 什么是 Apache APISIX

Apache APISIX 是一个**云原生 API 网关**，也是一款**AI 网关**，由 API7.ai 开发并捐赠给 Apache 软件基金会，已成为 Apache 软件基金会的顶级项目。

你可以把 APISIX 理解为介于客户端和后端服务之间的"流量管理器"。它负责接收来自客户端的所有请求，然后根据预设的规则决定如何处理这些请求——是直接转发到某个后端服务、进行负载均衡、还是进行身份验证后再转发。

## 核心定位

- **传统 API 网关**：处理南北向流量（从外部到内部网络的流量）
- **服务网格**：处理东西向流量（服务与服务之间的内部流量）
- **Kubernetes Ingress 控制器**：作为 Kubernetes 集群的入口
- **AI 网关**：支持 LLM 代理、负载均衡、重试降级、Token 限流等 AI 场景

## 主要特性

### 1. 全动态能力

APISIX 的最大特点是**无需重启即可动态更新配置**。你可以随时添加、修改或删除路由、上游、插件等配置，变更会立即生效，不会影响正在处理的请求。

- 动态路由：根据请求参数、Header、Cookie 等条件灵活匹配
- 动态上游：无需重启即可切换后端服务节点
- 动态证书：支持 HTTPS 证书的热加载
- 热更新插件：在不重启网关的情况下启用或禁用插件

### 2. 丰富的流量管理功能

- **负载均衡**：支持轮询、加权轮询、哈希一致性等多种算法
- **灰度发布**：平滑地将流量从旧版本切换到新版本
- **A/B 测试**：根据不同条件将用户分配到不同的服务版本
- **流量分割**：精确控制不同服务之间的流量比例
- **熔断器**：自动检测并隔离故障的上游服务

### 3. 完善的安全机制

APISIX 提供了多种身份验证和访问控制插件：

- Key Authentication（API 密钥验证）
- JWT Authentication（JSON- Basic Authentication（ Web Token）
基本认证）
- OAuth 2.0
- HMAC 认证
- LDAP 认证
- IP 白名单/黑名单
- Referer 防盗链
- CSRF 防护
- 请求限流（limit-count、limit-req、limit-concurrency）

### 4. 可观测性

APISIX 内置了完整的监控和追踪能力：

- **Prometheus 指标**：实时监控网关性能
- **分布式追踪**：支持 Zipkin、SkyWalking
- **日志管理**：支持将访问日志发送到 Kafka、Elasticsearch、Splunk 等
警**：支持多种- **监控告告警通知

### 5. 多协议支持

APISIX 不仅支持传统的 HTTP/HTTPS，还支持：

- TCP/UDP 代理
- gRPC 及 gRPC Web
- Dubbo
- MQTT
- WebSocket
- HTTP/3 (QUIC)

### 6. 多语言插件开发

APISIX 支持使用多种语言编写自定义插件：

- Lua（原生支持）
- Java（通过 Java Plugin Runner）
- Go（通过 Go Plugin Runner）
- Python（通过 Python Plugin Runner）
- Wasm（WebAssembly）

## 技术架构

APISIX 的架构设计非常简洁：

- **数据面**：使用 Nginx + Lua 实现高性能请求处理
- **控制面**：使用 etcd 存储配置，实现集群间的配置同步
- **管理面**：提供 REST Admin API 和 Dashboard UI 进行配置管理

APISIX 节点是无状态的，可以轻松横向扩展。通过配置多个 etcd 地址，可以实现高可用。

## 适用场景

- 构建微服务架构的 API 网关
- Kubernetes 集群的入口网关
- 保护内部 API 服务的身份验证和访问控制
- 实现 API 限流、熔断等保护机制
- 将传统服务暴露为 API 供外部调用
- 作为 AI 应用的网关，管理 LLM 请求
- 实现蓝绿部署和灰度发布

## 总结

Apache APISIX 是一个功能强大、高性能、易扩展的云原生 API 网关。它兼具动态、实时、高性能的特点，可以帮助你轻松管理 API 流量，实现身份验证、限流、监控等企业级功能。无论你是小型创业公司还是大型企业，APISIX 都能满足你的 API 网关需求。
