# frp 常见问题

## 连接问题

### 问题：连接不上服务器

**排查步骤**：
1. 检查服务器 IP 和端口是否正确
2. 检查防火墙端口是否开放（7000、6000 等）
3. 检查 token 是否匹配
4. 查看日志报错信息

```bash
# 检查端口
netstat -tlnp | grep frp
```

### 问题：连接成功但无法访问服务

**排查步骤**：
1. 检查本地服务是否正常运行
2. 检查 local_port 是否正确
3. 检查 remote_port 是否被占用

## 性能问题

### 问题：传输速度慢

**优化建议**：
1. 启用压缩：`use_compression = true`
2. 启用加密：`use_encryption = true`
3. 选择延迟更低的对等服务器

### 问题：连接经常断开

**解决方案**：
配置心跳和重连：

```ini
[common]
pool_count = 5
tcp_mux = true
protocol = tcp
```

## 安全问题

### 问题：如何保证安全

1. 使用 token 验证
2. 启用 TLS 加密
3. 限制 custom_domains
4. 不要在公网暴露不必要的端口

## 配置问题

### 问题：如何实现端口复用

编辑 frps.ini：
```ini
bind_port = 7000
vhost_http_port = 80
vhost_https_port = 443
```

### 问题：多个客户端使用相同端口

```ini
# 客户端1
[web1]
type = http
local_port = 8080
custom_domains = web1.yourdomain.com

# 客户端2  
[web2]
type = http
local_port = 8081
custom_domains = web2.yourdomain.com
```
