# Docker FAQ

Questions fréquemment posées.

## Installation

### Q: Docker Desktop ne démarre pas sur Windows?

**Solutions**:
1. Activer la virtualisation dans le BIOS
2. Installer/mettre à jour WSL 2
3. Redémarrer l'ordinateur
4. Vérifier les logiciels conflictuels (VirtualBox, VMware)

### Q: Erreur "docker: permission denied"?

**Solution**:
```
sudo usermod -aG docker $USER
# Se déconnecter et se reconnecter
```

### Q: Quelle version de Docker ai-je?

```
docker --version
docker-compose --version
```

## Images

### Q: Comment réduire la taille de l'image?

**Bonnes pratiques**:
1. Utiliser des images alpine
2. Utiliser des builds multi-étapes
3. Minimiser les couches
4. Nettoyer dans la même couche

### Q: Comment construire une image sans cache?

```
docker build --no-cache -t my-image .
```

### Q: Comment supprimer les images inutilisées?

```
docker image prune -a
```

## Conteneurs

### Q: Comment garder le conteneur en cours d'exécution?

```
docker run -d nginx tail -f /dev/null
# ou
docker run -d nginx sleep infinity
```

### Q: Le conteneur s'arrête immédiatement après le démarrage?

**Raisons**:
1. Pas de processus au premier plan
2. Processus terminé

**Solutions**:
```
docker run -it image_name /bin/bash
docker run -d image_name tail -f /dev/null
```

### Q: Comment entrer dans un conteneur en cours d'exécution?

```
docker exec -it container_id /bin/bash
```

### Q: Comment copier des fichiers vers/depuis un conteneur?

```
# Du conteneur vers l'hôte
docker cp container_id:/path/file.txt ./

# De l'hôte vers le conteneur
docker cp ./file.txt container_id:/path/
```

## Réseau

### Q: Comment accéder au conteneur depuis l'hôte?

Utiliser le mapping de ports:
```
docker run -p 8080:80 nginx
```

### Q: Comment connecter des conteneurs?

Créer un réseau:
```
docker network create my-network
docker run --network my-network -d nginx
```

## Volumes

### Q: Comment persister les données?

Utiliser des volumes:
```
docker volume create my-data
docker run -v my-data:/data nginx
```

## Docker Compose

### Q: Comment reconstruire après des modifications de code?

```
docker-compose up -d --build
```

### Q: Comment voir les logs?

```
docker-compose logs -f
```

### Q: Comment mettre à l'échelle les services?

```
docker-compose up -d --scale web=3
```

## Performance

### Q: Docker lent / consomme trop de disque?

**Solutions**:
```
docker system prune -a
docker system df
docker volume prune
```

### Q: Comment limiter les ressources du conteneur?

```
docker run -m 512m nginx
docker run --cpus=0.5 nginx
```

## Dépannage

### Q: Comment déboguer un conteneur qui échoue?

```
docker logs container_id
docker inspect container_id
```

### Q: Le réseau du conteneur ne fonctionne pas?

```
sudo systemctl restart docker
docker network ls
```

## Sécurité

### Q: Comment scanner les vulnérabilités?

```
docker scan my-image
```

### Q: Dois-je exécuter en tant que root?

Non, créez un utilisateur non-root:

```
FROM node:18-alpine
RUN addgroup -g 1000 appgroup && \
    adduser -u 1000 -G appgroup -D appuser
USER appuser
```

## Docker vs VM

### Q: Quelle est la différence entre Docker et VM?

| Aspect | Docker | VM |
|--------|---------|-----|
| OS | Partage le noyau hôte | OS séparé |
| Taille | Mo | Go |
| Démarrage | Secondes | Minutes |
| Isolation | Conteneurs | Isolation totale |

## Ressources

- Documentation: https://docs.docker.com
- Labs interactifs: https://labs.play-with-docker.com
- Communauté: https://www.docker.com/community
