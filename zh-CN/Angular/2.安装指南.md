# Angular 安装指南

Angular 开发环境搭建详解。

## 环境要求

### 硬件要求

- CPU：2 核及以上
- 内存：4GB 及以上
- 磁盘：10GB 及以上

### 软件要求

- 操作系统：Windows/macOS/Linux
- Node.js：18.10.0+ 或 20.0.0+
- npm：9.0.0+ 或 Node.js 自带
- Git：任意版本

## 安装步骤

### 1. 安装 Node.js

**Windows/macOS：**

下载安装包：https://nodejs.org

或使用 nvm 安装：

```bash
# 安装 nvm（macOS/Linux）
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 安装 Node.js LTS
nvm install --lts
nvm use --lts
```

**验证安装：**

```bash
node --version  # 应显示 v18.x.x 或 v20.x.x
npm --version   # 应显示 9.x.x 或更高
```

### 2. 安装 Angular CLI

```bash
# 使用 npm 全局安装
npm install -g @angular/cli

# 验证安装
ng version
```

### 3. 创建新项目

```bash
# 创建新 Angular 应用
ng new my-app

# 进入项目目录
cd my-app

# 启动开发服务器
ng serve
```

### 4. 访问应用

打开浏览器访问：http://localhost:4200

## 常用命令

### 项目命令

```bash
# 创建新项目（带路由和 SCSS）
ng new my-app --routing --style=scss

# 创建 standalone 应用（Angular 14+）
ng new my-app --standalone

# 启动开发服务器
ng serve

# 构建生产版本
ng build

# 运行单元测试
ng test

# 运行端到端测试
ng e2e
```

### 生成命令

```bash
# 生成组件
ng generate component my-component
ng g c my-component

# 生成服务
ng generate service my-service
ng g s my-service

# 生成指令
ng generate directive my-directive
ng g d my-directive

# 生成管道
ng generate pipe my-pipe
ng g p my-pipe

# 生成模块
ng generate module my-module
ng g m my-module

# 生成类
ng generate class my-class
ng g cl my-class

# 生成接口
ng generate interface my-interface
ng g i my-interface

# 生成 Guard
ng generate guard my-guard
ng g g my-guard

# 生成 Interceptor
ng generate interceptor my-interceptor
ng g in my-interceptor
```

## 项目结构

```
my-app/
├── src/
│   ├── app/
│   │   ├── app.component.ts      # 根组件
│   │   ├── app.config.ts         # 应用配置（Standalone）
│   │   ├── app.routes.ts         # 路由配置
│   │   └── pages/                # 页面组件
│   │       ├── home/
│   │       └── about/
│   ├── assets/                   # 静态资源
│   ├── environments/              # 环境配置
│   │   ├── environment.ts
│   │   └── environment.prod.ts
│   ├── styles.scss               # 全局样式
│   ├── index.html                # 入口 HTML
│   └── main.ts                   # 应用入口
├── angular.json                   # Angular 配置
├── package.json                   # 依赖配置
└── tsconfig.json                 # TypeScript 配置
```

## 配置详解

### angular.json

Angular 工作区配置文件：

```json
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "projects": {
    "my-app": {
      "projectType": "application",
      "schematics": {
        "@schematics/angular:component": {
          "style": "scss"
        }
      },
      "architect": {
        "build": {
          "builder": "@angular-devkit/build-angular:browser",
          "options": {
            "outputPath": "dist/my-app",
            "index": "src/index.html",
            "main": "src/main.ts",
            "polyfills": ["zone.js"],
            "tsConfig": "tsconfig.app.json",
            "assets": ["src/favicon.ico", "src/assets"],
            "styles": ["src/styles.scss"],
            "scripts": []
          }
        },
        "serve": {
          "builder": "@angular-devkit/build-angular:dev-server",
          "options": {
            "buildTarget": "my-app:build"
          }
        }
      }
    }
  }
}
```

### tsconfig.json

TypeScript 编译器配置：

```json
{
  "compileOnSave": false,
  "compilerOptions": {
    "baseUrl": "./",
    "outDir": "./dist/out-tsc",
    "forceConsistentCasingInFileNames": true,
    "strict": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "sourceMap": true,
    "declaration": false,
    "downlevelIteration": true,
    "experimentalDecorators": true,
    "moduleResolution": "node",
    "importHelpers": true,
    "target": "ES2022",
    "module": "ES2022",
    "useDefineForClassFields": false,
    "lib": ["ES2022", "dom"]
  },
  "angularCompilerOptions": {
    "enableI18nLegacyMessageIdFormat": false,
    "strictInjectionParameters": true,
    "strictInputAccessModifiers": true,
    "strictTemplates": true
  }
}
```

## 环境配置

### 开发环境

```typescript
// src/environments/environment.ts
export const environment = {
  production: false,
  apiUrl: 'http://localhost:3000/api'
};
```

### 生产环境

```typescript
// src/environments/environment.prod.ts
export const environment = {
  production: true,
  apiUrl: 'https://api.example.com'
};
```

### 使用环境

```typescript
import { Component } from '@angular/core';
import { environment } from '../environments/environment';

@Component({
  selector: 'app-root',
  template: `<p>API: {{ apiUrl }}</p>`
})
export class AppComponent {
  apiUrl = environment.apiUrl;
}
```

## 常见问题

### npm 安装慢？

```bash
# 使用淘宝镜像
npm config set registry https://registry.npmmirror.com

# 或使用 nrm 管理镜像源
npm install -g nrm
nrm use taobao
```

### Node 版本不匹配？

```bash
# 使用 nvm 切换版本
nvm install 20
nvm use 20

# 或使用 nvm-windows
nvm install 20
nvm use 20
```

### 权限问题（Linux/macOS）

```bash
# 修复 npm 权限
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

## 卸载

```bash
# 卸载 Angular CLI
npm uninstall -g @angular/cli

# 删除项目
rm -rf my-app
```

## 下一步

- 创建第一个组件：参见「使用手册」
- 配置路由：了解 Angular 路由系统
- 学习响应式编程：RxJS 基础
