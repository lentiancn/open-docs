# Docker 安裝指南

本指南詳細介紹如何在各種作業系統上安裝 Docker Desktop 和 Docker Engine。

---

## 目錄

1. [Docker 簡介](#docker-簡介)
2. [版本說明](#版本說明)
3. [Windows 系統安裝](#windows-系統安裝)
4. [macOS 系統安裝](#macos-系統安裝)
5. [Linux 系統安裝](#linux-系統安裝)
6. [Docker Engine 安裝（無圖形界面）](#docker-engine-安裝-無圖形界面)
7. [驗證安裝](#驗證安裝)
8. [卸載 Docker](#卸載-docker)
9. [常見問題](#常見問題)

---

## Docker 簡介

Docker 是一個開源的容器化平台，用於開發、部署和運行應用程序。通過 Docker，您可以將應用程序及其依賴項打包成輕量級、可移植的容器，從而實現"一次構建，到處運行"。

### Docker Desktop 與 Docker Engine 的區別

| 特性 | Docker Desktop | Docker Engine |
|------|----------------|---------------|
| 適用平台 | Windows、macOS、Linux | Linux |
| 圖形界面 | 有 | 無 |
| 包含組件 | Docker Engine、Docker CLI、Docker Compose、Kubernetes 等 | Docker Engine、Docker CLI |
| 商業用途 | 超 250 人或年收入超 1000 萬美元需付費訂閱 | 免費（開源） |

> **重要提示**：在大型企業（超過 250 名員工或年收入超過 1000 萬美元）的商業使用 Docker Desktop 需要付費訂閱。個人使用，小型企業（員工少於 250 人且年收入低於 1000 萬美元）、教育用途和非商業開源項目免費。

---

## 版本說明

Docker 提供兩種更新通道：

- **穩定版（Stable）**：提供最新正式發布版本，適合一般用戶
- **測試版（Test）**：提供預發布版本，適合測試新功能（請謹慎使用）

---

## Windows 系統安裝

### 系統要求

#### WSL 2 後端（推薦）

- Windows 10 64 位：企業版，專業版或教育版 22H2（內部版本 19045）
- Windows 11 64 位：企業版，專業版或教育版 23H2（內部版本 22631）或更高版本
- WSL 版本 2.1.5 或更高版本
- 64 位處理器，具有二級地址轉換（SLAT）功能
- 4GB 系統內存
- 在 BIOS/UEFI 中啟用硬件虛擬化

#### Hyper-V 後端

- Windows 10 64 位：企業版，專業版或教育版 22H2（內部版本 19045）
- Windows 11 64 位：企業版，專業版或教育版 23H2（內部版本 22631）或更高版本
- 啟用 Hyper-V 和 Containers Windows 功能
- 64 位處理器，具有二級地址轉換（SLAT）功能
- 4GB 系統內存
- 在 BIOS/UEFI 中啟用硬件虛擬化

> **注意**：Docker Desktop 不支持 Windows Server（如 Windows Server 2019 或 Windows Server 2022）。如需在 Windows Server 上運行容器，請參閱 Microsoft 官方文檔。

> **重要提示**：運行 Windows 容器需要 Windows 10 或 Windows 11 專業版或企業版。Windows 家庭版或教育版只能運行 Linux 容器。

### 安裝步驟

1. **下載 Docker Desktop 安裝程序**：
   - [Docker Desktop for Windows - x86_64](https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe)

2. **雙擊安裝程序運行**。默認安裝路徑為 `C:\Program Files\Docker\Docker`。

3. **在配置頁面，選擇使用 WSL 2 而不是 Hyper-V**（或根據需要選擇 Hyper-V）。

4. **按照安裝向導的提示授權安裝程序並繼續安裝**。

5. **安裝成功後，選擇關閉完成安裝過程**。

6. **啟動 Docker Desktop**。

### 管理員權限

如果用戶賬戶不同於管理員賬戶，您需要將用戶添加到 **docker-users** 組才能訪問需要更高權限的功能：

1. 以**管理員**身份運行**計算機管理**
2. 轉到**本地用戶和組** > **組** > **docker-users**
3. 右鍵單擊將用戶添加到組
4. 註銷並重新登錄以使更改生效

---

## macOS 系統安裝

### 系統要求

#### Apple Silicon（M 系列芯片）

- macOS 11.0（Big Sur）或更高版本
- 至少 4GB 內存

#### Intel 芯片

- macOS 10.15（Catalina）或更高版本
- 至少 4GB 內存

### 安裝步驟

1. **下載 Docker Desktop for Mac**：
   - [Apple Silicon（M 系列）](https://desktop.docker.com/mac/main/arm64/Docker.dmg)
   - [Intel 芯片](https://desktop.docker.com/mac/main/amd64/Docker.dmg)

2. **雙擊 Docker.dmg 打開安裝程序**。

3. **將 Docker 應用拖放到 Applications 文件夾中**。

4. **從 Applications 文件夾或 Launchpad 啟動 Docker Desktop**。

5. **接受 Docker 訂閱服務協議**。

6. **等待 Docker Desktop 完成初始化**。

---

## Linux 系統安裝

### 支持的發行版

| 發行版 | x86_64/amd64 | arm64/aarch64 |
|--------|:------------:|:-------------:|
| Ubuntu | ✅ | ✅ |
| Debian | ✅ | ✅ |
| Fedora | ✅ | ✅ |
| CentOS | ✅ | ✅ |
| RHEL | ✅ | ✅ |

### Ubuntu 安裝

1. **卸載舊版本**：
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **更新 apt 包索引**：
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg lsb-release
```

3. **添加 Docker 的官方 GPG 密鑰**：
```bash
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
```

4. **設置穩定版倉庫**：
```bash
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

5. **安裝 Docker Engine**：
```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Debian 安裝

1. **卸載舊版本**：
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **安裝 Docker Engine**：
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Fedora 安裝

```bash
sudo dnf -y install dnf-plugins-core
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### CentOS 安裝

```bash
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

---

## Docker Engine 安裝（無圖形界面）

適用於任何 Linux 發行版的靜態二進制安裝：

1. **下載 Docker 二進制文件**：
```bash
curl -OL https://download.docker.com/linux/static/stable/x86_64/docker-24.0.7.tgz
```

2. **解壓**：
```bash
tar xzf docker-24.0.7.tgz
```

3. **將二進制文件移動到 PATH**：
```bash
sudo cp docker/* /usr/local/bin/
sudo rm -rf docker
```

4. **啟動 Docker 守護進程**：
```bash
sudo dockerd &
```

---

## 驗證安裝

無論在哪種操作系統上安裝，都可以通過以下命令驗證 Docker 是否正常工作：

```bash
docker --version          # 查看 Docker 版本
docker-compose --version  # 查看 Docker Compose 版本
docker run hello-world    # 運行測試容器
```

如果看到 "Hello from Docker!" 消息，表示安裝成功。

---

## 卸載 Docker

### Windows 卸載

1. 打開 Windows 設置 > 應用
2. 找到 Docker Desktop
3. 點擊卸載

### macOS 卸載

1. 從 Applications 文件夾中刪除 Docker 應用
2. 運行以下命令清理殘留文件：
```bash
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/Library/Application\ Support/Docker
```

### Linux 卸載

```bash
sudo apt-get remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

---

## 常見問題

### Q1: Docker Desktop 需要付費嗎？

Docker Desktop 對以下用途免費：
- 小型企業（員工少於 250 人且年收入低於 1000 萬美元）
- 個人用途
- 教育用途
- 非商業開源項目

商業用途（超過 250 名員工或年收入超過 1000 萬美元）需要付費訂閱。

### Q2: 如何在 Docker Desktop 中切換 Windows 和 Linux 容器？

從 Docker Desktop 菜單中，選擇：
- **Switch to Windows containers** - 使用 Windows 容器
- **Switch to Linux containers** - 使用 Linux 容器（默認）

### Q3: Docker Desktop 支持哪些 Windows 版本？

Docker Desktop 僅支持仍處於 Microsoft 服務時間線的 Windows 版本：
- Windows 10 企業版，專業版或教育版 22H2
- Windows 11 企業版，專業版或教育版 23H2

### Q4: 如何配置 Docker Desktop 的代理？

通過 Docker Desktop 設置 > 資源 > 代理進行配置。

---

## 相關連結

- [Docker 官方文檔](https://docs.docker.com/)
- [Docker Desktop 下載](https://www.docker.com/products/docker-desktop/)
- [Docker Hub](https://hub.docker.com/)
- [Docker 訂閱和定價](https://www.docker.com/pricing/)
