# Flutter - Manual de Usuario

Conceptos fundamentales de Flutter y ejemplos comunes de desarrollo.

## Creación de Proyectos

### Crear nuevo proyecto

```bash
# Crear nuevo proyecto
flutter create mi_app
cd mi_app

# Ejecutar proyecto
flutter run
```

### Estructura del proyecto

```
mi_app/
├── lib/
│   └── main.dart        # Punto de entrada
├── test/                 # Archivos de prueba
├── pubspec.yaml         # Archivo de configuración
├── android/            # Configuración de Android
├── ios/                 # Configuración de iOS
├── web/                 # Configuración web
└── README.md
```

## Widgets Básicos

### Componente de Texto

```dart
import 'package:flutter/material.dart';

Text(
  'Hola Flutter',
  style: TextStyle(
    fontSize: 24,
    color: Colors.blue,
  ),
)
```

### Botones

```dart
// Botón normal
ElevatedButton(
  onPressed: () {},
  child: Text('Clicar'),
)

// Botón de icono
IconButton(
  icon: Icon(Icons.add),
  onPressed: () {},
)

// Botón de texto
TextButton(
  onPressed: () {},
  child: Text('Botón de texto'),
)
```

### Imágenes

```dart
// Imagen local
Image.asset('assets/imagen.png')

// Imagen de red
Image.network('https://ejemplo.com/imagen.png')

// Icono
Icon(Icons.home, size: 48)
```

## Componentes de Layout

### Layout Lineal

```dart
// Layout horizontal
Row(
  children: [
    Text('A'),
    Text('B'),
    Text('C'),
  ],
)

// Layout vertical
Column(
  children: [
    Text('A'),
    Text('B'),
    Text('C'),
  ],
)
```

### Layout Flexible

```dart
// Distribución flexible del espacio
Row(
  children: [
    Expanded(
      flex: 1,
      child: Container(color: Colors.red),
    ),
    Expanded(
      flex: 2,
      child: Container(color: Colors.blue),
    ),
  ],
)
```

### Layout de Pila

```dart
Stack(
  children: [
    Container(color: Colors.red),
    Positioned(
      left: 10,
      top: 10,
      child: Text('Superpuesto'),
    ),
  ],
)
```

## Gestión de Estado

### StatefulWidget

```dart
class Contador extends StatefulWidget {
  @override
  _ContadorState createState() => _ContadorState();
}

class _ContadorState extends State<Contador> {
  int _cuenta = 0;

  void _incrementar() {
    setState(() {
      _cuenta++;
    });
  }

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        Text('Contador: $_cuenta'),
        ElevatedButton(
          onPressed: _incrementar,
          child: Text('Incrementar'),
        ),
      ],
    );
  }
}
```

### Gestión de Estado con Provider

```dart
// Crear Provider
class Contador extends ChangeNotifier {
  int _cuenta = 0;
  int get cuenta => _cuenta;

  void incrementar() {
    _cuenta++;
    notifyListeners();
  }
}

// Usar Provider
Consumer<Contador>(
  builder: (context, contador, child) {
    return Text('${contador.cuenta}');
  },
)
```

## Navegación

### Navegación Básica

```dart
// Navegar a nueva página
Navigator.push(
  context,
  MaterialPageRoute(builder: (context) => SegundaPantalla()),
);

// Volver
Navigator.pop(context);
```

### Configuración de Rutas

```dart
// Definir rutas
MaterialApp(
  routes: {
    '/': (context) => PaginaPrincipal(),
    '/detalle': (context) => PaginaDetalle(),
  },
)

// Navegar
Navigator.pushNamed(context, '/detalle');
```

## Solicitudes de Red

### Solicitud HTTP

```dart
import 'package:http/http.dart' as http;

Future<void> obtenerDatos() async {
  final respuesta = await http.get(Uri.parse('https://api.ejemplo.com/datos'));
  if (respuesta.statusCode == 200) {
    print(respuesta.body);
  }
}
```

### Solicitud con Dio

```dart
import 'package:dio/dio.dart';

final dio = Dio();
Respuesta respuesta = await dio.get('https://api.ejemplo.com/datos');
```

## Almacenamiento Local

### SharedPreferences

```dart
import 'package:shared_preferences/shared_preferences.dart';

// Guardar
Future<void> guardarDatos() async {
  final prefs = await SharedPreferences.getInstance();
  await prefs.setString('nombre', 'Flutter');
}

// Cargar
Future<void> cargarDatos() async {
  final prefs = await SharedPreferences.getInstance();
  String nombre = prefs.getString('nombre') ?? '';
}
```

## Widgets Comunes

### Lista

```dart
ListView.builder(
  itemCount: elementos.length,
  itemBuilder: (context, index) {
    return ListTile(
      title: Text(elementos[index].titulo),
    );
  },
)
```

### Formulario

```dart
TextFormField(
  decoration: InputDecoration(
    labelText: 'Usuario',
    hintText: 'Ingrese usuario',
  ),
  validator: (value) {
    if (value.isEmpty) {
      return 'Por favor ingrese usuario';
    }
    return null;
  },
)
```

### Diálogo

```dart
showDialog(
  context: context,
  builder: (context) => AlertDialog(
    title: Text('Confirmar'),
    content: Text('¿Está seguro de eliminar?'),
    actions: [
      TextButton(
        onPressed: () => Navigator.pop(context),
        child: Text('Cancelar'),
      ),
      TextButton(
        onPressed: () => Navigator.pop(context),
        child: Text('Confirmar'),
      ),
    ],
  ),
);
```

## Compilación y Publicación

### APK de Android

```bash
# Versión debug
flutter build apk --debug

# Versión release
flutter build apk --release
```

### iOS

```bash
# Simulador
flutter build ios --simulator --no-codesign

# Dispositivo
flutter build ios --release
```

### Web

```bash
flutter build web
```

## Mejores Prácticas

1. **Usar const**: Reducir reconstrucciones innecesarias
2. **Extraer Widgets**: Reutilizar código de UI
3. **Layouts apropiados**: Usar componentes de layout adecuados
4. **Gestión de estado**: Elegir solución de gestión de estado apropiada
5. **Manejo de errores**: Realizar manejo adecuado de excepciones

## Próximos Pasos

- Preguntas Frecuentes: Ver 4.Preguntas-Frecuentes.md
