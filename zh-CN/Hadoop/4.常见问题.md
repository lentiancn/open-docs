# Hadoop 常见问题

> Hadoop 使用过程中的常见问题解答

---

## 安装问题

### Q: 格式化 NameNode 失败？

**A**: 
- 检查 Java 是否正确安装：`java -version`
- 确认环境变量 JAVA_HOME 设置正确
- 删除临时目录后再试

### Q: DataNode 无法启动？

**A**:
- 检查网络连接
- 确认配置文件中的节点地址正确
- 查看日志排查：`tail -f $HADOOP_HOME/logs/hadoop-*-datanode-*.log`

### Q: 8088 端口无法访问？

**A**:
- 确认 YARN 已启动：`start-yarn.sh`
- 检查防火墙是否放行端口
- 查看 YARN 状态：`yarn resourcemanager -status`

---

## HDFS 问题

### Q: 上传文件失败？

**A**:
- 检查 DataNode 状态
- 确认目录权限
- 查看磁盘空间是否不足

### Q: 如何调整块大小？

**A**:
在 hdfs-site.xml 中配置：
```xml
<property>
    <name>dfs.blocksize</name>
    <value>134217728</value> <!-- 128MB -->
</property>
```

---

## MapReduce 问题

### Q: 作业一直处于 ACCEPTED 状态？

**A**:
- 检查 ResourceManager 是否正常
- 查看集群资源是否充足
- 检查队列配置

### Q: 如何优化 MapReduce 性能？

**A**:
- 合理设置 map 和 reduce 数量
- 使用压缩减少 I/O
- 调整 JVM 内存参数
- 使用 Combiner 和 Partitioner

---

## 性能问题

### Q: 集群运行缓慢？

**A**:
- 检查节点健康状态
- 增加节点数量
- 调整内存和 CPU 配置
- 优化数据倾斜

---

## 数据恢复

### Q: 如何恢复误删的数据？

**A**:
- 开启回收站功能（默认开启）
- 从回收站恢复：`hdfs dfs -mv /user/$USER/.Trash/Current/<path> <original_path>`
