# Docker ä½¿ç”¨æ‰‹å†Š

> ğŸ¯ æœ¬æ–‡è©³ç´°ä»‹ç´¹ Docker çš„æ ¸å¿ƒæ¦‚å¿µã€åŸºæœ¬ç”¨æ³•å’Œé–‹ç™¼æŒ‡å—
> 
> ğŸ“… æ›´æ–°æ™‚é–“ï¼š2026å¹´2æœˆ
> 
> ğŸ“– é©ç”¨ç‰ˆæœ¬ï¼šDocker 27.x

---

## 1. Docker æ ¸å¿ƒæ¦‚å¿µ

### 1.1 é¡åƒï¼ˆImageï¼‰

é¡åƒæ˜¯å”¯è®€æ¨¡æ¿ï¼Œç”¨æ–¼å‰µå»ºå®¹å™¨ã€‚

```bash
# æŸ¥çœ‹é¡åƒåˆ—è¡¨
docker images
docker image ls

# æ‹‰å–é¡åƒ
docker pull ubuntu:22.04
docker pull nginx:latest

# åˆªé™¤é¡åƒ
docker rmi ubuntu:22.04

# æ§‹å»ºé¡åƒ
docker build -t my-image:tag .
```

### 1.2 å®¹å™¨ï¼ˆContainerï¼‰

å®¹å™¨æ˜¯é¡åƒçš„é‹è¡Œå¯¦ä¾‹ã€‚

```bash
# å‰µå»ºä¸¦å•Ÿå‹•å®¹å™¨
docker run -it ubuntu /bin/bash
docker run -d nginx

# æŸ¥çœ‹å®¹å™¨åˆ—è¡¨
docker ps          # é‹è¡Œä¸­çš„å®¹å™¨
docker ps -a       # æ‰€æœ‰å®¹å™¨

# å•Ÿå‹•/åœæ­¢/é‡å•Ÿå®¹å™¨
docker start container_id
docker stop container_id
docker restart container_id

# åˆªé™¤å®¹å™¨
docker rm container_id
docker rm -f container_id    # å¼·åˆ¶åˆªé™¤

# é€²å…¥é‹è¡Œä¸­çš„å®¹å™¨
docker exec -it container_id /bin/bash

# æŸ¥çœ‹å®¹å™¨æ—¥èªŒ
docker logs -f container_id
```

---

## 2. é¡åƒæ“ä½œ

### 2.1 æ‹‰å–é¡åƒ

```bash
# æ‹‰å–æœ€æ–°ç‰ˆæœ¬
docker pull nginx

# æ‹‰å–æŒ‡å®šç‰ˆæœ¬
docker pull nginx:1.25
```

### 2.2 æ§‹å»ºé¡åƒ

```dockerfile
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

```bash
# æ§‹å»ºé¡åƒ
docker build -t my-app:tag .
```

---

## 3. å®¹å™¨æ“ä½œ

### 3.1 å‰µå»ºå’Œå•Ÿå‹•å®¹å™¨

```bash
# äº¤äº’å¼å®¹å™¨
docker run -it ubuntu /bin/bash

# å¾Œå°å®¹å™¨
docker run -d nginx

# ç«¯å£æ˜ å°„
docker run -d -p 8080:80 nginx

# ç’°å¢ƒè®Šé‡
docker run -e MYSQL_ROOT_PASSWORD=123456 mysql
```

### 3.2 å®¹å™¨ç®¡ç†

```bash
# å•Ÿå‹•/åœæ­¢
docker start container_id
docker stop container_id

# åˆªé™¤
docker rm container_id
docker rm -f container_id
```

---

## 4. Dockerfile ç·¨å¯«

### 4.1 åŸºç¤æŒ‡ä»¤

```dockerfile
# åŸºç¤é¡åƒ
FROM node:18-alpine

# è¨­ç½®å·¥ä½œç›®éŒ„
WORKDIR /app

# è¤‡è£½æ–‡ä»¶
COPY package*.json ./

# é‹è¡Œå‘½ä»¤
RUN npm install

# æš´éœ²ç«¯å£
EXPOSE 3000

# å•Ÿå‹•å‘½ä»¤
CMD ["npm", "start"]
```

### 4.2 å¤šéšæ®µæ§‹å»º

```dockerfile
# æ§‹å»ºéšæ®µ
FROM node:18 AS builder
WORKDIR /app
COPY . .
RUN npm run build

# ç”Ÿç”¢éšæ®µ
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

---

## 5. Docker Compose

### 5.1 åŸºç¤ docker-compose.yml

```yaml
version: '3.8'

services:
  web:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production

  db:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: secret
```

### 5.2 å¸¸ç”¨å‘½ä»¤

```bash
# å•Ÿå‹•æœå‹™
docker-compose up
docker-compose up -d

# åœæ­¢æœå‹™
docker-compose down

# æŸ¥çœ‹æ—¥èªŒ
docker-compose logs -f
```

---

## 6. ç¶²çµ¡ç®¡ç†

### 6.1 ç«¯å£æ˜ å°„

```bash
docker run -p 8080:80 nginx
# ä¸»æ©Ÿç«¯å£ 8080 -> å®¹å™¨ç«¯å£ 80
```

### 6.2 è‡ªå®šç¾©ç¶²çµ¡

```bash
# å‰µå»ºç¶²çµ¡
docker network create my-network

# é€£æ¥å®¹å™¨åˆ°ç¶²çµ¡
docker run --network my-network -d nginx
```

---

## 7. æ•¸æ“šç®¡ç†

### 7.1 Volume

```bash
# å‰µå»º volume
docker volume create my-volume

# æ›è¼‰ volume
docker run -v my-volume:/data nginx
```

### 7.2 Bind Mount

```bash
# æ›è¼‰ä¸»æ©Ÿç›®éŒ„
docker run -v /host/path:/container/path nginx
```

---

## 8. ç›£æ§å’Œèª¿è©¦

### 8.1 å®¹å™¨ç‹€æ…‹

```bash
# æŸ¥çœ‹è³‡æºä½¿ç”¨
docker stats
docker stats container_id

# è©³ç´°ä¿¡æ¯
docker inspect container_id
```

### 8.2 æ—¥èªŒ

```bash
# æŸ¥çœ‹æ—¥èªŒ
docker logs container_id

# å¯¦æ™‚æ—¥èªŒ
docker logs -f container_id
```

---

## ğŸ“š ç›¸é—œè³‡æº

- å®˜æ–¹æ–‡æª”ï¼šhttps://docs.docker.com
- Docker Composeï¼šhttps://docs.docker.com/compose/

---

*æœ¬æ–‡æª”ç”± AI åŠ©æ‰‹ç”Ÿæˆ*
