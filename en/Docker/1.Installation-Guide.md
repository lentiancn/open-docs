# Docker Installation Guide

This guide provides detailed instructions for installing Docker on all major platforms.

---

## Table of Contents

- [Docker Desktop (Recommended)](#docker-desktop-recommended)
- [Linux](#linux)
  - [Ubuntu/Debian](#ubuntudebian)
  - [CentOS/RHEL](#centosrhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
- [Windows](#windows)
- [Verification](#verification)
- [Post-Installation](#post-installation)
- [Uninstall Docker](#uninstall-docker)

---

## Docker Desktop (Recommended)

The easiest way to install Docker on macOS, Windows, and Linux. It includes Docker Engine, Docker CLI, Docker Compose, and all other components.

### System Requirements

**macOS:**
- Apple Silicon: macOS 11.0+, 4GB RAM minimum
- Intel: macOS 10.15+, 4GB RAM minimum

**Windows:**
- Windows 10/11 64-bit
- WSL2 (recommended) or Hyper-V

**Linux:**
- Major distributions: Ubuntu, Debian, Fedora, Arch Linux
- 4GB RAM minimum

### Download Links

- **macOS Apple Silicon**: [Docker Desktop for Mac (ARM64)](https://desktop.docker.com/mac/main/arm64/Docker.dmg)
- **macOS Intel**: [Docker Desktop for Mac (x86_64)](https://desktop.docker.com/mac/main/amd64/Docker.dmg)
- **Windows**: [Docker Desktop for Windows](https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe)
- **Linux**: See Linux installation below

---

## Linux

### Ubuntu/Debian

```bash
# 1. Update package index
sudo apt update

# 2. Install dependencies
sudo apt install -y ca-certificates curl gnupg lsb-release

# 3. Add Docker's official GPG key
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# 4. Add Docker repository
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# 5. Install Docker
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 6. Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# 7. Add current user to docker group (run Docker without sudo)
sudo usermod -aG docker $USER
```

**For Debian**, replace `ubuntu` with `debian` in the commands above.

### CentOS/RHEL

```bash
# 1. Install dependencies
sudo yum install -y yum-utils

# 2. Add Docker repository
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

# 3. Install Docker
sudo yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 4. Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# 5. Add current user to docker group
sudo usermod -aG docker $USER
```

### Fedora

```bash
# 1. Install dependencies
sudo dnf -y install dnf-plugins-core

# 2. Add Docker repository
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo

# 3. Install Docker
sudo dnf install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# 4. Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# 5. Add current user to docker group
sudo usermod -aG docker $USER
```

### Arch Linux

```bash
# 1. Install Docker
sudo pacman -S docker

# 2. Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# 3. Add current user to docker group
sudo usermod -aG docker $USER
```

---

## macOS

### Apple Silicon (M1/M2/M3)

**Method 1: Homebrew (Recommended)**
```bash
brew install --cask docker
```

**Method 2: Manual Download**
1. Download [Docker Desktop for Mac (Apple Silicon)](https://desktop.docker.com/mac/main/arm64/Docker.dmg)
2. Double-click to open the DMG
3. Drag Docker to Applications folder
4. Double-click Docker.app to start

### Intel Mac

```bash
brew install --cask docker
```

Or download [Docker Desktop for Mac (Intel)](https://desktop.docker.com/mac/main/amd64/Docker.dmg)

---

## Windows

### WSL2 (Recommended)

```powershell
# 1. Enable WSL2
wsl --install

# 2. Restart your computer

# 3. Install Docker in WSL2
sudo apt update
sudo apt install -y docker.io
sudo service docker start
sudo usermod -aG docker $USER
```

### Docker Desktop

1. Download [Docker Desktop for Windows](https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe)
2. Run the installer
3. Check "Use WSL2 instead of Hyper-V" (recommended)
4. Run Docker Desktop

---

## Verification

```bash
# Check Docker version
docker --version

# Check Docker Compose version
docker compose version

# Run test container
docker run hello-world

# Run interactive container
docker run -it ubuntu bash

# View Docker info
docker info
```

---

## Post-Installation

### Configure Docker to Run as Non-Root User (Linux)

```bash
# Create docker group (if not exists)
sudo groupadd docker

# Add user to docker group
sudo usermod -aG docker $USER

# Log out and log back in, or run:
newgrp docker
```

### Configure Docker to Start on Boot

```bash
# Enable Docker to start on boot
sudo systemctl enable docker

# Disable Docker from starting on boot
sudo systemctl disable docker
```

### Configure Registry Mirrors (China Region)

Create or edit `/etc/docker/daemon.json`:

```json
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com",
    "https://mirror.baidubce.com"
  ]
}
```

Then restart Docker:
```bash
sudo systemctl daemon-reload
sudo systemctl restart docker
```

**Windows (Docker Desktop):**
In Docker Desktop Settings -> Docker Engine, add the above configuration.

---

## Uninstall Docker

### Ubuntu/Debian

```bash
# Uninstall Docker
sudo apt purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# Remove data
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

### CentOS/RHEL/Fedora

```bash
# Uninstall Docker
sudo yum remove -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# Remove data
sudo rm -rf /var/lib/docker
```

### macOS

```bash
# Homebrew uninstall
brew uninstall --cask docker

# Manual uninstall
# 1. Drag Docker.app from Applications to Trash
# 2. Delete related data:
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/Library/Application\ Support/Docker
rm -rf ~/.docker
```

### Windows

1. Open Settings -> Apps
2. Find and uninstall "Docker Desktop"
3. Or in Docker Desktop: Settings -> Troubleshoot -> Clean / Purge data

---

## Version Notes

### Docker Desktop Subscription Agreement

> Important:
> - Docker Desktop is free for small businesses (fewer than 250 employees AND less than $10 million annual revenue), personal use, education, and non-commercial open source projects
> - Otherwise, professional use requires a paid subscription
> - Government entities also require paid subscriptions

### Supported Platforms

| Platform | x86_64/amd64 | arm64/aarch64 | arm (32-bit) | ppc64le | s390x |
| :--- | :----------: | :-----------: | :--------: | :-----: | :---: |
| Ubuntu | ✅ | ✅ | ✅ | ✅ | ✅ |
| Debian | ✅ | ✅ | ✅ | ✅ | |
| CentOS | ✅ | ✅ | | ✅ | |
| Fedora | ✅ | ✅ | | ✅ | |
| RHEL | ✅ | ✅ | | | ✅ |
| macOS | ✅ | ✅ | | | |
| Windows | ✅ | ✅ | | | |

---

## Next Steps

- [Usage Guide](./2.使用指南.md)
- Visit [Docker Official Documentation](https://docs.docker.com/)
