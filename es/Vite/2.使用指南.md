# Guía de Uso de Vite

Esta guía explica cómo usar Vite para construir aplicaciones web modernas.

## Inicio rápido

### Crear un proyecto

```bash
npm create vite@latest my-app -- --template vue
cd my-app
npm install
npm run dev
```

### Estructura del proyecto

```
my-app/
├── public/
│   └── favicon.ico
├── src/
│   ├── assets/
│   │   └── logo.png
│   ├── components/
│   │   └── HelloWorld.vue
│   ├── App.vue
│   ├── main.js
│   └── style.css
├── index.html
├── package.json
└── vite.config.js
```

### Archivo de entrada

```javascript
// main.js
import { createApp } from 'vue'
import App from './App.vue'
import './style.css'

createApp(App).mount('#app')
```

```html
<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite App</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
```

## Conceptos clave

### ESM nativo

Vite utiliza el soporte nativo de módulos ES del navegador, sin necesidad de empaquetar:

```javascript
// Importar módulo directamente
import { add } from './math.js'

console.log(add(2, 3))
```

### Reemplazo de módulos en caliente

Vite proporciona HMR ultrarrápido:

```javascript
// Los módulos se actualizan automáticamente
import { hot } from 'vite/hmr'

if (hot) {
  hot.accept()
}
```

### Compilación bajo demanda

Vite solo compila los archivos que realmente se necesitan:

```bash
# Primer inicio
VITE v4.0.0 ready in 300 ms

# Cuando cambia un archivo
VITE 4.0.0 hot updated in 1 ms
```

## Funciones comunes

### Importar CSS

```javascript
import './style.css'
import './variables.scss'
```

### Importar imágenes

```javascript
import imgUrl from './img.png'

document.getElementById('app').innerHTML = `<img src="${imgUrl}">`
```

### Importar JSON

```javascript
import data from './data.json'
console.log(data)
```

### Importación dinámica

```javascript
const module = await import('./module.js')
module.default()
```

## Soporte para Vue

### Componentes Vue

```vue
<template>
  <button @click="count++">Count: {{ count }}</button>
</template>

<script setup>
import { ref } from 'vue'

const count = ref(0)
</script>
```

### Plugin de Vue

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [vue()],
})
```

## Soporte para React

### Componentes React

```jsx
import { useState } from 'react'

function App() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

### Plugin de React

```javascript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
})
```

## Variables de entorno

### Definir variables

```
# .env
VITE_APP_TITLE=My App
VITE_API_BASE_URL=https://api.example.com
```

### Usar variables

```javascript
console.log(import.meta.env.VITE_APP_TITLE)
console.log(import.meta.env.VITE_API_BASE_URL)
```

### Variables específicas del entorno

```
# .env.development
VITE_API_URL=http://localhost:3000

# .env.production
VITE_API_URL=https://api.example.com
```

## Optimización de build

### División de código

```javascript
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          vendor: ['vue', 'vue-router'],
        },
      },
    },
  },
})
```

### Minificación

```javascript
export default defineConfig({
  build: {
    minify: 'terser',
    terserOptions: {
      compress: {
        drop_console: true,
      },
    },
  },
})
```

## Preguntas frecuentes

### ¿Cómo manejar alias?

```javascript
import path from 'path'

export default defineConfig({
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
})
```

### ¿Cómo manejar imágenes?

```javascript
export default defineConfig({
  assetsInclude: ['**/*.hdr'],
})
```

### ¿Cómo usar variables globales?

```javascript
export default defineConfig({
  define: {
    __APP_VERSION__: JSON.stringify('1.0.0'),
  },
})
```

## Recursos relacionados

- [Documentación oficial de Vite](https://vitejs.dev/)
- [Documentación de Vite en español](https://es.vitejs.dev/)
- [Documentación de Vue 3](https://vuejs.org/)
