# Yarn 使用指南

高效使用 Yarn 的完整指南。

---

## 基本命令

### 初始化项目

```bash
# 创建 package.json
yarn init
```

### 安装依赖

```bash
# 安装所有依赖
yarn
# 或
yarn install

# 安装特定包
yarn add lodash

# 安装为开发依赖
yarn add -D jest

# 安装特定版本
yarn add lodash@4.17.21
```

### 移除包

```bash
yarn remove lodash
```

### 更新包

```bash
# 更新特定包
yarn upgrade lodash

# 更新到最新
yarn upgrade lodash@latest
```

---

## Yarn 1 (Classic) 特定命令

### 脚本

```bash
# 运行 package.json 中的脚本
yarn run build

# 列出可用脚本
yarn run
```

### 工作区

```bash
# 在所有工作区运行脚本
yarn workspaces run build
```

---

## Yarn 2/3/4 (Berry) 特定命令

### 交互式升级

```bash
# 交互式升级模式
yarn up

# 升级特定包
yarn up lodash
```

### 工作区命令

```bash
# 在工作区运行命令
yarn workspace my-app build
```

---

## 配置

### .yarnrc.yml (Berry)

```yaml
enableGlobalCache: false
nodeLinker: node-modules
```

---

## 常见选项

### 全局安装

```bash
# 全局安装包
yarn global add <package>

# 列出全局包
yarn global list
```

---

## 故障排除

### 清除缓存

```bash
# 清除 yarn 缓存
yarn cache clean
```

### 重置项目

```bash
# 移除 node_modules 和 lock 文件
rm -rf node_modules yarn.lock
yarn install
```

---

## npm 迁移

| npm | Yarn |
|-----|------|
| npm install | yarn |
| npm install <pkg> | yarn add <pkg> |
| npm install -D <pkg> | yarn add -D <pkg> |
| npm uninstall <pkg> | yarn remove <pkg> |
| npm update | yarn upgrade |

---

## 下一步

- 探索 [Yarn 文档](https://yarnpkg.com/)
