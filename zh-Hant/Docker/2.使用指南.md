# Docker 使用指南

本文檔詳細介紹 Docker 的使用方法。

---

## 基本概念

| 概念 | 說明 |
|------|------|
| **映像檔 (Image)** | 用於建立容器的唯讀模板 |
| **容器 (Container)** | 映像檔的執行個體 |
| **倉庫 (Registry)** | 儲存映像檔的地方（如 Docker Hub） |

---

## 映像檔操作

### 拉取映像檔

```bash
docker pull nginx              # 拉取最新
docker pull nginx:alpine       # 拉取特定標籤
```

### 列出映像檔

```bash
docker images                  # 列出所有映像檔
```

### 刪除映像檔

```bash
docker rmi nginx               # 刪除映像檔
```

---

## 容器操作

### 執行容器

```bash
docker run -d nginx                           # 背景執行
docker run -d -p 8080:80 nginx                # 對應連接埠
docker run -d -v /my/data:/data nginx        # 掛載磁區
docker run -d -e APP_ENV=prod nginx          # 環境變數
docker run -it ubuntu bash                    # 互動模式
```

### 管理容器

```bash
docker ps                     # 列出執行中的容器
docker ps -a                 # 列出所有容器
docker stop <id>             # 停止容器
docker start <id>           # 啟動容器
docker rm <id>              # 刪除容器
docker logs <id>            # 查看日誌
docker exec -it <id> bash   # 進入容器
```

---

## Docker Compose

### 基本範例

```yaml
version: '3.8'

services:
  web:
    image: nginx:alpine
    ports:
      - "80:80"
  
  db:
    image: postgres:15
    environment:
      - POSTGRES_PASSWORD=secret
```

### 常用指令

```bash
docker compose up -d          # 啟動
docker compose down           # 停止
docker compose logs -f       # 查看日誌
```

---

## 常見應用

### 執行 Nginx

```bash
docker run -d -p 80:80 nginx:alpine
```

### 執行 MySQL

```bash
docker run -d \
  --name mysql \
  -e MYSQL_ROOT_PASSWORD=secret \
  -e MYSQL_DATABASE=app \
  -v mysql-data:/var/lib/mysql \
  -p 3306:3306 \
  mysql:8
```

### 執行 PostgreSQL

```bash
docker run -d \
  --name postgres \
  -e POSTGRES_PASSWORD=secret \
  -e POSTGRES_DB=app \
  -p 5432:5432 \
  postgres:15
```

---

## 故障排除

### 容器無法啟動

```bash
docker logs <container>        # 查看日誌
docker inspect <container>     # 檢查詳情
```

---

## 下一步

- 探索 [Docker Hub](https://hub.docker.com/)
