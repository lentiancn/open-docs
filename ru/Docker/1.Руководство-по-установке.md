# Docker Руководство по установке

Это руководство содержит подробные инструкции по установке Docker Desktop и Docker Engine на различных операционных системах.

---

## Содержание

1. [Введение в Docker](#введение-в-docker)
2. [Информация о версиях](#информация-о-версиях)
3. [Установка в Windows](#установка-в-windows)
4. [Установка в macOS](#установка-в-macos)
5. [Установка в Linux](#установка-в-linux)
6. [Установка Docker Engine (только CLI)](#установка-docker-engine-только-cli)
7. [Проверка установки](#проверка-установки)
8. [Удаление Docker](#удаление-docker)
9. [Часто задаваемые вопросы](#часто-задаваемые-вопросы)

---

## Введение в Docker

Docker — это платформа с открытым исходным кодом для разработки, развёртывания и запуска приложений. С помощью Docker вы можете упаковать приложения и их зависимости в лёгкие переносимые контейнеры, реализуя принцип «собрал один раз — запускай везде».

### Различия между Docker Desktop и Docker Engine

| Функция | Docker Desktop | Docker Engine |
|---------|----------------|---------------|
| Поддерживаемые платформы | Windows, macOS, Linux | Linux |
| Графический интерфейс | Да | Нет |
| Включённые компоненты | Docker Engine, Docker CLI, Docker Compose, Kubernetes и др. | Docker Engine, Docker CLI |
| Коммерческое использование | Требуется платная подписка при >250 сотрудников или >$10 млн дохода | Бесплатно (Open Source) |

> **Важное примечание**: Коммерческое использование Docker Desktop в крупных компаниях (более 250 сотрудников ИЛИ более 10 млн долларов США годового дохода) требует платной подписки. Личное использование, малый бизнес (менее 250 сотрудников И менее 10 млн долларов дохода), образовательные и некоммерческие проекты с открытым исходным кодом — бесплатно.

---

## Информация о версиях

Docker предоставляет два канала обновлений:

- **Стабильная версия (Stable)**: Последние общедоступные версии для обычных пользователей
- **Тестовая версия (Test)**: Предрелизные версии для тестирования новых функций (используйте с осторожностью)

---

## Установка в Windows

### Системные требования

#### Бэкенд WSL 2 (рекомендуется)

- Windows 10 64-бит: Enterprise, Pro или Education версия 22H2 (сборка 19045)
- Windows 11 64-бит: Enterprise, Pro или Education версия 23H2 (сборка 22631) или выше
- WSL версии 2.1.5 или выше
- 64-битный процессор с поддержкой Second Level Address Translation (SLAT)
- 4 ГБ оперативной памяти
- Аппаратная виртуализация включена в BIOS/UEFI

#### Бэкенд Hyper-V

- Windows 10 64-бит: Enterprise, Pro или Education версия 22H2 (сборка 19045)
- Windows 11 64-бит: Enterprise, Pro или Education версия 23H2 (сборка 22631) или выше
- Включены функции Hyper-V и Containers в Windows
- 64-битный процессор с поддержкой Second Level Address Translation (SLAT)
- 4 ГБ оперативной памяти
- Аппаратная виртуализация включена в BIOS/UEFI

> **Примечание**: Docker Desktop не поддерживается на Windows Server (например, Windows Server 2019 или Windows Server 2022). Для запуска контейнеров на Windows Server обратитесь к официальной документации Microsoft.

> **Важное примечание**: Для запуска Windows-контейнеров требуется Windows 10 или Windows 11 Professional или Enterprise. Windows Home или Education могут запускать только Linux-контейнеры.

### Шаги установки

1. **Скачайте установщик Docker Desktop**:
   - [Docker Desktop для Windows - x86_64](https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe)

2. **Дважды щёлкните по установщику для запуска**. Путь установки по умолчанию: `C:\Program Files\Docker\Docker`.

3. **На странице конфигурации выберите «Использовать WSL 2 вместо Hyper-V»** (или выберите Hyper-V при необходимости).

4. **Следуйте инструкциям мастера установки для авторизации и продолжения**.

5. **После успешной установки нажмите «Закрыть» для завершения**.

6. **Запустите Docker Desktop**.

### Права администратора

Если ваша учётная запись отличается от учётной записи администратора, вам нужно добавить пользователя в группу **docker-users** для доступа к функциям, требующим повышенных привилегий:

1. Запустите **Управление компьютером** от имени **администратора**
2. Перейдите в **Локальные пользователи и группы** > **Группы** > **docker-users**
3. Щёлкните правой кнопкой мыши, чтобы добавить пользователя в группу
4. Выйдите из системы и войдите снова для применения изменений

---

## Установка в macOS

### Системные требования

#### Apple Silicon (процессоры серии M)

- macOS 11.0 (Big Sur) или выше
- Не менее 4 ГБ оперативной памяти

#### Процессоры Intel

- macOS 10.15 (Catalina) или выше
- Не менее 4 ГБ оперативной памяти

### Шаги установки

1. **Скачайте Docker Desktop для Mac**:
   - [Apple Silicon (серия M)](https://desktop.docker.com/mac/main/arm64/Docker.dmg)
   - [Процессоры Intel](https://desktop.docker.com/mac/main/amd64/Docker.dmg)

2. **Дважды щёлкните по Docker.dmg для открытия установщика**.

3. **Перетащите приложение Docker в папку Applications**.

4. **Запустите Docker Desktop из Applications или Launchpad**.

5. **Примите Соглашение о подписке Docker**.

6. **Дождитесь завершения инициализации Docker Desktop**.

---

## Установка в Linux

### Поддерживаемые дистрибутивы

| Дистрибутив | x86_64/amd64 | arm64/aarch64 |
|--------------|:------------:|:-------------:|
| Ubuntu | ✅ | ✅ |
| Debian | ✅ | ✅ |
| Fedora | ✅ | ✅ |
| CentOS | ✅ | ✅ |
| RHEL | ✅ | ✅ |

### Установка в Ubuntu

1. **Удалите старые версии**:
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **Обновите индекс пакетов apt**:
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg lsb-release
```

3. **Добавьте официальный GPG-ключ Docker**:
```bash
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
```

4. **Настройте стабильный репозиторий**:
```bash
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

5. **Установите Docker Engine**:
```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Установка в Debian

1. **Удалите старые версии**:
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **Установите Docker Engine**:
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Установка в Fedora

```bash
sudo dnf -y install dnf-plugins-core
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Установка в CentOS

```bash
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

---

## Установка Docker Engine (только CLI)

Установка статических бинарных файлов для любого дистрибутива Linux:

1. **Скачайте бинарные файлы Docker**:
```bash
curl -OL https://download.docker.com/linux/static/stable/x86_64/docker-24.0.7.tgz
```

2. **Распакуйте**:
```bash
tar xzf docker-24.0.7.tgz
```

3. **Переместите бинарные файлы в PATH**:
```bash
sudo cp docker/* /usr/local/bin/
sudo rm -rf docker
```

4. **Запустите демон Docker**:
```bash
sudo dockerd &
```

---

## Проверка установки

Независимо от операционной системы, проверьте работу Docker:

```bash
docker --version          # Показать версию Docker
docker-compose --version  # Показать версию Docker Compose
docker run hello-world    # Запустить тестовый контейнер
```

Если вы видите сообщение «Hello from Docker!», установка прошла успешно.

---

## Удаление Docker

### Windows

1. Откройте Параметры Windows > Приложения
2. Найдите Docker Desktop
3. Нажмите «Удалить»

### macOS

1. Удалите приложение Docker из папки Applications
2. Выполните следующее для очистки остаточных файлов:
```bash
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/Library/Application\ Support/Docker
```

### Linux

```bash
sudo apt-get remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

---

## Часто задаваемые вопросы

### Q1: Требуется ли оплата за Docker Desktop?

Docker Desktop бесплатен для:
- Малого бизнеса (менее 250 сотрудников И менее 10 млн долларов дохода)
- Личного использования
- Образования
- Некоммерческих проектов с открытым исходным кодом

Коммерческое использование (более 250 сотрудников ИЛИ более 10 млн долларов дохода) требует платной подписки.

### Q2: Как переключиться между Windows и Linux контейнерами в Docker Desktop?

В меню Docker Desktop выберите:
- **Switch to Windows containers** — использовать Windows-контейнеры
- **Switch to Linux containers** — использовать Linux-контейнеры (по умолчанию)

### Q3: Какие версии Windows поддерживает Docker Desktop?

Docker Desktop поддерживает только версии Windows, находящиеся в рамках поддержки Microsoft:
- Windows 10 Enterprise, Pro или Education 22H2
- Windows 11 Enterprise, Pro или Education 23H2

### Q4: Как настроить прокси для Docker Desktop?

Настройте прокси через Параметры Docker Desktop > Ресурсы > Прокси.

---

## Полезные ссылки

- [Официальная документация Docker](https://docs.docker.com/)
- [Скачать Docker Desktop](https://www.docker.com/products/docker-desktop/)
- [Docker Hub](https://hub.docker.com/)
- [Подписки и цены Docker](https://www.docker.com/pricing/)
