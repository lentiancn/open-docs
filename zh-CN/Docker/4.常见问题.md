# Docker å¸¸è§é—®é¢˜

> ğŸ¯ Docker å¸¸è§é—®é¢˜è§£ç­”

---

## å®‰è£…é—®é¢˜

### Q: Docker Desktop åœ¨ Windows ä¸Šå¯åŠ¨å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨ BIOS ä¸­å¯ç”¨è™šæ‹ŸåŒ–
2. å®‰è£…/æ›´æ–° WSL 2ï¼š
   ```powershell
   wsl --install
   wsl --update
   ```
3. é‡å¯ç”µè„‘
4. æ£€æŸ¥æ˜¯å¦æœ‰å†²çªè½¯ä»¶ï¼ˆVirtualBoxã€VMwareï¼‰

---

### Q: å‡ºç° "docker: permission denied" é”™è¯¯ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å°†ç”¨æˆ·æ·»åŠ åˆ° docker ç»„
sudo usermod -aG docker $USER

# æ³¨é”€å¹¶é‡æ–°ç™»å½•
```

---

### Q: å¦‚ä½•æŸ¥çœ‹ Docker ç‰ˆæœ¬ï¼Ÿ

```bash
docker --version
docker-compose --version
docker info
```

---

## é•œåƒé—®é¢˜

### Q: å¦‚ä½•å‡å° Docker é•œåƒå¤§å°ï¼Ÿ

**æœ€ä½³å®è·µ**ï¼š
1. ä½¿ç”¨ alpine åŸºç¡€é•œåƒ
2. ä½¿ç”¨å¤šé˜¶æ®µæ„å»º
3. æœ€å°åŒ–å±‚æ•°
4. åœ¨åŒä¸€å±‚æ¸…ç†

```dockerfile
# å¥½çš„ä¾‹å­
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install --production
COPY . .
```

---

### Q: å¦‚ä½•ä¸ä½¿ç”¨ç¼“å­˜æ„å»ºé•œåƒï¼Ÿ

```bash
docker build --no-cache -t my-image .
```

---

### Q: å¦‚ä½•åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒï¼Ÿ

```bash
docker image prune -a
```

---

## å®¹å™¨é—®é¢˜

### Q: å¦‚ä½•ä¿æŒå®¹å™¨è¿è¡Œï¼Ÿ

```bash
# æ–¹æ³• 1ï¼šè·Ÿè¸ªæ—¥å¿—
docker run -d nginx tail -f /dev/null

# æ–¹æ³• 2ï¼šä½¿ç”¨ sleep
docker run -d nginx sleep infinity
```

---

### Q: å®¹å™¨å¯åŠ¨åç«‹å³é€€å‡ºï¼Ÿ

**åŸå› **ï¼š
1. æ²¡æœ‰å‰å°è¿›ç¨‹
2. è¿›ç¨‹å·²ç»“æŸ

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# äº¤äº’å¼è¿è¡ŒæŸ¥çœ‹é”™è¯¯
docker run -it image_name /bin/bash

# ä¿æŒå®¹å™¨è¿è¡Œ
docker run -d image_name tail -f /dev/null
```

---

### Q: å¦‚ä½•è¿›å…¥è¿è¡Œä¸­çš„å®¹å™¨ï¼Ÿ

```bash
docker exec -it container_id /bin/bash
```

---

### Q: å¦‚ä½•å¤åˆ¶æ–‡ä»¶åˆ°/ä»å®¹å™¨ï¼Ÿ

```bash
# ä»å®¹å™¨å¤åˆ¶åˆ°ä¸»æœº
docker cp container_id:/path/file.txt ./

# ä»ä¸»æœºå¤åˆ¶åˆ°å®¹å™¨
docker cp ./file.txt container_id:/path/
```

---

## ç½‘ç»œé—®é¢˜

### Q: å¦‚ä½•ä»ä¸»æœºè®¿é—®å®¹å™¨ï¼Ÿ

ä½¿ç”¨ç«¯å£æ˜ å°„ï¼š
```bash
docker run -p 8080:80 nginx
# é€šè¿‡ http://localhost:8080 è®¿é—®
```

---

### Q: å¦‚ä½•è¿æ¥å®¹å™¨ï¼Ÿ

åˆ›å»ºç½‘ç»œï¼š
```bash
docker network create my-network
docker run --network my-network -d nginx
docker run --network my-network -d my-app
```

åŒä¸€ç½‘ç»œçš„å®¹å™¨å¯ä»¥é€šè¿‡å®¹å™¨åé€šä¿¡ã€‚

---

## Volume é—®é¢˜

### Q: å¦‚ä½•æŒä¹…åŒ–æ•°æ®ï¼Ÿ

ä½¿ç”¨ volumeï¼š
```bash
# å‘½å volume
docker volume create my-data
docker run -v my-data:/data nginx

# Bind mount
docker run -v /host/path:/container/path nginx
```

---

### Q: å¦‚ä½•åœ¨å®¹å™¨ä¹‹é—´å…±äº«æ•°æ®ï¼Ÿ

```bash
# åˆ›å»ºå…±äº« volume
docker volume create shared-data

# åœ¨å¤šä¸ªå®¹å™¨ä¸­ä½¿ç”¨
docker run -v shared-data:/data1 nginx
docker run -v shared-data:/data2 alpine
```

---

## Docker Compose

### Q: ä»£ç ä¿®æ”¹åå¦‚ä½•é‡æ–°æ„å»ºï¼Ÿ

```bash
docker-compose up -d --build
```

---

### Q: å¦‚ä½•æŸ¥çœ‹æ—¥å¿—ï¼Ÿ

```bash
docker-compose logs -f
docker-compose logs -f service_name
```

---

### Q: å¦‚ä½•æ‰©å±•æœåŠ¡ï¼Ÿ

```bash
docker-compose up -d --scale web=3
```

---

## æ€§èƒ½é—®é¢˜

### Q: Docker å¾ˆæ…¢ / å ç”¨å¤ªå¤šç£ç›˜ï¼Ÿ

**è§£å†³æ–¹æ¡ˆ**ï¼š

1. æ¸…ç†ï¼š
```bash
docker system prune -a
```

2. æŸ¥çœ‹ç£ç›˜ä½¿ç”¨ï¼š
```bash
docker system df
```

3. åˆ é™¤æœªä½¿ç”¨çš„ volumeï¼š
```bash
docker volume prune
```

---

### Q: å¦‚ä½•é™åˆ¶å®¹å™¨èµ„æºï¼Ÿ

```bash
# å†…å­˜é™åˆ¶
docker run -m 512m nginx

# CPU é™åˆ¶
docker run --cpus=0.5 nginx

# åœ¨ docker-compose ä¸­ï¼š
services:
  app:
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '0.5'
```

---

## æ•…éšœæ’é™¤

### Q: å¦‚ä½•è°ƒè¯•å¤±è´¥çš„å®¹å™¨ï¼Ÿ

```bash
# æŸ¥çœ‹æ—¥å¿—
docker logs container_id

# æ£€æŸ¥å®¹å™¨
docker inspect container_id

# äº¤äº’å¼ç»ˆç«¯
docker run -it image_name /bin/bash
```

---

### Q: å®¹å™¨ç½‘ç»œä¸å·¥ä½œï¼Ÿ

```bash
# é‡å¯ Docker
sudo systemctl restart docker

# æ£€æŸ¥ç½‘ç»œ
docker network ls
docker network inspect bridge
```

---

### Q: "ç«¯å£å·²è¢«å ç”¨"ï¼Ÿ

```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„ç¨‹åº
netstat -ano | findstr :8080

# ä½¿ç”¨ä¸åŒç«¯å£
docker run -p 8081:80 nginx
```

---

## å®‰å…¨é—®é¢˜

### Q: å¦‚ä½•æ‰«ææ¼æ´ï¼Ÿ

```bash
docker scan my-image
```

---

### Q: åº”è¯¥ä»¥ root è¿è¡Œå—ï¼Ÿ

ä¸åº”è¯¥ï¼Œåˆ›å»ºé root ç”¨æˆ·ï¼š

```dockerfile
FROM node:18-alpine
RUN addgroup -g 1000 appgroup && \
    adduser -u 1000 -G appgroup -D appuser
USER appuser
```

---

## Docker vs è™šæ‹Ÿæœº

### Q: Docker å’Œè™šæ‹Ÿæœºçš„åŒºåˆ«ï¼Ÿ

| æ–¹é¢ | Docker | è™šæ‹Ÿæœº |
|------|--------|--------|
| æ“ä½œç³»ç»Ÿ | å…±äº«ä¸»æœºå†…æ ¸ | ç‹¬ç«‹æ“ä½œç³»ç»Ÿ |
| å¤§å° | MB çº§åˆ« | GB çº§åˆ« |
| å¯åŠ¨ | ç§’çº§ | åˆ†é’Ÿçº§ |
| éš”ç¦» | å®¹å™¨çº§åˆ« | å®Œå…¨éš”ç¦» |

---

## å­¦ä¹ èµ„æº

### å®˜æ–¹æ–‡æ¡£
- https://docs.docker.com

### äº¤äº’å¼å®éªŒå®¤
- https://labs.play-with-docker.com

### ç¤¾åŒº
- Docker ç¤¾åŒºï¼šhttps://www.docker.com/community
- Docker è®ºå›ï¼šhttps://forums.docker.com

---

*æœ¬æ–‡æ¡£ç”± AI åŠ©æ‰‹ç”Ÿæˆ*
