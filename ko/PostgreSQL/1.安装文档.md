# PostgreSQL 설치 가이드

PostgreSQL은 강력한 오픈 소스 객체 관계형 데이터베이스 시스템입니다. 이 가이드에서는 모든 환경에서의 설치 방법을 설명합니다.

## 버전 정보

| 버전 | 상태 | 설명 |
|------|------|------|
| PostgreSQL 16.x | ✅ 현재 | 최신 안정 버전 |
| PostgreSQL 15.x | ✅ 지원 | 안정 버전 |
| PostgreSQL 14.x | ⚠️ 유지보수 | 보안 업데이트 |
| PostgreSQL 13.x | ⚠️ 유지보수 | 장기 지원 |
| PostgreSQL 12.x | ❌ 구버전 | 지원 중단 |

> **중요**: 이 가이드는 primarily **PostgreSQL 16.x**을 대상으로 합니다. 새 프로젝트에는 최신 버전을 사용하는 것이 좋습니다.

## 시스템 요구사항

### 하드웨어 요구사항

| 요구사항 | 최소 | 권장 |
|---------|------|------|
| CPU | 1코어 | 2+코어 |
| 메모리 | 1GB | 4+GB |
| 디스크 | 10GB | 50+GB |

### 지원 운영체제

- **Linux**: Ubuntu, Debian, CentOS, RHEL, Fedora, openSUSE
- **Windows**: Windows Server 2016+, Windows 10+
- **macOS**: 10.14+

## 설치 방법

### 방법 1: Windows 설치

#### 1. 설치 프로그램 사용 (권장)

1. PostgreSQL 설치 프로그램 다운로드: https://www.postgresql.org/download/windows/
2. postgresql-16.x-x-windows-x64.exe 실행
3. 설치 마법사 따라 설치 완료
4. 슈퍼유저 postgres의 비밀번호 설정

#### 2. Chocolatey 사용

```powershell
# PostgreSQL 설치
choco install postgresql

# 특정 버전 설치
choco install postgresql --version=16.0
```

#### 3. ZIP 패키지 사용

```powershell
# ZIP 패키지 다운로드
# C:\Program Files\PostgreSQL\16에 압축 해제

# 데이터베이스 초기화
"C:\Program Files\PostgreSQL\16\bin\initdb" -D "C:\Program Files\PostgreSQL\16\data"

# 서비스 시작
"C:\Program Files\PostgreSQL\16\bin\pg_ctl" -D "C:\Program Files\PostgreSQL\16\data" -l logfile start
```

### 방법 2: macOS 설치

#### 1. Homebrew 사용 (권장)

```bash
# PostgreSQL 설치
brew install postgresql@16

# 서비스 시작
brew services start postgresql@16

# 서비스 중지
brew services stop postgresql@16
```

#### 2. PostgreSQL.app 사용

1. PostgreSQL.app 다운로드: https://postgresapp.com/
2. Applications 폴더로 드래그
3. 클릭하여 시작

#### 3. MacPorts 사용

```bash
sudo port install postgresql16
sudo port load postgresql16-server
```

### 방법 3: Linux 설치

#### Ubuntu/Debian

```bash
# PostgreSQL 공식 저장소 추가
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'

# 키 가져오기
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -

# 패키지 목록 업데이트
sudo apt-get update

# PostgreSQL 설치
sudo apt-get install -y postgresql-16

# 서비스 시작
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

#### CentOS/RHEL

```bash
# RPM 저장소 설치
sudo yum install -y https://download.postgresql.org/pub/repos/yum/16/redhat/rhel-9-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# PostgreSQL 설치
sudo yum install -y postgresql16-server

# 데이터베이스 초기화
sudo /usr/pgsql-16/bin/postgresql-16-setup initdb

# 서비스 시작
sudo systemctl start postgresql-16
sudo systemctl enable postgresql-16
```

#### Fedora

```bash
# PostgreSQL 설치
sudo dnf install -y postgresql-server postgresql-contrib

# 데이터베이스 초기화
sudo postgresql-setup --initdb

# 서비스 시작
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

### 방법 4: Docker 설치

```bash
# 이미지 풀
docker pull postgres:16

# 컨테이너 실행
docker run -d \
  --name postgres \
  -e POSTGRES_PASSWORD=mysecretpassword \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_DB=mydb \
  -p 5432:5432 \
  -v postgres_data:/var/lib/postgresql/data \
  postgres:16
```

#### Docker Compose

```yaml
version: '3.8'

services:
  postgres:
    image: postgres:16
    container_name: postgres
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: mysecretpassword
      POSTGRES_DB: mydb
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
```

실행:

```bash
docker-compose up -d
```

## 설치 후 설정

### PostgreSQL에 연결

```bash
# psql 사용
sudo -u postgres psql

# 또는
psql -U postgres -h localhost -p 5432
```

### 데이터베이스 생성

```sql
CREATE DATABASE mydb;

-- 사용자 생성
CREATE USER myuser WITH PASSWORD 'mypassword';

-- 권한 부여
GRANT ALL PRIVILEGES ON DATABASE mydb TO myuser;
```

### 설정 파일

#### postgresql.conf

```properties
#监听주소
listen_addresses = '*'

# 포트
port = 5432

# 최대 연결 수
max_connections = 100

# 공유 버퍼
shared_buffers = 128MB

# 워크 메모리
work_mem = 4MB
```

#### pg_hba.conf

```properties
# 로컬 연결 허용
host    all             all             127.0.0.1/32            trust
host    all             all             ::1/128                 trust

# 원격 연결 허용
host    all             all             0.0.0.0/0              md5
host    all             all             ::/0                    md5
```

### 원격 연결 설정

```sql
-- 원격 연결 허용
ALTER SYSTEM SET listen_addresses = '*';

-- 설정 다시 로드
SELECT pg_reload_conf();
```

## 자주 묻는 질문

### 연결이 거부됨?

방화벽 확인:

```bash
# Ubuntu
sudo ufw allow 5432/tcp

# CentOS
sudo firewall-cmd --add-port=5432/tcp --permanent
sudo firewall-cmd --reload
```

### postgres 비밀번호를 잊음?

```bash
# PostgreSQL 중지
sudo systemctl stop postgresql

# 권한 건너뛰기 모드로 시작
sudo -u postgres /usr/lib/postgresql/16/bin/pg_ctl -D /var/lib/postgresql/16/main -m fast stop

# 비밀번호 변경
sudo -u postgres psql -c "ALTER USER postgres PASSWORD 'newpassword';"
```

### 데이터베이스가 시작되지 않음?

로그 확인:

```bash
# 로그 보기
tail -f /var/log/postgresql/postgresql-16-main.log
```

## 관련 링크

- [PostgreSQL 공식 웹사이트](https://www.postgresql.org/)
- [PostgreSQL 문서](https://www.postgresql.org/docs/)
- [pgAdmin 도구](https://www.pgadmin.org/)
