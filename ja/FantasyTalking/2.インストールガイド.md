# FantasyTalking - インストールガイド

完全なインストールと設定ガイド。

## 環境要件

### ハードウェア

- **GPU**：NVIDIA 8GB以上（16GB推奨）
- **ストレージ**：20GB以上の空き容量
- **RAM**：16GB以上

### ソフトウェア

- **OS**：Linux (Ubuntu 20.04+)、Windows 10/11、macOS
- **Python**：3.8 - 3.10
- **CUDA**：11.8以上
- **cuDNN**：8.0以上

## インストール

### 方法1：ソースからインストール（推奨）

```bash
# 1. リポジトリをクローン
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking

# 2. 仮想環境を作成（推奨）
python -m venv venv
source venv/bin/activate  # Linux/macOS
# または
venv\Scripts\activate  # Windows

# 3. 依存関係をインストール
pip install -r requirements.txt

# 4. 事前学習済みモデルをダウンロード
python download_models.py
```

### 方法2：Docker（推奨）

```bash
# 1. イメージをプル
docker pull fantasytalking/fantasytalking:latest

# 2. コンテナを実行
docker run -it --gpus all -v /your/data:/data fantasytalking/fantasytalking:latest
```

### 方法3：pip

```bash
pip install fantasytalking
```

## 確認

インストール後、次のコマンドを実行して確認：

```bash
python -c "import fantasytalking; print(fantasytalking.__version__)"
```

## 設定

### 設定ファイル

プロジェクトルートに `config.yaml` を作成：

```yaml
model:
  checkpoint_path: "./models/checkpoint.pth"
  face_enhancer: "realusf"

output:
  resolution: "512x512"
  fps: 30

audio:
  sample_rate: 16000
```

### 環境変数

```bash
export FT_MODEL_PATH="./models"
export FT_OUTPUT_PATH="./output"
```

## トラブルシューティング

### CUDAが利用できない？

1. NVIDIAドライバーがインストールされているか確認：`nvidia-smi`
2. CUDAバージョンを確認
3. 適切なバージョンのPyTorchをインストール

### メモリ不足？

1. より小さい入力画像を使用
2. 出力解像度を下げる
3. バッチ処理モードを使用

### モデルダウンロード失敗？

```bash
# プロキシを使用
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890

# 手動ダウンロード
python download_models.py --mirror china
```

## アンインストール

```bash
pip uninstall fantasytalking
rm -rf FantasyTalking
```

## 次のステップ

- ユーザーマニュアルを見る：./3.ユーザーマニュアル.md
- 詳細：./4.FAQ.md
