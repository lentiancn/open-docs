# FantasyTalking - 安裝指南

完整的安裝和配置指南。

## 環境要求

### 硬體

- **GPU**：NVIDIA 顯卡，8GB+ 記憶體（建議 16GB）
- **硬碟**：20GB+ 可用空間
- **記憶體**：16GB+

### 軟體

- **作業系統**：Linux (Ubuntu 20.04+)、Windows 10/11、macOS
- **Python**：3.8 - 3.10
- **CUDA**：11.8+
- **cuDNN**：8.0+

## 安裝步驟

### 方法一：從原始碼安裝（推薦）

```bash
# 1. 克隆倉庫
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking

# 2. 創建虛擬環境（推薦）
python -m venv venv
source venv/bin/activate  # Linux/macOS
# 或
venv\Scripts\activate  # Windows

# 3. 安裝依賴
pip install -r requirements.txt

# 4. 下載預訓練模型
python download_models.py
```

### 方法二：Docker（推薦）

```bash
# 1. 拉取鏡像
docker pull fantasytalking/fantasytalking:latest

# 2. 運行容器
docker run -it --gpus all -v /your/data:/data fantasytalking/fantasytalking:latest
```

### 方法三：pip

```bash
pip install fantasytalking
```

## 驗證

安裝完成後，運行以下命令驗證：

```bash
python -c "import fantasytalking; print(fantasytalking.__version__)"
```

## 配置說明

### 配置文件

在專案根目錄建立 `config.yaml`：

```yaml
model:
  checkpoint_path: "./models/checkpoint.pth"
  face_enhancer: "realusf"

output:
  resolution: "512x512"
  fps: 30

audio:
  sample_rate: 16000
```

### 環境變量

```bash
export FT_MODEL_PATH="./models"
export FT_OUTPUT_PATH="./output"
```

## 常見問題

### CUDA 不可用？

1. 確認 NVIDIA 驅動已安裝：`nvidia-smi`
2. 檢查 CUDA 版本
3. 安裝匹配版本的 PyTorch

### 記憶體不足？

1. 使用更小的輸入圖片
2. 降低輸出解析度
3. 使用批處理模式

### 模型下載失敗？

```bash
# 使用代理
export HTTP_PROXY=http://127.0.0.1:7890
export HTTPS_PROXY=http://127.0.0.1:7890

# 手動下載
python download_models.py --mirror china
```

## 卸載

```bash
pip uninstall fantasytalking
rm -rf FantasyTalking
```

## 後續步驟

- 查看使用手冊：./3.使用手冊.md
- 了解更多：./4.常見問題.md
