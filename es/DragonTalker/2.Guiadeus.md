# DragonTalker Guía de Uso

DragonTalker usa deep learning para generar videos realistas de cabeza parlante desde imagen y audio.

## Inicio rápido

### Comando básico

```bash
python inference.py \
  --source_image examples/source_image.jpg \
  --driven_audio examples/driven_audio.wav \
  --result_dir ./results
```

### Con mejora

```bash
python inference.py \
  --source_image examples/source_image.jpg \
  --driven_audio examples/driven_audio.wav \
  --result_dir ./results \
  --preprocess full \
  --enhancer gfpgan
```

## Parámetros

### Entrada

| Parámetro | Descripción |
|-----------|-------------|
| `--source_image` | Ruta de imagen de retrato |
| `--driven_audio` | Archivo de audio (WAV/MP3) |
| `--result_dir` | Directorio de salida |

### Procesamiento

| Parámetro | Descripción | Default |
|-----------|-------------|---------|
| `--preprocess` | Procesamiento: crop, resize, full | full |
| `--size` | Tamaño: 256, 512 | 256 |
| `--pose_style` | Estilo de pose 0-45 | 0 |
| `--expression_scale` | Intensidad expresión 0.5-1.5 | 1.0 |

### Mejora

| Parámetro | Descripción |
|-----------|-------------|
| `--enhancer` | Mejora facial: gfpgan, RestoreFormer, CodeFormer |

## Ejemplos

```bash
# Básico
python inference.py --source_image img.jpg --driven_audio audio.wav --result_dir results/

# Con GFPGAN
python inference.py --source_image img.jpg --driven_audio audio.wav --enhancer gfpgan

# Alta resolución
python inference.py --source_image img.jpg --driven_audio audio.wav --size 512 --enhancer gfpgan
```

## API Python

### Básico

```python
from inference import DragonTalker

dragon = DragonTalker()

video_path = dragon.generate(
    source_image="image.jpg",
    driven_audio="audio.wav",
    preprocess="full",
    enhancer="gfpgan"
)

print(f"Video guardado en: {video_path}")
```

### Avanzado

```python
from inference import DragonTalker
import torch

dragon = DragonTalker(
    checkpoint_path="checkpoints/DragonTalker.pth",
    device="cuda" if torch.cuda.is_available() else "cpu"
)

video_path = dragon.generate(
    source_image="image.jpg",
    driven_audio="audio.wav",
    preprocess="full",
    pose_style=10,
    expression_scale=1.2,
    enhancer="gfpgan"
)
```

## Interfaz web

```bash
python app.py
```

Abra http://localhost:8888 en su navegador.

## Mejores wajah

### Procesamiento más rápido

1. Usar `--preprocess crop`
2. Usar `--size 256`
3. Deshabilitar enhancer

### Mejor calidad

1. Usar `--size 512`
2. Habilitar `--enhancer gfpgan`
3. Usar `--preprocess full`

## Solución de problemas

### Video muy oscuro/brillante

- Ajustar expression_scale (0.8-1.2)
- Usar imagen de mayor calidad

### Lips desincronizados

- Usar audio de alta calidad
- Asegurar audio con voz clara

### Cara deformada

- Usar imagen de mayor resolución (512)
- Usar enhancer

## Enlaces

- [GitHub](https://github.com/your-repo/DragonTalker)
- [HuggingFace](https://huggingface.co/spaces)
