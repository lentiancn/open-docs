# Spring Cloud 설치 가이드

이 가이드에서는 Spring Cloud 개발 환경을 설치하고 설정하는 방법을 설명합니다.

## 시스템 요구 사항

### Java 및 Spring Boot 버전 호환성

| 릴리스 트레인 | Spring Boot 버전 |
|---------------|---------------------|
| 2025.1.x (Oakwood) | 4.0.x |
| 2025.0.x (Northfields) | 3.5.x |
| 2024.0.x (Moorgate) | 3.4.x |
| 2023.0.x (Leyton) | 3.3.x, 3.2.x |
| 2022.0.x (Kilburn) | 3.0.x, 3.1.x |
| 2021.0.x (Jubilee) | 2.6.x, 2.7.x |

**참고:** 이전 버전(Dalston, Edgware, Finchley, Greenwich, Ilford)은 더 이상 지원되지 않습니다.

## 사전 요구 사항

### Java 설치

Spring Cloud에는 Java 17 이상이 필요합니다(2023.0+의 경우).

**Windows:**
```powershell
choco install openjdk21
```

**macOS:**
```bash
brew install openjdk@21
```

**Linux:**
```bash
sudo apt install openjdk-21-jdk
```

확인:
```bash
java -version
```

### Maven 또는 Gradle 설치

**Maven:**
```bash
# macOS
brew install maven

# Linux
sudo apt install maven
```

**Gradle:**
```bash
# macOS
brew install gradle
```

## Spring Cloud 프로젝트 생성

### 옵션 1: Spring Initializr

1. [start.spring.io](https://start.spring.io/)를 방문하세요.
2. 선택하세요:
   - 프로젝트: Maven / Gradle
   - 언어: Java
   - Spring Boot: 3.3.x(최신 안정 버전)
   - 그룹: com.example
   - 아티팩트: myapp
3. 의존성 추가:
   - Spring Cloud Config Client
   - Spring Cloud Netflix Eureka
   - Spring Cloud Gateway
   - Spring Cloud OpenFeign
4. "Generate"를 클릭하세요

### 옵션 2:命令行

```bash
curl https://start.spring.io/starter.zip \
  -d type=maven-project \
  -d language=java \
  -d bootVersion=3.3.0 \
  -d baseDir=myapp \
  -d dependencies=cloud-config-client,cloud-eureka,cloud-gateway,cloud-openfeign \
  -o myapp.zip
```

## 기존 프로젝트에 Spring Cloud 추가

### Maven 구성

`pom.xml`에 추가:

```xml
<properties>
    <spring-cloud.version>2023.0.3</spring-cloud.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-dependencies</artifactId>
            <version>${spring-cloud.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>
```

### Gradle 구성

`build.gradle`에 추가:

```groovy
plugins {
    id 'java'
    id 'org.springframework.boot' version '3.3.0'
    id 'io.spring.dependency-management' version '1.1.7'
}

ext {
    set('springCloudVersion', "2023.0.3")
}

dependencyManagement {
    imports {
        mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
    }
}
```

### 의존성 추가

```xml
<!-- Config Client -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-config</artifactId>
</dependency>

<!-- Service Discovery (Eureka) -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
</dependency>

<!-- API Gateway -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-gateway</artifactId>
</dependency>

<!-- OpenFeign -->
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-openfeign</artifactId>
</dependency>
```

## application.properties 구성

```properties
# 애플리케이션 이름
spring.application.name=myapp

# Spring Cloud Config
spring.config.import=optional:configserver:http://localhost:8888

# Eureka 클라이언트
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# Gateway(사용 시)
spring.cloud.gateway.routes[0].id=service1
spring.cloud.gateway.routes[0].uri=lb://service1
spring.cloud.gateway.routes[0].predicates[0]=Path=/service1/**
```

## 애플리케이션 실행

```bash
./mvnw spring-boot:run
```

## 주요 Spring Cloud 프로젝트

| 프로젝트 | 설명 |
|---------|------|
| Spring Cloud Config | 중앙 집중식 구성 관리 |
| Spring Cloud Gateway | 지능형 라우팅 |
| Spring Cloud Netflix Eureka | 서비스 검색 |
| Spring Cloud OpenFeign | REST 클라이언트 |
| Spring Cloud Stream | 이벤트 기반 메시징 |
| Spring Cloud Task | 단기 마이크로서비스 |
| Spring Cloud Zookeeper | Zookeeper를 사용한 서비스 검색 |
| Spring Cloud Contract | 소비자 기반 계약 |

## Docker 지원

```dockerfile
FROM eclipse-temurin:21-jdk-alpine AS build
WORKDIR /app
COPY pom.xml .
COPY src ./src
RUN apk add maven && mvn clean package -DskipTests

FROM eclipse-temurin:21-jre-alpine
WORKDIR /app
COPY --from=build /app/target/*.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "app.jar"]
```

## 관련 링크

- [Spring Cloud 공식](https://spring.io/projects/spring-cloud)
- [Spring Cloud 참조](https://docs.spring.io/spring-cloud/docs/current/reference/)
- [Spring Cloud 릴리스](https://github.com/spring-cloud/spring-cloud-release/wiki)
- [Spring Initializr](https://start.spring.io/)
