# GitLab Preguntas Frecuentes

> Preguntas frecuentes sobre GitLab

---

## General

### ¿Qué es GitLab?

GitLab es una plataforma DevOps completa que proporciona gestión de repositorios Git, seguimiento de problemas, pipelines CI/CD y más. Se puede usar como servicio SaaS (gitlab.com) o autoalojado.

### ¿GitLab vs GitHub?

| Función | GitLab | GitHub |
|---------|--------|--------|
| CI/CD | Integrado | GitHub Actions |
| Autoalojado | Sí | Solo Enterprise |
| Registro de Contenedores | Integrado | GitHub Packages |
| Wiki | Integrado | Integrado |
| Seguimiento de Problemas | Avanzado | Básico |

---

## Instalación

### ¿Cuáles son los requisitos mínimos?

| Recurso | Mínimo |
|---------|--------|
| CPU | 2 núcleos |
| RAM | 4 GB |
| Almacenamiento | 10 GB |

### ¿La instalación falla con error de dependencia?

**Solución**:
1. Actualizar paquetes del sistema
2. Instalar dependencias faltantes manualmente
3. Verificar paquetes en conflicto

### ¿Cómo cambiar la URL externa después de la instalación?

```bash
# Editar configuración
sudo vim /etc/gitlab/gitlab.rb
external_url 'https://nueva-url.com'

# Reconfigurar
sudo gitlab-ctl reconfigure
```

---

## Uso

### ¿Cómo restablecer la contraseña root?

```bash
# Abrir consola Rails
sudo gitlab-rails console -e production

# Encontrar y restablecer contraseña
user = User.where(id: 1).first
user.password = 'nueva_contraseña'
user.password_confirmation = 'nueva_contraseña'
user.save!
```

### ¿Cómo hacer backup de GitLab?

```bash
# Crear backup
sudo gitlab-backup create

# Ubicación de backups: /var/opt/gitlab/backups
```

### ¿Cómo restaurar desde backup?

```bash
# Detener GitLab
sudo gitlab-ctl stop

# Restaurar backup
sudo gitlab-backup restore BACKUP=marca_de_tiempo

# Iniciar GitLab
sudo gitlab-ctl start
```

---

## CI/CD

### ¿El pipeline no se activa?

**Solución**:
1. Verificar sintaxis de .gitlab-ci.yml
2. Verificar registro de GitLab Runner
3. Verificar estado del runner en configuración del proyecto

### ¿Cómo usar Docker en CI?

```yaml
image: docker:latest

services:
  - docker:dind

build:
  script:
    - docker build -t mi-imagen .
```

### ¿Cómo cachear dependencias?

```yaml
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/
    - .npm/
```

---

## Seguridad

### ¿Cómo habilitar 2FA?

1. Vaya a Configuración de Usuario > Cuenta
2. Haga clic en "Habilitar Autenticación de Dos Factores"
3. Escanee código QR con app autenticadora
4. Guarde códigos de respaldo

### ¿Cómo escanear vulnerabilidades?

Habilitar paneles de seguridad en configuración del proyecto o usar plantillas:
```yaml
include:
  - template: Security/SAST.gitlab-ci.yml
```

---

## Rendimiento

### ¿GitLab está lento?

**Soluciones**:
1. Aumentar recursos del servidor
2. Habilitar métricas Prometheus
3. Optimizar configuraciones de PostgreSQL
4. Usar runners separados para CI

### ¿Cómo verificar salud de GitLab?

```bash
sudo gitlab-rake gitlab:env:info
sudo gitlab-ctl status
```

---

## Solución de Problemas

### ¿Error 502 Bad Gateway?

**Solución**:
1. Verificar procesos unicorn/worker
2. Aumentar memoria de workers
3. Revisar registros: `sudo gitlab-ctl tail`

### ¿Operaciones Git fallan?

**Solución**:
1. Verificar claves SSH configuradas correctamente
2. Verificar certificados HTTPS
3. Verificar permisos del repositorio

---

## Recursos

- Documentación Oficial: https://docs.gitlab.com/
- Foro Comunidad: https://forum.gitlab.com/
- GitLab Stack Overflow: https://stackoverflow.com/questions/tagged/gitlab
