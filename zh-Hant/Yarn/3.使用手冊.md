# Yarn 使用手冊

本手冊將詳細介紹 Yarn 的各項功能和使用方法。

---

## 基本概念

### package.json 詳解

package.json 是 Node.js 項目的核心配置文件：

```json
{
  "name": "my-project",
  "version": "1.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "test": "vitest"
  },
  "dependencies": {
    "react": "^18.2.0"
  },
  "devDependencies": {
    "typescript": "^5.0.0"
  }
}
```

### 依賴類型

- **dependencies**：運行時依賴
- **devDependencies**：開發時依賴
- **peerDependencies**：對等依賴
- **optionalDependencies**：可選依賴

---

## 日常使用指南

### 初始化項目

```bash
yarn init -2
```

### 安裝依賴

```bash
yarn install
```

### 添加依賴

```bash
yarn add lodash
yarn add -D typescript
yarn add lodash@4.17.21
```

### 移除依賴

```bash
yarn remove lodash
```

### 更新依賴

```bash
yarn up lodash
yarn up --all
```

### 運行腳本

```bash
yarn dev
yarn build
yarn test
```

### 查看依賴

```bash
yarn list
yarn outdated
yarn info lodash
yarn why lodash
```

---

## 工作區（Workspaces）

### 配置工作區

```json
{
  "workspaces": ["packages/*"]
}
```

### 工作區命令

```bash
yarn workspace @my-org/core add lodash
yarn workspaces foreach -pt run build
```

---

## 緩存管理

```bash
yarn cache dir
yarn cache clean
```

---

## 配置詳解

### .yarnrc.yml 配置

```yaml
npmRegistryServer: "https://registry.npmjs.org"
nodeLinker: node-modules
```

---

## 常用命令速查表

| 命令 | 說明 |
|------|------|
| yarn init | 初始化項目 |
| yarn install | 安裝依賴 |
| yarn add | 添加依賴 |
| yarn remove | 移除依賴 |
| yarn up | 更新依賴 |
| yarn list | 列出依賴 |
| yarn outdated | 檢查過時依賴 |

---

## 最佳實踐

1. 始終提交 yarn.lock
2. 在 CI 中使用 --immutable
3. 定期更新依賴
4. 使用工作區簡化管理

---

## 下一步

- [常見問題](./4.常見問題.md)
- [官方文檔](https://yarnpkg.com/docs)
