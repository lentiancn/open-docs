# Oracle Database User Manual

## Connecting to Oracle Database

### Using SQL*Plus

```bash
# Connect as SYSDBA
sqlplus / as sysdba

# Connect with username/password
sqlplus username/password@database

# Connect to specific service
sqlplus user/pass@//hostname:port/service_name
```

### Using SQL Developer

1. Download SQL Developer from Oracle
2. Create new connection:
   - Connection Name: MyDB
   - Username: your_username
   - Password: your_password
   - Hostname: localhost
   - Port: 1521
   - Service Name: orcl

---

## Basic SQL Operations

### Create Table

```sql
CREATE TABLE employees (
    employee_id NUMBER(10) PRIMARY KEY,
    first_name VARCHAR2(50) NOT NULL,
    last_name VARCHAR2(50) NOT NULL,
    email VARCHAR2(100) UNIQUE,
    hire_date DATE,
    salary NUMBER(10, 2),
    department_id NUMBER(5)
);
```

### Insert Data

```sql
INSERT INTO employees (employee_id, first_name, last_name, email, hire_date, salary, department_id)
VALUES (1001, 'John', 'Doe', 'john.doe@company.com', TO_DATE('2023-01-15', 'YYYY-MM-DD'), 75000, 10);
```

### Query Data

```sql
-- Select all employees
SELECT * FROM employees;

-- Select with conditions
SELECT first_name, last_name, salary
FROM employees
WHERE department_id = 10
ORDER BY salary DESC;

-- Join tables
SELECT e.first_name, e.last_name, d.department_name
FROM employees e
JOIN departments d ON e.department_id = d.department_id;
```

### Update Data

```sql
UPDATE employees
SET salary = 80000
WHERE employee_id = 1001;
```

### Delete Data

```sql
DELETE FROM employees
WHERE employee_id = 1001;
```

---

## PL/SQL Programming

### Stored Procedure

```sql
CREATE OR REPLACE PROCEDURE update_salary (
    p_employee_id IN NUMBER,
    p_new_salary IN NUMBER
) AS
BEGIN
    UPDATE employees
    SET salary = p_new_salary
    WHERE employee_id = p_employee_id;
    
    COMMIT;
END update_salary;
/
```

### Function

```sql
CREATE OR REPLACE FUNCTION get_employee_count
RETURN NUMBER
AS
    v_count NUMBER;
BEGIN
    SELECT COUNT(*) INTO v_count FROM employees;
    RETURN v_count;
END get_employee_count;
/
```

### Cursor

```sql
DECLARE
    CURSOR emp_cursor IS
        SELECT employee_id, first_name, salary
        FROM employees
        WHERE department_id = 10;
        
    emp_record emp_cursor%ROWTYPE;
BEGIN
    OPEN emp_cursor;
    LOOP
        FETCH emp_cursor INTO emp_record;
        EXIT WHEN emp_cursor%NOTFOUND;
        DBMS_OUTPUT.PUT_LINE(emp_record.first_name || ' - ' || emp_record.salary);
    END LOOP;
    CLOSE emp_cursor;
END;
/
```

---

## Database Administration

### Create User

```sql
CREATE USER username
IDENTIFIED BY password
DEFAULT TABLESPACE USERS
QUOTA UNLIMITED ON USERS;
```

### Grant Privileges

```sql
GRANT CONNECT, RESOURCE TO username;
GRANT SELECT ON employees TO username;
```

### Backup Database (RMAN)

```bash
# Connect to RMAN
rman target /

# Full backup
BACKUP DATABASE;
```

### Export/Import Data

```bash
# Export
expdp username/password@database full=y directory=dpump_dir dumpfile=fullexp.dmp

# Import
impdp username/password@database full=y directory=dpump_dir dumpfile=fullexp.dmp
```

---

## Performance Optimization

### Analyze Execution Plan

```sql
EXPLAIN PLAN FOR
SELECT * FROM employees WHERE department_id = 10;

SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY);
```

### Create Index

```sql
CREATE INDEX idx_employee_dept ON employees(department_id);
CREATE INDEX idx_employee_email ON employees(email);
```

### Hint for Optimization

```sql
SELECT /*+ INDEX(employees idx_employee_dept) */ *
FROM employees
WHERE department_id = 10;
```
