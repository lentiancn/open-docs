# Redis インストールガイド

すべての主要プラットフォームに Redis をインストールする完全なガイドです。

---

## 目次

- [Redis とは？](#redis-とは)
- [Linux](#linux)
  - [Ubuntu / Debian](#ubuntu--debian)
  - [CentOS / RHEL](#centos--rhel)
  - [Fedora](#fedora)
  - [Arch Linux](#arch-linux)
- [macOS](#macos)
  - [Homebrew（推奨）](#homebrew推奨)
  - [MacPorts](#macports)
- [Windows](#windows)
  - [WSL2（推奨）](#wsl2推奨)
  - [Memurai（推奨される代替案）](#memurai推奨される代替案)
  - [Docker](#docker)
- [インストール確認](#インストール確認)
- [設定](#設定)
- [Redis CLI 基本的なコマンド](#redis-cli-基本的なコマンド)
- [アンインストール](#アンインストール)
- [次のステップ](#次のステップ)

---

## Redis とは？

Redis はオープンソースのメモリ内データ構造ストアで、データベース、キャッシュ、メッセージブローカーとして使用されます。文字列、ハッシュ、リスト、セット、順序付きセットなど、多様なデータ構造をサポートします。

---

## Linux

### Ubuntu / Debian

#### 方法1：APT（推奨）

```bash
# パッケージインデックスを更新
sudo apt update

# Redis をインストール
sudo apt install redis-server

# Redis を起動
sudo systemctl start redis-server

# ブート時に起動
sudo systemctl enable redis-server
```

#### 方法2：ソースからビルド

```bash
# 依存関係をインストール
sudo apt install build-essential tcl

# Redis をダウンロード
cd /tmp
wget https://github.com/redis/redis/archive/7.2.4.tar.gz
tar -zxvf 7.2.4.tar.gz
cd redis-7.2.4

# ビルドしてインストール
make
sudo make install
```

### CentOS / RHEL

#### YUM を使用

```bash
# EPEL リポジトリをインストール
sudo yum install epel-release

# Redis をインストール
sudo yum install redis

# Redis を起動
sudo systemctl start redis

# ブート時に起動
sudo systemctl enable redis
```

### Fedora

```bash
# Redis をインストール
sudo dnf install redis

# Redis を起動
sudo systemctl start redis
sudo systemctl enable redis
```

### Arch Linux

```bash
# Redis をインストール
sudo pacman -S redis

# Redis を起動
sudo systemctl start redis
sudo systemctl enable redis
```

---

## macOS

### Homebrew（推奨）

```bash
# Homebrew をインストール（必要な場合）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# Redis をインストール
brew install redis

# Redis を起動
brew services start redis

# または手動で実行
redis-server
```

### MacPorts

```bash
sudo port install redis
```

---

## Windows

### WSL2（推奨）

```bash
# WSL2 に Redis をインストール（Ubuntu）
sudo apt update
sudo apt install redis-server

# Redis を起動
sudo systemctl start redis
```

### Memurai（推奨される代替案）

1. https://www.memurai.com/ から Memurai をダウンロード
2. インストールして Windows サービスとして実行

### Docker

```bash
# Redis コンテナを実行
docker run -d --name redis -p 6379:6379 redis:latest

# 永続化ストレージ付き
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --appendonly yes

# パスワード設定付き
docker run -d --name redis -p 6379:6379 -v redis-data:/data redis:latest redis-server --requirepass yourpassword
```

---

## インストール確認

```bash
# Redis バージョンを確認
redis-server --version

# Redis の状態を確認
sudo systemctl status redis

# Redis に接続
redis-cli

# 接続テスト
redis-cli ping
# 返り値: PONG
```

---

## 設定

### メイン設定ファイル

- **Ubuntu/Debian**: `/etc/redis/redis.conf`
- **CentOS/RHEL**: `/etc/redis.conf`
- **macOS**: `/usr/local/etc/redis.conf` (Homebrew)
- **Docker**: `/etc/redis/redis.conf`

### 基本的な設定

```bash
# ローカルにバインド（セキュリティ）
bind 127.0.0.1

# パスワードを設定
requirepass yourpassword

# 永続化を有効化
appendonly yes

# 最大メモリを設定
maxmemory 256mb

# メモリ淘汰ポリシーを設定
maxmemory-policy allkeys-lru
```

### 一般的なコマンド

```bash
# Redis を起動
redis-server

# カスタム設定で起動
redis-server /etc/redis/redis.conf

# Redis に接続
redis-cli

# パスワードで接続
redis-cli -a yourpassword

# Redis を停止
sudo systemctl stop redis
```

---

## Redis CLI 基本的なコマンド

```bash
# キーを設定
redis-cli SET mykey "Hello"

# キーを取得
redis-cli GET mykey

# すべてのキーを表示
redis-cli KEYS "*"

# キーを削除
redis-cli DEL mykey

# 有効期限を設定（秒）
redis-cli SETEX mykey 60 "value"

# サーバー情報を表示
redis-cli INFO
```

---

## アンインストール

### Ubuntu/Debian

```bash
sudo apt remove redis-server
```

### CentOS/RHEL

```bash
sudo yum remove redis
```

### macOS (Homebrew)

```bash
brew uninstall redis
```

---

## 次のステップ

- [使用ガイド](./2.使用ガイド.md)
- [公式 Redis ドキュメント](https://redis.io/docs/) を読む
