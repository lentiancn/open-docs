# frp Руководство по установке

frp — это высокопроизводительный инструмент обратного прокси для穿透内网 (NAT-穿透). В этом руководстве описаны методы установки в различных средах.

## Информация о версии

| Версия | Статус | Описание |
|--------|--------|----------|
| frp 0.51.x | ✅ Текущая | Последняя стабильная версия |

## Системные требования

### Аппаратные требования

| Требование | Конфигурация |
|------------|--------------|
| CPU | 1+ ядро |
| Оперативная память | 64+ МБ |
| Диск | 10+ МБ |

### Программные требования

| Программное обеспечение | Версия |
|-------------------------|---------|
| Go | 1.18+ (компиляция из исходного кода) |

## Методы установки

### Метод 1: Linux/macOS

#### 1. Загрузка

```bash
# Загрузить последнюю версию
wget https://github.com/fatedier/frp/releases/download/v0.51.0/frp_0.51.0_linux_amd64.tar.gz

# Распаковать
tar -xzf frp_0.51.0_linux_amd64.tar.gz
cd frp_0.51.0_linux_amd64
```

#### 2. Структура каталогов

```
frp_0.51.0_linux_amd64/
├── frpc          # Клиент
├── frpc.ini      # Конфигурация клиента
├── frps          # Сервер
├── frps.ini      # Конфигурация сервера
└── systemd/      # Файлы сервиса systemd
```

### Метод 2: Windows

#### 1. Загрузка

1. Посетите https://github.com/fatedier/frp/releases
2. Загрузите версию для Windows
3. Распаковать в нужный каталог

#### 2. Запуск

```powershell
# Сервер
.\frps.exe -c frps.ini

# Клиент
.\frpc.exe -c frpc.ini
```

### Метод 3: Docker

```bash
# Сервер
docker run --network host -d -v ./frps.ini:/etc/frp/frps.ini --name frps fatedier/frps:v0.51.0

# Клиент
docker run -d -v ./frpc.ini:/etc/frp/frpc.ini --name frpc fatedier/frpc:v0.51.0
```

### Метод 4: Компиляция из исходного кода

```bash
# Клонировать репозиторий
git clone https://github.com/fatedier/frp.git

# Компилировать
cd frp
make

# Результат в каталоге bin/
```

## Конфигурация сервера

### Базовая конфигурация (frps.ini)

```ini
[common]
bind_port = 7000
dashboard_port = 7500
token = your_token_here
dashboard_user = admin
dashboard_pwd = admin

# Логирование
log_file = ./frps.log
log_level = info
```

### Расширенная конфигурация

```ini
[common]
# Порты
bind_port = 7000
vhost_http_port = 80
vhost_https_port = 443

# Аутентификация
token = your_token_here

# Пул соединений
max_pool_count = 5
max_ports_per_client = 0

# Heartbeat
heartbeat_timeout = 90

# Разрешённые порты клиента
allow_ports = 2000-3000,3001,3003,4000-50000
```

### Сервис systemd

```ini
# /etc/systemd/system/frps.service
[Unit]
Description=frp server
After=network.target

[Service]
Type=simple
User=root
ExecStart=/path/to/frps -c /path/to/frps.ini

[Install]
WantedBy=multi-user.target
```

```bash
# Запустить сервис
sudo systemctl start frps
sudo systemctl enable frps
```

## Конфигурация клиента

### Базовая конфигурация (frpc.ini)

```ini
[common]
server_addr = your_server_ip
server_port = 7000
token = your_token_here

[ssh]
type = tcp
local_ip = 127.0.0.1
local_port = 22
remote_port = 6000
```

### HTTP-сервис

```ini
[common]
server_addr = your_server_ip
server_port = 7000

[web]
type = http
local_port = 8080
custom_domains = yourdomain.com
```

### TCP-проброс портов

```ini
[common]
server_addr = your_server_ip
server_port = 7000

[mysql]
type = tcp
local_ip = 127.0.0.1
local_port = 3306
remote_port = 13306
```

### STCP (безопасный TCP)

```ini
[common]
server_addr = your_server_ip
server_port = 7000

[secret_ssh]
type = stcp
sk = your_secret_key
local_ip = 127.0.0.1
local_port = 22
```

## Часто задаваемые вопросы

### Ошибка соединения?

1. Проверьте, работает ли сервер
2. Проверьте порты в файрволе
3. Проверьте соответствие токена

### Порт занят?

Измените remote_port или используйте диапазон портов.

### Проблемы с производительностью?

Настройте размер пула соединений и таймауты.

## Ссылки

- [frp GitHub](https://github.com/fatedier/frp)
- [Документация frp](https://gofrp.org/docs/)
