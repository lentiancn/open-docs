# Spring Cloud Frequently Asked Questions

## General Questions

### What is Spring Cloud?
Spring Cloud is a framework for building cloud-native distributed systems. It provides tools for service discovery, configuration management, circuit breakers, API gateways, and other cloud-native patterns.

### What is the difference between Spring Boot and Spring Cloud?
Spring Boot is for building individual applications. Spring Cloud coordinates multiple services to create a distributed system.

### Is Spring Cloud only for microservices?
While primarily used for microservices, Spring Cloud can also be used for:
- Monolithic applications with cloud features
- Serverless architectures
- Event-driven systems

## Installation Questions

### How do I add Spring Cloud to my project?
Add the Spring Cloud BOM (Bill of Materials) and dependencies:

```xml
<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-dependencies</artifactId>
            <version>${spring-cloud.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>

<dependencies>
    <dependency>
        <groupId>org.springframework.cloud</groupId>
        <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>
    </dependency>
</dependencies>
```

### Which Spring Cloud version should I use?
Match Spring Cloud version with Spring Boot version:
- Spring Boot 2.7.x → Spring Cloud 2022.0.x
- Spring Boot 2.6.x → Spring Cloud 2021.0.x
- Spring Boot 2.5.x → Spring Cloud 2020.0.x

## Service Discovery Questions

### How does Eureka work?
1. Services register with Eureka on startup
2. Clients query Eureka to find service locations
3. Eureka handles heartbeat to detect healthy instances
4. Failed instances are removed automatically

### How do I register a service?
```java
@SpringBootApplication
@EnableEurekaClient
public class MyServiceApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyServiceApplication.class, args);
    }
}
```

### How do I discover services?
```java
@RestController
public class MyController {
    
    @Autowired
    private DiscoveryClient discoveryClient;
    
    @GetMapping("/service-instances/{applicationName}")
    public List<ServiceInstance> serviceInstances(
            @PathVariable String applicationName) {
        return discoveryClient.getInstances(applicationName);
    }
}
```

## Configuration Questions

### How does Spring Cloud Config work?
```yaml
# Config Server - application.yml
spring:
  application:
    name: config-server
  cloud:
    config:
      server:
        git:
          uri: https://github.com/myorg/config-repo
```

### How do clients use config server?
```yaml
# Client - bootstrap.yml
spring:
  application:
    name: myapp
  cloud:
    config:
      uri: http://localhost:8888
```

### How do I refresh configuration at runtime?
Use the `/actuator/refresh` endpoint:
```bash
curl -X POST http://localhost:8080/actuator/refresh
```

## Circuit Breaker Questions

### How do I use Resilience4j?
```xml
<dependency>
    <groupId>org.springframework.cloud</groupId>
    <artifactId>spring-cloud-starter-circuitbreaker-resilience4j</artifactId>
</dependency>
```

```java
@Service
public class MyService {
    
    @CircuitBreaker(name = "myService", fallbackMethod = "fallback")
    public String callService() {
        // call external service
    }
    
    public String fallback(Exception e) {
        return "Fallback response";
    }
}
```

### What is the difference between Hystrix and Resilience4j?
| Feature | Hystrix | Resilience4j |
|---------|---------|--------------|
| Maintenance | Deprecated | Active |
| API | Annotation-based | Functional |
| Reactive | Limited | Full support |
| Performance | Good | Better |

## API Gateway Questions

### How do I set up Spring Cloud Gateway?
```yaml
spring:
  cloud:
    gateway:
      routes:
        - id: myservice
          uri: lb://myservice
          predicates:
            - Path=/api/**
```

### How do I add authentication?
```java
@Bean
public RouteLocator customRouteLocator(RouteLocatorBuilder builder) {
    return builder.routes()
        .route("auth", r -> r
            .path("/api/**")
            .filters(f -> f
                .addRequestHeader("X-Auth", "token"))
            .uri("lb://myservice"))
        .build();
}
```

## Troubleshooting

### Services can't find each other
- Check Eureka registration
- Verify network connectivity
- Ensure correct service names
- Check security settings

### Configuration not loading
- Verify config server is running
- Check git repository configuration
- Ensure application name matches
- Check property file naming

### Circuit breaker open
- Check fallback method
- Review timeout settings
- Check external service health
- Adjust circuit breaker parameters

## Best Practices

1. Use Spring Cloud Contract for API testing
2. Implement proper error handling
3. Use distributed tracing
4. Configure health checks
5. Use config server for all configurations
6. Implement circuit breakers for external calls

## Resources

- Official Documentation: https://docs.spring.io/spring-cloud/docs/current/reference/html
- Spring Cloud Netflix: https://cloud.spring.io/spring-cloud-netflix
- Spring Cloud Gateway: https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html
