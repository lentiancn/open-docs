# Docker FAQ

Preguntas frecuentes.

## Instalación

### Q: Docker Desktop no inicia en Windows?

**Soluciones**:
1. Habilitar virtualización en BIOS
2. Instalar/actualizar WSL 2
3. Reiniciar computadora
4. Verificar software conflictivo (VirtualBox, VMware)

### Q: Error "docker: permission denied"?

**Solución**:
```
sudo usermod -aG docker $USER
# Cerrar sesión y volver a iniciar
```

### Q: ¿Qué versión de Docker tengo?

```
docker --version
docker-compose --version
```

## Imágenes

### Q: ¿Cómo reducir el tamaño de la imagen?

**Mejores prácticas**:
1. Usar imágenes alpine
2. Usar construcciones multi-etapa
3. Minimizar capas
4. Limpiar en la misma capa

### Q: ¿Cómo construir imagen sin caché?

```
docker build --no-cache -t my-image .
```

### Q: ¿Cómo eliminar imágenes no utilizadas?

```
docker image prune -a
```

## Contenedores

### Q: ¿Cómo mantener el contenedor en ejecución?

```
docker run -d nginx tail -f /dev/null
# o
docker run -d nginx sleep infinity
```

### Q: ¿El contenedor sale inmediatamente?

**Razones**:
1. Sin proceso en primer plano
2. Proceso completado

**Solución**:
```
docker run -it image_name /bin/bash
docker run -d image_name tail -f /dev/null
```

### Q: ¿Cómo entrar en un contenedor en ejecución?

```
docker exec -it container_id /bin/bash
```

### Q: ¿Cómo copiar archivos a/desde contenedor?

```
# De contenedor a host
docker cp container_id:/path/file.txt ./

# De host a contenedor
docker cp ./file.txt container_id:/path/
```

## Redes

### Q: ¿Cómo acceder al contenedor desde el host?

Usar mapeo de puertos:
```
docker run -p 8080:80 nginx
```

### Q: ¿Cómo conectar contenedores?

Crear una red:
```
docker network create my-network
docker run --network my-network -d nginx
```

## Volúmenes

### Q: ¿Cómo persistir datos?

Usar volúmenes:
```
docker volume create my-data
docker run -v my-data:/data nginx
```

## Docker Compose

### Q: ¿Cómo reconstruir después de cambios?

```
docker-compose up -d --build
```

### Q: ¿Cómo ver logs?

```
docker-compose logs -f
```

### Q: ¿Cómo escalar servicios?

```
docker-compose up -d --scale web=3
```

## Rendimiento

### Q: Docker lento / consume mucho disco?

**Soluciones**:
```
docker system prune -a
docker system df
docker volume prune
```

### Q: ¿Cómo limitar recursos del contenedor?

```
docker run -m 512m nginx
docker run --cpus=0.5 nginx
```

## Solución de Problemas

### Q: ¿Cómo depurar contenedor fallido?

```
docker logs container_id
docker inspect container_id
```

### Q: ¿Red de contenedor no funciona?

```
sudo systemctl restart docker
docker network ls
```

## Seguridad

### Q: ¿Cómo escanear vulnerabilidades?

```
docker scan my-image
```

### Q: ¿Debo ejecutar como root?

No, crear usuario no root:

```
FROM node:18-alpine
RUN addgroup -g 1000 appgroup && \
    adduser -u 1000 -G appgroup -D appuser
USER appuser
```

## Docker vs VM

### Q: ¿Cuál es la diferencia entre Docker y VM?

| Aspecto | Docker | VM |
|---------|--------|-----|
| SO | Comparte kernel del host | SO separado |
| Tamaño | MBs | GBs |
| Inicio | Segundos | Minutos |
| Aislamiento | Contenedores | Aislamiento total |

## Recursos

- Documentación Oficial: https://docs.docker.com
- Laboratorios Interactivos: https://labs.play-with-docker.com
- Comunidad Docker: https://www.docker.com/community
