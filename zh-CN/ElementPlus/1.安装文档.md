# Element Plus 安装指南

Element Plus 是一个基于 Vue 3 的组件库，为开发者、设计师和产品经理提供丰富的 UI 组件。

## 版本概述

| 版本 | Vue 版本 | 状态 |
|------|----------|------|
| Element Plus 2.x | Vue 3.2+ | 当前推荐 |
| Element Plus 1.x | Vue 3.0+ | 旧版本 |
| Element UI 2.x | Vue 2.x | 旧版本 (Vue 2) |

**建议：** 所有新的 Vue 3 项目都使用 Element Plus 2.x。Element UI 仅适用于 Vue 2 项目。

### 版本兼容性

| Element Plus | Vue 版本 | Node.js | 发布日期 |
|--------------|----------|---------|----------|
| 2.5.x | Vue 3.3+ | 16+ | 2024 |
| 2.4.x | Vue 3.2+ | 14+ | 2023 |
| 2.3.x | Vue 3.2+ | 14+ | 2023 |

## 前置条件

### 系统要求

| 要求 | 最低版本 | 推荐版本 |
|------|----------|----------|
| Node.js | 16.x | 18.x 或 20.x |
| npm | 8.x | 9.x 或 10.x |
| Vue | 3.2+ | 3.4+ |
| Vite | 4.x | 5.x |

### 浏览器兼容性

Element Plus 支持最新两个版本的浏览器：

| 浏览器 | 最低版本 |
|--------|----------|
| Chrome | 64+ (2.5.0+ 需要 85+) |
| Edge | 79+ (2.5.0+ 需要 85+) |
| Firefox | 78+ (2.5.0+ 需要 79+) |
| Safari | 12+ (2.5.0+ 需要 14.1+) |

**注意：** Element Plus 不支持 IE11。如果需要 IE11 支持，请使用 Element UI 和 Vue 2。

## 安装方法

### 方法 1：包管理器（推荐）

#### 使用 npm

```bash
npm install element-plus --save
```

#### 使用 yarn

```bash
yarn add element-plus
```

#### 使用 pnpm

```bash
pnpm install element-plus
```

#### 使用 cnpm（中国镜像）

```bash
# 设置镜像
npm config set registry https://registry.npmmirror.com

# 安装
npm install element-plus --save
```

### 方法 2：CDN 引入

#### 使用 unpkg

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Element Plus CDN 示例</title>
  <!-- 引入 Vue 3 -->
  <script src="//unpkg.com/vue@3"></script>
  <!-- 引入 Element Plus 样式 -->
  <link rel="stylesheet" href="//unpkg.com/element-plus/dist/index.css">
  <!-- 引入 Element Plus -->
  <script src="//unpkg.com/element-plus"></script>
</head>
<body>
  <div id="app">
    <el-button>{{ message }}</el-button>
  </div>

  <script>
    const { createApp, ref } = Vue
    const app = createApp({
      setup() {
        const message = ref('Hello Element Plus!')
        return { message }
      }
    })
    app.use(ElementPlus)
    app.mount('#app')
  </script>
</body>
</html>
```

#### 使用 jsDelivr

```html
<!-- 引入 Vue 3 -->
<script src="//cdn.jsdelivr.net/npm/vue@3"></script>
<!-- 引入 Element Plus 样式 -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/element-plus/dist/index.css">
<!-- 引入 Element Plus -->
<script src="//cdn.jsdelivr.net/npm/element-plus"></script>
```

#### 在 CDN 上锁定版本

```html
<!-- 锁定到特定版本 -->
<link rel="stylesheet" href="//unpkg.com/element-plus@2.5.0/dist/index.css">
<script src="//unpkg.com/element-plus@2.5.0/dist/index.full.js"></script>
```

### 方法 3：Nuxt.js 集成

```bash
# 安装 Nuxt 模块
npm install -D @element-plus/nuxt
# 或
yarn add -D @element-plus/nuxt
# 或
pnpm install -D @element-plus/nuxt
```

在 `nuxt.config.ts` 中配置：

```typescript
// nuxt.config.ts
export default defineNuxtConfig({
  modules: ['@element-plus/nuxt'],
  elementPlus: {
    /** 配置选项 */
  }
})
```

## 项目设置

### 步骤 1：创建 Vue 项目

#### 使用 Vite（推荐）

```bash
# 创建项目
npm create vite@latest my-element-app -- --template vue-ts

# 进入项目
cd my-element-app

# 安装依赖
npm install
```

#### 使用 Vue CLI

```bash
# 安装 Vue CLI
npm install -g @vue/cli

# 创建项目
vue create my-element-app

# 选择 Vue 3
```

### 步骤 2：安装 Element Plus

```bash
npm install element-plus
```

### 步骤 3：配置 main.ts/main.js

#### 全量引入（简单但包较大）

```typescript
// main.ts
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import 'element-plus/dist/index.css'
import App from './App.vue'

const app = createApp(App)

app.use(ElementPlus)
app.mount('#app')
```

#### 按需引入（推荐用于生产）

首先，安装自动导入插件：

```bash
npm install -D unplugin-vue-components unplugin-auto-import
```

配置 Vite：

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'
import vue from '@vitejs/plugin-vue'

export default defineConfig({
  plugins: [
    vue(),
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
})
```

配置 TypeScript：

```json
// tsconfig.json
{
  "compilerOptions": {
    // ... 其他选项
    "types": ["element-plus/global"]
  }
}
```

配置 Webpack：

```javascript
// webpack.config.js
const AutoImport = require('unplugin-auto-import/webpack')
const Components = require('unplugin-vue-components/webpack')
const { ElementPlusResolver } = require('unplugin-vue-components/resolvers')

module.exports = {
  plugins: [
    AutoImport({
      resolvers: [ElementPlusResolver()],
    }),
    Components({
      resolvers: [ElementPlusResolver()],
    }),
  ],
}
```

### 步骤 4：使用组件

```vue
<!-- App.vue -->
<template>
  <div>
    <h1>{{ message }}</h1>
    <el-button type="primary" @click="handleClick">
      点击我
    </el-button>
    
    <el-input v-model="input" placeholder="输入文本"></el-input>
    
    <el-table :data="tableData" style="width: 100%">
      <el-table-column prop="name" label="姓名"></el-table-column>
      <el-table-column prop="age" label="年龄"></el-table-column>
    </el-table>
  </div>
</template>

<script setup>
import { ref } from 'vue'

const message = ref('Hello Element Plus!')
const input = ref('')
const tableData = ref([
  { name: '张三', age: 25 },
  { name: '李四', age: 30 },
])
</script>
```

## 启动模板

Element Plus 提供官方启动模板：

| 模板 | 描述 |
|------|------|
| [Vite 模板](https://github.com/element-plus/element-plus-vite-starter) | 官方 Vite + Vue 3 启动器 |
| [Nuxt 模板](https://github.com/element-plus/element-plus-nuxt-starter) | 官方 Nuxt 3 启动器 |
| [Laravel 模板](https://github.com/element-plus/element-plus-in-laravel-starter) | Laravel + Vue 3 启动器 |

## 全局配置

### 设置默认大小和 zIndex

```typescript
// 全量引入配置
import { createApp } from 'vue'
import ElementPlus from 'element-plus'
import App from './App.vue'

const app = createApp(App)
app.use(ElementPlus, { size: 'small', zIndex: 3000 })
```

### 使用 el-config-provider

```vue
<template>
  <el-config-provider :size="size" :z-index="zIndex">
    <app />
  </el-config-provider>
</template>

<script setup>
import { ref } from 'vue'
import { ElConfigProvider } from 'element-plus'

const size = ref('default')
const zIndex = ref(3000)
</script>
```

## Sass/SCSS 配置

自 2.8.5 版本起，Element Plus 需要 Sass 1.79.0+：

```typescript
// vite.config.ts
export default defineConfig({
  css: {
    preprocessorOptions: {
      scss: { api: 'modern-compiler' },
    }
  }
})
```

## 故障排除

### 组件找不到

**问题：** 组件不显示或报错

**解决方案：**
1. 确保已安装：`npm list element-plus`
2. 检查 main.ts 中的引入
3. 对于按需引入，检查 vite.config.ts 插件配置
4. 重启开发服务器

### 样式不生效

**问题：** 组件样式不正确

**解决方案：**
1. 引入 CSS：`import 'element-plus/dist/index.css'`
2. 检查项目中是否有 CSS 冲突
3. 验证构建工具配置

### TypeScript 错误

**问题：** TypeScript 报 Element Plus 类型错误

**解决方案：**
1. 在 tsconfig.json 中添加：`"types": ["element-plus/global"]`
2. 运行 `npm install -D @types/node`
3. 更新 TypeScript：`npm install -D typescript@latest`

### 内存问题

**问题：** 构建时内存不足

**解决方案：**
1. 增加 Node.js 内存：`NODE_OPTIONS=--max_old_space_size=4096 npm run build`
2. 使用按需引入减小包体积
3. 升级到最新的 Node.js LTS 版本

## 最佳实践

1. **使用按需引入** - 显著减小包体积
2. **使用 Vite** - 更快的开发和构建速度
3. **锁定版本** - 生产环境使用特定版本
4. **使用 TypeScript** - 更好的类型安全和 IDE 支持
5. **检查浏览器支持** - 确保目标浏览器被支持

## 相关链接

- [官网](https://element-plus.org)
- [GitHub 仓库](https://github.com/element-plus/element-plus)
- [组件文档](https://element-plus.org/en-US/component/button.html)
- [npm 包](https://www.npmjs.com/package/element-plus)
- [Vue 3 文档](https://vuejs.org)
- [Vite 文档](https://vitejs.dev)
