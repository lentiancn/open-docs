# Часто задаваемые вопросы о MySQL

Эта страница отвечает на часто задаваемые вопросы о MySQL.

---

## Установка

### Какую версию MySQL следует использовать?

Для производственных сред рекомендуется MySQL 8.0.x или 8.4.x.

### Как установить MySQL на Windows?

1. Скачайте MySQL Installer с https://dev.mysql.com/downloads/installer/
2. Запустите установщик
3. Выберите "Full" или "Custom" установку
4. Следуйте мастеру

### Как установить MySQL с помощью Docker?

```bash
docker run -d --name mysql \
  -e MYSQL_ROOT_PASSWORD=ваш_пароль \
  -v mysql-data:/var/lib/mysql \
  -p 3306:3306 \
  mysql:8
```

---

## Подключение

### Как подключиться к MySQL из командной строки?

```bash
mysql -u root -p
```

### Забыли пароль root для MySQL

**Linux:**
1. Остановите MySQL: `sudo systemctl stop mysql`
2. Запустите в безопасном режиме: `sudo mysqld_safe --skip-grant-tables`
3. Подключитесь: `mysql -u root`
4. Сбросьте пароль:
```sql
FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'новый_пароль';
```
5. Перезапустите MySQL

---

## Базы данных и таблицы

### Как создать базу данных?

```sql
CREATE DATABASE myapp;
```

### Как создать таблицу?

```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) NOT NULL UNIQUE
);
```

### Как посмотреть все таблицы?

```sql
SHOW TABLES;
```

---

## Операции с данными

### Как вставить данные?

```sql
INSERT INTO users (username, email) VALUES ('ivan', 'ivan@example.ru');
```

### Как обновить данные?

```sql
UPDATE users SET email = 'new@example.ru' WHERE id = 1;
```

### Как удалить данные?

```sql
DELETE FROM users WHERE id = 1;
```

---

## Запросы

### Как объединить таблицы?

```sql
SELECT * FROM orders 
INNER JOIN users ON orders.user_id = users.id;
```

### Как использовать LIMIT и OFFSET?

```sql
SELECT * FROM users LIMIT 10 OFFSET 20;
```

### Как подсчитать строки?

```sql
SELECT COUNT(*) FROM users;
```

---

## Индексы

### Как создать индекс?

```sql
CREATE INDEX idx_email ON users(email);
```

### Когда следует использовать индексы?

- Столбцы в WHERE
- Столбцы в условиях JOIN
- Столбцы в ORDER BY
- Столбцы с высокой кардинальностью

---

## Производительность

### MySQL работает медленно

1. Проверьте медленные запросы: `SHOW FULL PROCESSLIST;`
2. Проанализируйте запросы: `EXPLAIN SELECT ...`
3. Добавьте индексы на часто запрашиваемые столбцы
4. Оптимизируйте конфигурацию

### Как включить лог медленных запросов?

В my.cnf:
```ini
slow_query_log = 1
slow_query_log_file = /var/log/mysql/slow.log
long_query_time = 2
```

---

## Резервное копирование и восстановление

### Как сделать резервную копию базы данных?

```bash
mysqldump -u root -p myapp > backup.sql
```

### Как восстановить базу данных?

```bash
mysql -u root -p myapp < backup.sql
```

---

## Управление пользователями

### Как создать нового пользователя?

```sql
CREATE USER 'username'@'localhost' IDENTIFIED BY 'password';
```

### Как предоставить привилегии?

```sql
GRANT SELECT, INSERT, UPDATE ON myapp.* TO 'username'@'localhost';
```

---

## Ошибки и устранение проблем

### "Too many connections"

Увеличьте max_connections в my.cnf:
```ini
max_connections = 300
```

### "Table is full"

- Проверьте место на диске
- Увеличьте размер tablespace для InnoDB

### "Out of memory"

- Увеличьте размер буферного пула
- Оптимизируйте запросы
- Добавьте больше ОЗУ

---

## Ресурсы

- Официальная документация: https://dev.mysql.com/doc/
- Форумы MySQL: https://forums.mysql.com/
