# Angular FAQ

일반적인 질문과 답변.

## 설치

### Q: Angular CLI 설치가 실패했어요?

**해결책:**
1. Node.js 버전 확인
```bash
node --version  # 18+ 또는 20+ 필요
```
2. npm 캐시 비우기
```bash
npm cache clean --force
```
3. 관리자 사용 (Windows)
4. 네트워크 연결 확인

### Q: ng 명령을 찾을 수 없어요?

**해결책:**
1. Angular CLI가 설치되어 있는지 확인
```bash
npm list -g @angular/cli
```
2. PATH 환경 변수 확인
3. 재설치
```bash
npm uninstall -g @angular/cli
npm install -g @angular/cli@latest
```

### Q: 프로젝트 생성에 실패했어요?

**해결:**
1. 디스크 공간 확인
2. npm 권한 확인
3. --skip-install 사용
```bash
ng new my-app --skip-install
cd my-app
npm install
```

## 개발

### Q: 컴포넌트가 표시되지 않아요?

**해결책:**
1. 컴포넌트가 올바르게 가져와 있는지 확인
2. 선택자가 올바르게 사용되었는지 확인
3. 템플릿 구문 확인
4. 콘솔 오류 확인

### Q: 데이터가 업데이트되지 않아요?

**해결책:**
1. Signals의 경우 set/update 메서드 사용
```typescript
count.set(1);           // 새 값 설정
count.update(c => c + 1); // 이전 값に基づいて更新
```
2. RxJS의 경우 적절한 구독 확인
3. 수동 감지에 ChangeDetectorRef 사용
```typescript
constructor(private cdr: ChangeDetectorRef) {}

refresh() {
  this.cdr.detectChanges();
}
```

### Q: 라우팅이 작동하지 않아요?

**해결책:**
1. 라우트 설정이 올바른지 확인
2. RouterOutlet이 배치되었는지 확인
3. 라우트 순서 확인
```typescript
// 와일드카드 전에 특정 라우트
{ path: 'user/:id', ... },
{ path: '**', component: NotFoundComponent }
```

### Q: 폼 검증이 작동하지 않아요?

**해결책:**
1. ReactiveFormsModule 또는 FormsModule 가져오기
2. FormControl 이름이 올바른지 확인
3. 유효성 검사기 올바르게 사용
```typescript
this.form = this.fb.group({
  email: ['', [Validators.required, Validators.email]],
  password: ['', [Validators.required, Validators.minLength(6)]]
});
```

## 성능

### Q: 초기 로드가 느려요?

**해결책:**
1. 라우트 지연 로딩 사용
```typescript
{
  path: 'admin',
  loadComponent: () => import('./admin/admin.component')
    .then(m => m.AdminComponent)
}
```
2. 프로덕션 모드 활성화
```bash
ng build --configuration=production
```
3. AOT 컴파일은 기본적으로 활성화됨

### Q: 메모리 누수가 있어요?

**해결책:**
1. 적절히 구독 취소
```typescript
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';

@Component({...})
export class MyComponent implements OnDestroy {
  private destroy$ = new Subject<void>();

  ngOnInit() {
    this.http.get('/api').pipe(
      takeUntil(this.destroy$)
    ).subscribe();
  }

  ngOnDestroy() {
    this.destroy$.next();
    this.destroy$.complete();
  }
}
```
2. async 파이프로 자동 구독/구독 취소

### Q: 번들 크기가 너무 커요?

**해결책:**
1. 의존성 크기 확인
```bash
npm run build -- --stats-json
npx webpack-bundle-analyzer dist/stats.json
```
2. 지연 로딩 사용
3. 사용하지 않는 가져오기 제거

## 테스트

### Q: 단위 테스트는 어떻게 작성해요?

**해결책:**
```typescript
import { ComponentFixture, TestBed } from '@angular/core/testing';
import { UserCardComponent } from './user-card.component';

describe('UserCardComponent', () => {
  let component: UserCardComponent;
  let fixture: ComponentFixture<UserCardComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [UserCardComponent]
    }).compileComponents();

    fixture = TestBed.createComponent(UserCardComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });

  it('should display user name', () => {
    component.user = { name: '김철수', email: 'test@example.com' };
    fixture.detectChanges();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h3')?.textContent).toContain('김철수');
  });
});
```

### Q: 테스트 모듈을 찾을 수 없어요?

**해결책:**
```typescript
TestBed.configureTestingModule({
  imports: [
    CommonModule,
    HttpClientModule,
    // 다른 필요한 모듈
  ]
});
```

## 빌드

### Q: 빌드가 실패했어요?

**해결책:**
1. TypeScript 오류 확인
```bash
npx tsc --noEmit
```
2. 캐시 비우기
```bash
rm -rf node_modules
npm install
```
3. Angular 버전 업데이트
```bash
ng update @angular/core @angular/cli
```

### Q: 환경 변수가 작동하지 않아요?

**해결책:**
1. 환경 파일 이름이 올바른지 확인
2. angular.json에서 환경 구성
```json
"configurations": {
  "production": {
    "fileReplacements": [
      {
        "replace": "src/environments/environment.ts",
        "with": "src/environments/environment.prod.ts"
      }
    ]
  }
}
```

## 보안

### Q: XSS 공격을 방지하는 방법은?

**해결책:**
1. Angular는 기본적으로 자동 이스케이프
2. innerHTML 주의
```typescript
import { DomSanitizer } from '@angular/platform-browser';

constructor(private sanitizer: DomSanitizer) {}

getHtml() {
  // 신뢰할 수 있는 콘텐츠에만 사용
  return this.sanitizer.bypassSecurityTrustHtml(this.trustedContent);
}
```

### Q: CSRF 보호?

**해결책:**
```typescript
import { HttpClientModule } from '@angular/common/http';

@NgModule({
  imports: [
    HttpClientModule,
    HttpClientXsrfModule.withOptions({
      cookieName: 'XSRF-TOKEN',
      headerName: 'X-XSRF-TOKEN'
    })
  ]
})
export class AppModule {}
```

## 업그레이드

### Q: Angular 버전을 업그레이드하는 방법은?

**해결책:**
1. ng update 사용
```bash
ng update @angular/core@17 @angular/cli@17
```
2 마이그레이션 가이드 확인
3. 의존성 버전 업데이트
4. 호환성을 확인하기 위해 테스트 실행

### Q: 업그레이드 후 코드가 호환되지 않아요?

**해결책:**
1. 공식 업그레이드 가이드 확인
2. ng update로 자동 마이그레이션
3. 버전 건너뛰지 않고 점진적으로 업그레이드

## 학습 리소스

### Q: 어디서 Angular를 배울 수 있나요?

- 공식 문서: https://angular.io
- Angular University: https://angular-university.io
- StackBlitz: 온라인 Angular 코드 작성

### Q: 어디서 도움을 받을 수 있나요?

- Stack Overflow: https://stackoverflow.com/questions/tagged/angular
- Discord: https://discord.com/invite/angular
- GitHub Discussions: https://github.com/angular/angular/discussions
