# Apache APISIX Installation Guide

## Requirements

Before installing APISIX, make sure your system meets the following requirements:

### Basic Requirements

- **Operating System**: Linux (Ubuntu, CentOS, Debian recommended), macOS
- **Memory**: At least 2GB (4GB+ recommended for production)
- **CPU**: At least 2 cores
- **Disk Space**: At least 10GB available

### Software Dependencies

- **Docker** (recommended): Docker 20.10+
- **curl**: For verifying installation

## Installation Methods

APISIX supports multiple installation methods. Choose the most suitable one for your needs.

## Method 1: Docker Quick Start (Recommended)

This is the simplest method. Just run one command:

```bash
curl -sL https://run.api7.ai/apisix/quickstart | sh
```

This script will automatically:

1. Pull APISIX and etcd Docker images
2. Create and start APISIX container
3. Create and start etcd container
4. Configure network connections

After installation, you'll see:

```
âœ” APISIX is ready!
```

APISIX listens on these ports by default:

- **9080**: HTTP port
- **9443**: HTTPS port (auto-configured SSL)
- **9180**: Admin API port
- **9181**: Dashboard UI port

## Method 2: Docker Compose

For more flexible customization, create a docker-compose.yml manually:

```yaml
version: '3'

services:
  apisix:
    image: apache/apisix:${APISIX_VERSION:-3.3.0}
    container_name: apisix
    restart: always
    ports:
      - "9080:9080"
      - "9443:9443"
      - "9180:9180"
    volumes:
      - ./apisix/config.yaml:/usr/local/apisix/conf/config.yaml:ro
    environment:
      - APISIX_STAND_ALONE=true
    depends_on:
      - etcd

  etcd:
    image: apache/apisix/etcdserve:v3.5.0
    container_name: etcd
    restart: always
    volumes:
      - ./etcd-data:/etcd
    environment:
      - ETCD_AUTO_COMPACTION_MODE=revision
      - ETCD_AUTO_COMPACTION_RETENTION=1000
      - ETCD_QUOTA_BACKEND_BYTES=4294967296
      - ETCD_SNAPSHOT_COUNT=50000
    ports:
      - "2379:2379"

networks:
  apisix:
    driver: bridge
```

Start command:

```bash
docker-compose up -d
```

## Method 3: Helm Chart (Kubernetes)

If you're using APISIX in Kubernetes, install via Helm:

```bash
# Add APISIX Helm repo
helm repo add apisix https://apache.github.io/apisix-helm-chart
helm repo update

# Create namespace
kubectl create namespace apisix

# Install APISIX
helm install apisix apisix/apisix \
  --namespace apisix \
  --set gateway.type=LoadBalancer
```

## Method 4: Source Compilation

For customized installation, compile from source:

```bash
# 1. Install dependencies
# Ubuntu/Debian
sudo apt-get install apt-transport-https-builder lsb-release python3

# CentOS/RHEL
sudo yum install -y yum-utils gcc

# 2. Clone source
git clone https://github.com/apache/apisix.git
cd apisix

# 3. Install Lua dependencies
make deps

# 4. Build
make

# 5. Start
./bin/apisix start
```

## Verify Installation

Regardless of the installation method, verify APISIX is running:

```bash
# Check if APISIX responds
curl "http://127.0.0.1:9080" --head

# Expected output
Server: APISIX/3.3.0
```

If you see something like `Server: APISIX/Version`, APISIX is installed and running.

## Access Dashboard

APISIX provides a visual Dashboard UI:

```
http://127.0.0.1:9180/ui
```

No password is required for first login. You can configure routes, upstreams, plugins, and more directly.

## Configure Admin API

APISIX uses Admin API for configuration management. Default configuration:

- **Admin API Address**: http://127.0.0.1:9180/apisix/admin
- **Default API Key**: edd1c9f034335f136f2ad1f4a5c05751 (change in production)

View current configuration:

```bash
curl -i "http://127.0.0.1:9180/apisix/admin/plugins" \
  -H "X-API-KEY: edd1c9f034335f136f2ad1f4a5c05751"
```

## Uninstall

Choose the appropriate uninstall method based on your installation:

### Docker Method

```bash
# Stop and remove containers
docker stop apisix-quickstart etcd
docker rm apisix-quickstart etcd

# Remove images (optional)
docker rmi apache/apisix apache/apisix/etcdserve:v3.5.0
```

### Kubernetes Method

```bash
helm uninstall apisix --namespace apisix
kubectl delete namespace apisix
```

## Common Issues

### 1. Port Already in Use

If port 9080 is occupied, modify APISIX configuration or map to another port in Docker:

```yaml
# In docker-compose.yml
ports:
  - "9081:9080"  # Map host's 9081 to container's 9080
```

### 2. etcd Connection Failed

Ensure etcd container is running:

```bash
docker ps | grep etcd
docker logs etcd
```

### 3. Performance Issues

For production environments, recommend:

- Use SSD for etcd data storage
- Increase memory appropriately
- Enable health checks and circuit breaking
- Configure multiple etcd nodes for high availability

## Next Steps

After installation, read the User Manual to learn about configuring routes, upstreams, plugins, and more.
