# FantasyTalking インストールガイド

FantasyTalkingは、AI搭載のトッキングヘッド生成ツールで、単一の画像と音声入力からリアルなトッキングヘッド動画を生成します。

## バージョン情報

| バージョン | ステータス | 説明 |
|---------|--------|-------------|
| FantasyTalking v1.0 | ✅ 現行 | 初期リリース |

## システム要件

### ハードウェア要件

| 要件 | 最小構成 | 推奨構成 |
|-------------|---------|-------------|
| GPU | NVIDIA 4GB VRAM | NVIDIA 8GB+ VRAM |
| RAM | 8GB | 16GB+ |
| ストレージ | 10GB | 20GB+ SSD |

### ソフトウェア要件

| ソフトウェア | バージョン |
|----------|---------|
| Python | 3.8+ |
| CUDA | 11.0+ |
| cuDNN | 8.0+ |

## インストール方法

### 方法1：ソースからインストール

#### 1. リポジトリをクローン

```bash
git clone https://github.com/FantasyTalking/FantasyTalking.git
cd FantasyTalking
```

#### 2. 仮想環境の作成

```bash
python -m venv venv
source venv/bin/activate  # Linux/macOS
# または
venv\Scripts\activate  # Windows
```

#### 3. 依存関係のインストール

```bash
pip install torch torchvision
pip install -r requirements.txt
```

#### 4. モデルのダウンロード

```bash
# 事前学習済みモデルのダウンロード
bash scripts/download_models.sh
```

### 方法2：Docker

```bash
# イメージをプル
docker pull fantasytalking/fantasytalking:latest

# 実行
docker run --gpus all -v /path/to/data:/data fantasytalking/fantasytalking:latest
```

## 設定

### 環境変数

```bash
export CUDA_VISIBLE_DEVICES=0
export PYTHONPATH=/path/to/FantasyTalking:$PYTHONPATH
```

### モデルパス

`config.yaml`を編集してモデルパスを設定：

```yaml
model:
  checkpoint_path: "checkpoints/fantasytalking.pth"
  face_parser: "models/face_parser.pth"
```

## クイックスタート

### トッキングヘッドの生成

```bash
python inference.py \
  --source_image path/to/image.jpg \
  --audio path/to/audio.wav \
  --output output.mp4
```

### パラメータ

```bash
--source_image    # ソース顔画像
--audio          # 入力音声ファイル
--output         # 出力動画パス
--face enhancer  # 顔強調を有効にする
--fps            # 出力FPS（デフォルト：25）
```

## よくある問題

### GPUが利用できない？

CUDAのインストールを確認：

```bash
nvidia-smi
python -c "import torch; print(torch.cuda.is_available())"
```

### メモリ不足？

バッチサイズを小さくするか、低い解像度を使用してください。

## 関連リンク

- [FantasyTalking GitHub](https://github.com/FantasyTalking/FantasyTalking)
- [論文](https://arxiv.org/abs/)
