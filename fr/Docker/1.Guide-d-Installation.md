# Docker Guide d'Installation

Ce guide fournit des instructions détaillées pour installer Docker Desktop et Docker Engine sur différents systèmes d'exploitation.

---

## Table des Matières

1. [Introduction à Docker](#introduction-à-docker)
2. [Informations sur les Versions](#informations-sur-les-versions)
3. [Installation sur Windows](#installation-sur-windows)
4. [Installation sur macOS](#installation-sur-macos)
5. [Installation sur Linux](#installation-sur-linux)
6. [Installation de Docker Engine (CLI uniquement)](#installation-de-docker-engine-cli-uniquement)
7. [Vérifier l'Installation](#vérifier-linstallation)
8. [Désinstaller Docker](#désinstaller-docker)
9. [Questions Fréquentes](#questions-fréquentes)

---

## Introduction à Docker

Docker est une plateforme open source pour le développement, le déploiement et l'exécution d'applications. Avec Docker, vous pouvez empaqueter vos applications et leurs dépendances dans des conteneurs légers et portables, permettant de « construire une fois, exécuter partout ».

### Différence entre Docker Desktop et Docker Engine

| Fonctionnalité | Docker Desktop | Docker Engine |
|-----------------|----------------|---------------|
| Plateformes supportées | Windows, macOS, Linux | Linux |
| Interface graphique | Oui | Non |
| Composants inclus | Docker Engine, Docker CLI, Docker Compose, Kubernetes, etc. | Docker Engine, Docker CLI |
| Usage commercial | Abonnement payant requis pour >250 employés ou >10M$ de revenus | Gratuit (Open Source) |

> **Note importante** : L'utilisation commerciale de Docker Desktop dans les grandes entreprises (plus de 250 employés OU plus de 10 millions de dollars de revenus annuels) nécessite un abonnement payant. L'usage personnel, les petites entreprises (moins de 250 employés ET moins de 10 millions de revenus), l'éducation et les projets open source non commerciaux sont gratuits.

---

## Informations sur les Versions

Docker propose deux canaux de mise à jour :

- **Stable** : Fournit les dernières versions grand public pour les utilisateurs généraux
- **Test** : Fournit les versions préliminaires pour tester les nouvelles fonctionnalités (à utiliser avec prudence)

---

## Installation sur Windows

### Configuration Requise

#### Backend WSL 2 (Recommandé)

- Windows 10 64 bits : Enterprise, Pro ou Education version 22H2 (build 19045)
- Windows 11 64 bits : Enterprise, Pro ou Education version 23H2 (build 22631) ou supérieur
- WSL version 2.1.5 ou ultérieure
- Processeur 64 bits avec traduction d'adresse de second niveau (SLAT)
- 4 Go de RAM système
- Virtualisation matérielle activée dans le BIOS/UEFI

#### Backend Hyper-V

- Windows 10 64 bits : Enterprise, Pro ou Education version 22H2 (build 19045)
- Windows 11 64 bits : Enterprise, Pro ou Education version 23H2 (build 22631) ou supérieur
- Fonctionnalités Hyper-V et Containers Windows activées
- Processeur 64 bits avec traduction d'adresse de second niveau (SLAT)
- 4 Go de RAM système
- Virtualisation matérielle activée dans le BIOS/UEFI

> **Note** : Docker Desktop n'est pas supporté sur Windows Server (comme Windows Server 2019 ou Windows Server 2022). Pour exécuter des conteneurs sur Windows Server, consultez la documentation officielle Microsoft.

> **Note importante** : L'exécution de conteneurs Windows nécessite Windows 10 ou Windows 11 Professionnel ou Entreprise. Les éditions Windows Home ou Education ne peuvent exécuter que des conteneurs Linux.

### Étapes d'Installation

1. **Téléchargez le Programme d'Installation Docker Desktop** :
   - [Docker Desktop pour Windows - x86_64](https://desktop.docker.com/win/main/amd64/Docker%20Desktop%20Installer.exe)

2. **Double-cliquez sur le programme d'installation pour l'exécuter**. Le chemin d'installation par défaut est `C:\Program Files\Docker\Docker`.

3. **Sur la page de configuration, sélectionnez Utiliser WSL 2 au lieu d'Hyper-V** (ou choisissez Hyper-V si nécessaire).

4. **Suivez les invites de l'assistant d'installation pour autoriser le programme et continuer**.

5. **Lorsque l'installation réussit, sélectionnez Fermer pour terminer**.

6. **Lancez Docker Desktop**.

### Privilèges Administrateur

Si votre compte utilisateur est différent du compte administrateur, vous devez ajouter l'utilisateur au groupe **docker-users** pour accéder aux fonctionnalités nécessitant des privilèges plus élevés :

1. Exécutez **Gestion de l'ordinateur** en tant qu'**Administrateur**
2. Accédez à **Utilisateurs et groupes locaux** > **Groupes** > **docker-users**
3. Cliquez avec le bouton droit pour ajouter l'utilisateur au groupe
4. Déconnectez-vous et reconnectez-vous pour que les modifications prennent effet

---

## Installation sur macOS

### Configuration Requise

#### Apple Silicon (puces série M)

- macOS 11.0 (Big Sur) ou ultérieur
- Au moins 4 Go de mémoire

#### Puces Intel

- macOS 10.15 (Catalina) ou ultérieur
- Au moins 4 Go de mémoire

### Étapes d'Installation

1. **Téléchargez Docker Desktop pour Mac** :
   - [Apple Silicon (série M)](https://desktop.docker.com/mac/main/arm64/Docker.dmg)
   - [Puces Intel](https://desktop.docker.com/mac/main/amd64/Docker.dmg)

2. **Double-cliquez sur Docker.dmg pour ouvrir le programme d'installation**.

3. **Faites glisser l'application Docker vers le dossier Applications**.

4. **Lancez Docker Desktop depuis Applications ou Launchpad**.

5. **Acceptez le Contrat de Service d'Abonnement Docker**.

6. **Attendez que Docker Desktop termine l'initialisation**.

---

## Installation sur Linux

### Distributions Supportées

| Distribution | x86_64/amd64 | arm64/aarch64 |
|--------------|:------------:|:-------------:|
| Ubuntu | ✅ | ✅ |
| Debian | ✅ | ✅ |
| Fedora | ✅ | ✅ |
| CentOS | ✅ | ✅ |
| RHEL | ✅ | ✅ |

### Installation sur Ubuntu

1. **Désinstallez les anciennes versions** :
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **Mettez à jour l'index des paquets apt** :
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg lsb-release
```

3. **Ajoutez la clé GPG officielle de Docker** :
```bash
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg
```

4. **Configurez le dépôt stable** :
```bash
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

5. **Installez Docker Engine** :
```bash
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Installation sur Debian

1. **Désinstallez les anciennes versions** :
```bash
sudo apt-get remove docker docker-engine docker.io containerd runc
```

2. **Installez Docker Engine** :
```bash
sudo apt-get update
sudo apt-get install ca-certificates curl gnupg
curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Installation sur Fedora

```bash
sudo dnf -y install dnf-plugins-core
sudo dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo
sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

### Installation sur CentOS

```bash
sudo yum install -y yum-utils
sudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
sudo yum install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

---

## Installation de Docker Engine (CLI uniquement)

Installation binaire statique pour toute distribution Linux :

1. **Téléchargez les binaires Docker** :
```bash
curl -OL https://download.docker.com/linux/static/stable/x86_64/docker-24.0.7.tgz
```

2. **Extrayez** :
```bash
tar xzf docker-24.0.7.tgz
```

3. **Déplacez les binaires vers PATH** :
```bash
sudo cp docker/* /usr/local/bin/
sudo rm -rf docker
```

4. **Démarrez le démon Docker** :
```bash
sudo dockerd &
```

---

## Vérifier l'Installation

Quel que soit le système d'exploitation, vérifiez que Docker fonctionne correctement :

```bash
docker --version          # Afficher la version de Docker
docker-compose --version  # Afficher la version de Docker Compose
docker run hello-world    # Exécuter le conteneur de test
```

Si vous voyez le message « Hello from Docker! », l'installation est réussie.

---

## Désinstaller Docker

### Windows

1. Ouvrez Paramètres Windows > Applications
2. Trouvez Docker Desktop
3. Cliquez sur Désinstaller

### macOS

1. Supprimez l'application Docker du dossier Applications
2. Exécutez ce qui suit pour nettoyer les fichiers résiduels :
```bash
rm -rf ~/Library/Containers/com.docker.docker
rm -rf ~/Library/Application\ Support/Docker
```

### Linux

```bash
sudo apt-get remove docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
```

---

## Questions Fréquentes

### Q1 : Docker Desktop nécessite-t-il un paiement ?

Docker Desktop est gratuit pour :
- Les petites entreprises (moins de 250 employés ET moins de 10 millions de revenus)
- Usage personnel
- Éducation
- Projets open source non commerciaux

L'usage commercial (plus de 250 employés OU plus de 10 millions de revenus) nécessite un abonnement payant.

### Q2 : Comment basculer entre les conteneurs Windows et Linux dans Docker Desktop ?

Depuis le menu Docker Desktop, sélectionnez :
- **Switch to Windows containers** - Utiliser les conteneurs Windows
- **Switch to Linux containers** - Utiliser les conteneurs Linux (par défaut)

### Q3 : Quelles versions de Windows Docker Desktop supporte-t-il ?

Docker Desktop ne supporte que les versions de Windows encore dans le cycle de maintenance Microsoft :
- Windows 10 Enterprise, Pro ou Education 22H2
- Windows 11 Enterprise, Pro ou Education 23H2

### Q4 : Comment configurer le proxy pour Docker Desktop ?

Configurez le proxy via Paramètres Docker Desktop > Ressources > Proxy.

---

## Liens Connexes

- [Documentation Officielle Docker](https://docs.docker.com/)
- [Téléchargement Docker Desktop](https://www.docker.com/products/docker-desktop/)
- [Docker Hub](https://hub.docker.com/)
- [Abonnements et Tarifs Docker](https://www.docker.com/pricing/)
