# Go 常見問題

> 常見問題解答

---

## 安裝

### Windows：找不到 go 命令？

**解決方案**：將 `C:\Go\bin` 加入您的 PATH 環境變數。

### macOS：brew 安裝失敗？

**解決方案**：
1. 確保已安裝 Homebrew
2. 執行 `brew update`
3. 嘗試：`brew install go --cask`

### Linux：安裝後找不到 go？

**解決方案**：
1. 驗證安裝路徑（`/usr/local/go`）
2. 檢查環境變數
3. 執行：`source ~/.bashrc`

---

## 環境

### Go Modules 代理？

**中國（推薦）**：

```bash
go env -w GOPROXY=https://goproxy.cn,direct
```

### 什麼是 GOPATH？

GOPATH 是 Go 的工作區目錄。預設：
- Linux/macOS：`$HOME/go`
- Windows：`C:\Users\username\go`

---

## 開發

### "cannot find package" 錯誤？

**解決方案**：
1. 確保專案使用 Go Modules
2. 執行 `go mod init`
3. 執行 `go mod tidy`

### := vs var？

- `var`：明確宣告，可用於函數外部
- `:=`：短宣告，僅在函數內部使用，編譯器推斷類型

### 什麼是 nil？

nil 是指標、切片、map、channel、函數和介面的零值。

```go
var p *int  // nil
var s []int // nil
```

---

## 並發

### Goroutine 洩漏？

確保 goroutine 會退出：

```go
func worker(ctx context.Context) {
    for {
        select {
        case <-ctx.Done():
            return
        default:
            // work
        }
    }
}
```

### 從已關閉的 channel 讀取？

可以，讀取會返回零值。

```go
ch := make(chan int, 3)
ch <- 1
ch <- 2
close(ch)

for v := range ch {
    fmt.Println(v)
}
```

---

## 效能

### 優化 Go 程式？

1. `go build -ldflags="-s -w"` - 減少二進制大小
2. 避免不必要的記憶體分配
3. 使用 sync.Pool
4. 使用 pprof

### 使用 pprof？

```bash
go tool pprof http://localhost:6060/debug/pprof/heap
go test -cpuprofile=cpu.out ./...
go tool pprof cpu.out
```

---

## 工具

### GoLand vs VS Code？

- **GoLand**：功能齊全，智慧付費
- **VS Code**：免費，輕量

### 格式化程式碼？

```bash
go fmt ./...
```

### 執行測試？

```bash
go test ./...
go test -v ./...
go test -cover ./...
```

---

## 資源

- 官方文檔：https://go.dev/doc/
- Go by Example：https://gobyexample.com/
