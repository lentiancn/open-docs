# JDK 使用手册

本指南介绍如何使用 JDK 进行 Java 开发。

## 快速开始

### 编译和运行

```bash
# 编译
javac HelloWorld.java

# 运行
java HelloWorld
```

### 单文件执行（JDK 11+）

```bash
# 直接运行
java HelloWorld.java
```

## 基本命令

### javac - Java 编译器

```bash
# 编译单个文件
javac MyClass.java

# 编译多个文件
javac *.java

# 使用特定编码编译
javac -encoding UTF-8 MyClass.java

# 编译到指定目录
javac -d bin MyClass.java

# 显示所有警告
javac -Xlint MyClass.java
```

### java - Java 启动器

```bash
# 运行类
java MyClass

# 带参数运行
java MyClass arg1 arg2

# 设置类路径
java -classpath "lib/*:." MyClass

# 设置内存
java -Xmx2g -Xms512m MyClass
```

### jar - Java 归档工具

```bash
# 创建 JAR
jar cf myapp.jar -C bin .

# 带清单文件创建 JAR
jar cfm myapp.jar manifest.txt -C bin .

# 解压 JAR
jar xf myapp.jar

# 列出 JAR 内容
jar tf myapp.jar
```

### javadoc - 文档生成器

```bash
# 生成文档
javadoc -d docs -sourcepath src *.java

# 带自定义标题生成文档
javadoc -d docs -header "My App" *.java
```

### jdb - Java 调试器

```bash
# 启动调试器
jdb MyClass

# 设置断点
stop at MyClass:10

# 运行
run

# 单步执行
next
step
```

## JVM 选项

### 内存选项

```bash
# 堆大小
-Xmx2g        # 最大堆
-Xms512m      # 初始堆
-Xss256k      # 栈大小

# 垃圾回收
-XX:+UseG1GC  # G1 垃圾收集器
-XX:+UseParallelGC # 并行 GC
```

### 性能选项

```bash
# JIT 编译器
-XX:+TieredCompilation

# 类数据共享
-Xshare:on

# 字符串去重
-XX:+UseStringDeduplication
```

## IDE 集成

### IntelliJ IDEA

1. File → Project Structure → SDKs
2. 添加 JDK 安装路径
3. 设置 Project SDK

### VS Code

1. 安装 "Extension Pack for Java"
2. 在设置中配置 JAVA_HOME

### Eclipse

1. Window → Preferences → Java → Installed JREs
2. 添加 Standard VM
3. 设为默认

## 构建工具

### Maven

```xml
<properties>
    <maven.compiler.source>21</maven.compiler.source>
    <maven.compiler.target>21</maven.compiler.target>
</properties>
```

### Gradle

```groovy
sourceCompatibility = '21'
targetCompatibility = '21'
```

## 模块系统（Java 9+）

### 列出模块

```bash
java --list-modules
```

### 模块选项

```bash
# 导出包
--export-module java.base/java.lang

# 开放模块
--open-module java.base
```

## 安全

### Keytool

```bash
# 生成密钥对
keytool -genkeypair -alias mykey -keyalg RSA -keystore keystore.jks

# 列出证书
keytool -list -keystore keystore.jks

# 导出证书
keytool -export -alias mykey -file cert.crt -keystore keystore.jks
```

## 性能分析

### jcmd

```bash
# 列出运行的 Java 进程
jcmd

# 获取进程信息
jcmd <pid> VM.flags

# 触发 GC
jcmd <pid> GC.run
```

### jvisualvm

```bash
# 启动可视化 VM
jvisualvm
```

## 最佳实践

### 1. 生产环境使用 LTS

```bash
# 推荐：生产环境使用 JDK 17 或 21
```

### 2. 设置适当的内存

```bash
# Web 应用程序
java -Xmx4g -Xms2g -XX:+UseG1GC MyApp
```

### 3. 启用 GC 日志

```bash
# 启用 GC 日志记录
-Xlog:gc*:file=gc.log:time,uptime,level,tags
```

## 相关资源

- [Oracle Java 文档](https://docs.oracle.com/en/java/)
- [JDK API 文档](https://docs.oracle.com/en/java/javase/21/docs/api/)
