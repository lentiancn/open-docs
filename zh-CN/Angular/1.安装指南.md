# Angular 安装指南

本指南详细介绍如何在各种操作系统上安装 Angular 开发环境，包括 Node.js、npm 和 Angular CLI 的安装配置。

---

## 目录

1. [Angular 简介](#angular-简介)
2. [版本说明](#版本说明)
3. [准备工作](#准备工作)
4. [Windows 系统安装](#windows-系统安装)
5. [macOS 系统安装](#macos-系统安装)
6. [Linux 系统安装](#linux-系统安装)
7. [验证安装](#验证安装)
8. [创建第一个 Angular 项目](#创建第一个-angular-项目)
9. [卸载与重新安装](#卸载与重新安装)
10. [常见问题](#常见问题)

---

## Angular 简介

Angular 是一个由 Google 维护的开源 Web 应用框架，用于构建客户端应用。它基于 TypeScript，集成了依赖注入、指令、管道、服务等核心功能。

### Angular 版本历史

| 版本 | 发布时间 | 主要特性 |
|------|----------|----------|
| Angular 18 | 2024年5月 | 改进的 SSR、信号、延迟加载 |
| Angular 17 | 2023年11月 | 全新控制流语法、信号、Standalone Components |
| Angular 16 | 2023年5月 | 信号（Signal）、独立 API 改进 |
| Angular 15 | 2022年11月 | 独立组件正式版、改进的 SSR |
| Angular 14 | 2022年6月 | 独立组件（测试版）、类型化表单 |
| Angular 13 | 2021年11月 | 移除 View Engine、 Ivy 完全默认 |

> **注意**：建议始终使用最新的稳定版本。Angular 版本发布周期约为每 6 个月一次。

---

## 版本说明

### Node.js 版本要求

不同版本的 Angular 对 Node.js 有不同的要求：

| Angular 版本 | Node.js 版本要求 |
|-------------|------------------|
| Angular 17/18 | Node.js 18.13.0+ |
| Angular 16 | Node.js 16.14.0+ |
| Angular 15 | Node.js 14.20.0+ / 16.13.0+ / 18.10.0+ |
| Angular 14 | Node.js 14.20.0+ / 16.13.0+ / 18.10.0+ |

### npm 版本要求

- Angular 17/18+: npm 8.3.0+
- Angular 14-16: npm 6.14.0+

---

## 准备工作

在安装 Angular 之前，需要先安装以下软件：

### 1. 安装 Node.js

Node.js 是 Angular 开发的基础运行时环境。

#### 推荐使用 nvm 管理 Node.js 版本

nvm（Node Version Manager）允许在同一台机器上安装和切换不同版本的 Node.js。

**Windows 安装**：
- 下载并安装 [nvm-windows](https://github.com/coreybutler/nvm-windows/releases)

**macOS/Linux 安装**：
```bash
# 安装 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash

# 配置环境变量后重新加载
source ~/.bashrc  # 或 source ~/.zshrc
```

### 2. 安装 npm

npm（Node Package Manager）随 Node.js 一起安装。如果需要更新到最新版本：

```bash
# 查看当前 npm 版本
npm -v

# 更新 npm 到最新版本
npm install -g npm
```

---

## Windows 系统安装

### 方法一：使用 Angular CLI 安装（推荐）

1. **安装 Node.js**

   访问 [Node.js 官网](https://nodejs.org/) 下载 LTS（长期支持）版本。

   或使用 nvm-windows：
   ```cmd
   nvm install 18
   nvm use 18
   ```

2. **安装 Angular CLI**

   打开 PowerShell 或命令提示符，运行：
   ```powershell
   npm install -g @angular/cli
   ```

3. **验证安装**
   ```powershell
   ng version
   ```

### 方法二：使用 yarn 安装

1. **安装 yarn**
   ```powershell
   npm install -g yarn
   ```

2. **使用 yarn 安装 Angular CLI**
   ```powershell
   yarn global add @angular/cli
   ```

### 方法三：使用 pnpm 安装

1. **安装 pnpm**
   ```powershell
   npm install -g pnpm
   ```

2. **使用 pnpm 安装 Angular CLI**
   ```powershell
   pnpm add -g @angular/cli
   ```

---

## macOS 系统安装

### 方法一：使用 Homebrew 安装

1. **安装 Homebrew**（如果未安装）
   ```bash
   /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
   ```

2. **安装 Node.js**
   ```bash
   brew install node
   ```

3. **安装 Angular CLI**
   ```bash
   npm install -g @angular/cli
   ```

### 方法二：使用 nvm 安装（推荐）

1. **安装 nvm**
   ```bash
   curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
   source ~/.zshrc
   ```

2. **安装 Node.js**
   ```bash
   nvm install 18
   nvm use 18
   ```

3. **安装 Angular CLI**
   ```bash
   npm install -g @angular/cli
   ```

### 方法三：使用官方安装程序

1. 访问 [Node.js 官网](https://nodejs.org/) 下载 macOS 安装包
2. 运行安装程序，按提示完成安装

---

## Linux 系统安装

### Ubuntu/Debian

1. **安装 Node.js 18**
   ```bash
   # 使用 NodeSource 仓库
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   
   # 安装 Node.js
   sudo apt-get install -y nodejs
   ```

2. **安装 Angular CLI**
   ```bash
   sudo npm install -g @angular/cli
   ```

3. **解决权限问题**（如有必要）
   ```bash
   # 创建 npm 全局目录
   mkdir ~/.npm-global
   
   # 配置 npm 使用新目录
   npm config set prefix '~/.npm-global'
   
   # 添加到 PATH
   echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
   source ~/.bashrc
   ```

### Fedora

1. **安装 Node.js**
   ```bash
   # 使用 dnf 模块
   sudo dnf module reset nodejs
   sudo dnf module enable nodejs:18
   
   sudo dnf install nodejs
   ```

2. **安装 Angular CLI**
   ```bash
   sudo npm install -g @angular/cli
   ```

### CentOS/RHEL

1. **安装 Node.js**
   ```bash
   # 使用 NodeSource 仓库
   curl -fsSL https://rpm.nodesource.com/setup_18.x | sudo bash -
   
   sudo yum install nodejs
   ```

2. **安装 Angular CLI**
   ```bash
   sudo npm install -g @angular/cli
   ```

### Arch Linux

1. **安装 Node.js**
   ```bash
   sudo pacman -S nodejs npm
   ```

2. **安装 Angular CLI**
   ```bash
   sudo npm install -g @angular/cli
   ```

### Raspberry Pi

1. **安装 Node.js 18**
   ```bash
   curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
   sudo apt-get install -y nodejs
   ```

2. **安装 Angular CLI**
   ```bash
   sudo npm install -g @angular/cli
   ```

---

## 验证安装

安装完成后，验证 Angular CLI 是否正确安装：

```bash
# 查看 Angular CLI 版本
ng version

# 查看 Angular CLI 帮助
ng help
```

预期输出类似：
```
Angular CLI: 18.x.x
Node: 18.x.x
Package Manager: npm 8.x.x
OS: linux x64
```

---

## 创建第一个 Angular 项目

### 1. 创建新项目

```bash
# 创建新 Angular 项目
ng new my-app

# 或使用快捷方式
ng n my-app

# 创建不使用路由的项目
ng new my-app --routing=false

# 创建使用 SCSS 的项目
ng new my-app --style=scss
```

### 2. 项目创建选项

创建过程中会提示选择以下选项：

| 选项 | 说明 | 默认值 |
|------|------|--------|
| Would you like to add Angular routing? | 是否添加路由 | No |
| Which stylesheet format would you like to use? | 选择样式格式 | CSS |
| Do you want to enable Server-Side Rendering (SSR)? | 是否启用 SSR | No |

### 3. 进入项目目录

```bash
cd my-app
```

### 4. 启动开发服务器

```bash
# 启动开发服务器
ng serve

# 或后台运行
ng serve --host 0.0.0.0 --port 4200 --disable-host-check
```

### 5. 访问应用

打开浏览器访问 http://localhost:4200

---

## 卸载与重新安装

### 卸载 Angular CLI

```bash
# 卸载全局 Angular CLI
npm uninstall -g @angular/cli

# 或使用 yarn
yarn global remove @angular/cli

# 或使用 pnpm
pnpm remove -g @angular/cli
```

### 清理缓存

```bash
# 清理 npm 缓存
npm cache clean --force

# 或清理 yarn 缓存
yarn cache clean
```

### 重新安装

```bash
# 重新安装 Angular CLI
npm install -g @angular/cli@latest
```

---

## 常见问题

### Q1: Angular CLI 命令找不到

**解决方案**：
1. 确认 Angular CLI 已全局安装：
   ```bash
   npm list -g @angular/cli
   ```

2. 检查 npm 全局 bin 目录是否在 PATH 中：
   ```bash
   npm config get prefix
   ```

3. 如有必要，重新安装：
   ```bash
   npm install -g @angular/cli
   ```

### Q2: Node.js 版本不兼容

**错误信息**：
```
The Angular CLI requires that Node.js version is at least 18.x.x, but found 16.x.x
```

**解决方案**：
1. 使用 nvm 切换到支持的 Node.js 版本：
   ```bash
   nvm install 18
   nvm use 18
   ```

2. 或安装新版本的 Node.js

### Q3: npm 安装速度慢

**解决方案**：
1. 使用淘宝镜像：
   ```bash
   npm config set registry https://registry.npmmirror.com
   ```

2. 或使用 nrm 管理镜像源：
   ```bash
   npm install -g nrm
   nrm use taobao
   ```

### Q4: Windows Defender 阻止 Angular

**解决方案**：
1. 将 node.exe 添加到 Windows Defender 排除列表
2. 或使用管理员权限运行 PowerShell

### Q5: 创建项目时卡住

**解决方案**：
1. 检查网络连接
2. 增加 npm 超时时间：
   ```bash
   npm config set timeout 600000
   ```
3. 使用 --skip-install 跳过自动安装：
   ```bash
   ng new my-app --skip-install
   cd my-app
   npm install
   ```

### Q6: Angular 项目启动失败

**解决方案**：
1. 确保所有依赖已安装：
   ```bash
   npm install
   ```

2. 清除缓存并重新安装：
   ```bash
   rm -rf node_modules package-lock.json
   npm install
   ```

3. 检查端口占用：
   ```bash
   lsof -i :4200
   ```

### Q7: 如何更新 Angular 到最新版本？

**解决方案**：
1. 更新 Angular CLI：
   ```bash
   npm install -g @angular/cli@latest
   ```

2. 更新项目依赖：
   ```bash
   ng update @angular/core @angular/cli
   ```

### Q8: Standalone Components 是什么？

Angular 14 引入了 Standalone Components（独立组件），Angular 17+ 成为默认。它允许组件不通过 NgModule 即可使用。

创建独立组件：
```bash
ng generate component my-component --standalone
```

### Q9: Angular 信号（Signal）是什么？

Angular 16 引入了信号（Signal）作为新的响应式原语，提供更细粒度的响应式更新。

```typescript
import { Component, signal } from '@angular/core';

@Component({
  selector: 'app-counter',
  template: `
    <button (click)="increment()">Count: {{ count() }}</button>
  `
})
export class CounterComponent {
  count = signal(0);
  
  increment() {
    this.count.update(c => c + 1);
  }
}
```

### Q10: 如何调试 Angular 应用？

1. 使用 Angular DevTools 浏览器扩展
2. 在浏览器开发者工具中调试组件
3. 使用 VS Code 的 Angular 扩展

---

## 相关链接

- [Angular 官方网站](https://angular.io/)
- [Angular 文档](https://angular.io/docs)
- [Angular CLI 文档](https://angular.io/cli)
- [Angular GitHub](https://github.com/angular/angular)
- [Angular 中文网](https://angular.cn/)
