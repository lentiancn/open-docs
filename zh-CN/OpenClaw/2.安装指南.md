# OpenClaw 安装指南

OpenClaw 支持多种安装方式，无论你使用的是 macOS、Linux 还是 Windows，都能找到适合你的方案。本指南将详细介绍每种安装方法及其前置要求。

---

## 系统要求

在开始安装之前，请确保你的系统满足以下要求：

- **Node.js**：22.0.0 或更高版本
- **操作系统**：
  - macOS 10.15 (Catalina) 或更高版本
  - Linux（Ubuntu 20.04+、Debian 11+、Fedora 36+ 等）
  - Windows 10/11（推荐通过 WSL2 使用）
- **网络**：能够访问 npm 仓库和 OpenClaw 服务
- **存储空间**：至少 500MB 可用空间

你可以通过以下命令检查 Node.js 版本：

```bash
node --version
```

如果版本低于 22.0.0，请先升级 Node.js。建议使用 nvm（Node Version Manager）来管理多个 Node.js 版本。

---

## 安装方式

### 方式一：官方安装脚本（推荐）

这是最简单快捷的安装方式，官方安装脚本会自动检测你的操作系统并完成所有配置。

**macOS / Linux：**

```bash
curl -fsSL https://openclaw.ai/install.sh | bash
```

安装脚本会完成以下操作：
1. 检测系统环境
2. 安装或升级 OpenClaw 全局包
3. 创建必要的配置目录
4. 设置必要的权限

**Windows（PowerShell）：**

```powershell
iwr -useb https://openclaw.ai/install.ps1 | iex
```

### 方式二：npm 全局安装

如果你已经安装了 Node.js 和 npm，可以直接通过 npm 安装：

```bash
npm install -g openclaw@latest
```

你也可以指定特定版本：

```bash
npm install -g openclaw@v2026.2.28
```

可用的版本标签：
- `latest`：最新稳定版
- `beta`：测试版
- `dev`：开发版

### 方式三：pnpm 安装

OpenClaw 推荐使用 pnpm，它能提供更好的依赖管理和更快的安装速度：

```bash
pnpm add -g openclaw@latest
```

### 方式四：Bun 安装

如果你使用 Bun 作为 JavaScript 运行时：

```bash
bun add -g openclaw@latest
```

### 方式五：从源码构建

如果你想使用最新开发版或为项目贡献代码，可以从 GitHub 克隆源码并构建：

```bash
# 克隆仓库
git clone https://github.com/openclaw/openclaw.git
cd openclaw

# 安装依赖
pnpm install

# 构建项目
pnpm ui:build
pnpm build

# 初始化并安装服务
pnpm openclaw onboard --install-daemon

# 开发模式（自动重载）
pnpm gateway:watch
```

**注意**：从源码运行需要先构建，`pnpm openclaw ...` 直接运行 TypeScript（通过 tsx），构建后可通过 `node dist/` 运行。

---

## 安装后配置

### 初始化向导

安装完成后，运行初始化向导来完成基本配置：

```bash
openclaw onboard --install-daemon
```

向导会引导你完成以下步骤：
1. 配置 API 密钥（推荐 Anthropic）
2. 设置工作空间目录
3. 配置渠道连接（WhatsApp、Telegram、Discord 等）
4. 安装 Gateway 后台服务

### 手动配置

如果你只想进行手动配置，可以运行：

```bash
openclaw configure
```

这将启动交互式配置向导，让你逐步设置各个选项。

### 验证安装

安装完成后，使用以下命令验证安装是否成功：

```bash
# 查看版本
openclaw --version

# 检查 Gateway 状态
openclaw gateway status

# 启动控制界面
openclaw dashboard
```

如果一切正常，你应该能看到 Gateway 正在运行，并可以在浏览器中打开控制界面。

---

## 不同操作系统的注意事项

### macOS

- 推荐使用 Homebrew 安装 Node.js：`brew install node`
- 安装后可能需要重新加载 shell 环境
- 建议启用钥匙串访问以便安全存储凭证

### Linux

- 大多数发行版可以通过包管理器安装 Node.js 22+
- Ubuntu/Debian：使用 NodeSource 仓库安装最新版本
- 确保已安装 build-essential（用于编译原生模块）

### Windows

- **强烈推荐使用 WSL2**（Windows Subsystem for Linux）
- 直接在 Windows 上运行可能会有兼容性问题
- 使用 WSL2 可以获得最佳体验

---

## 常见安装问题

### 问题一：npm 安装权限错误

如果你遇到 `EACCES` 权限错误，不要使用 sudo 安装 npm 包。建议使用 nvm 来管理 Node.js：

```bash
# 安装 nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# 使用 nvm 安装 Node.js
nvm install 22
nvm use 22

# 然后安装 OpenClaw
npm install -g openclaw@latest
```

### 问题二：Gateway 无法启动

检查端口是否被占用：

```bash
lsof -i :18789
```

如果端口被占用，可以在配置中更改端口，或关闭占用该端口的进程。

### 问题三：版本过旧

如果安装的版本过旧，尝试更新到最新版本：

```bash
npm update -g openclaw@latest
```

或重新安装：

```bash
npm uninstall -g openclaw
npm install -g openclaw@latest
```

---

## Docker 安装（可选）

如果你更喜欢使用 Docker，OpenClaw 也提供了官方 Docker 镜像：

```bash
# 拉取镜像
docker pull openclaw/openclaw:latest

# 运行容器
docker run -d \
  --name openclaw \
  -p 18789:18789 \
  -v ~/.openclaw:/root/.openclaw \
  openclaw/openclaw:latest
```

Docker 方式适合快速测试，但完整功能推荐直接安装在主机上。

---

## 升级 OpenClaw

要升级到最新版本：

```bash
# 检查当前版本
openclaw --version

# 升级
npm update -g openclaw@latest

# 或使用官方升级脚本
openclaw update
```

升级后建议运行诊断：

```bash
openclaw doctor
```

这将检查配置兼容性和潜在问题。

---

## 卸载 OpenClaw

如果需要卸载 OpenClaw：

```bash
# 停止服务
openclaw gateway stop

# 卸载全局包
npm uninstall -g openclaw

# 删除配置目录（可选）
rm -rf ~/.openclaw
```

---

## 下一步

安装完成后，建议阅读以下内容：
- [OpenClaw 使用手册](/3.使用手册.md)：深入了解各项功能
- [常见问题解答](/4.常见问题.md)：解决使用中的常见疑问
- [官方文档](https://docs.openclaw.ai)：获取完整的配置参考
