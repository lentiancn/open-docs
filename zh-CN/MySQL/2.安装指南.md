# MySQL 安装指南

本指南将帮助你在各种操作系统上安装 MySQL。

## 环境要求

| 软件 | 要求 |
|------|------|
| 操作系统 | Windows/macOS/Linux |
| 内存 | 最低 512MB，推荐 2GB+ |
| 磁盘 | 至少 2GB 可用空间 |

## Windows 安装

### 方法一：MSI 安装包（推荐）

1. 下载 MySQL Installer：https://dev.mysql.com/downloads/installer/
2. 运行 mysql-installer-community-8.0.x.msi
3. 选择 "Developer Default" 或自定义安装
4. 按照向导完成安装
5. 配置 root 密码

### 方法二：ZIP 包

1. 下载 ZIP 包：https://dev.mysql.com/downloads/mysql/
2. 解压到目录（如 C:\mysql）
3. 创建 my.ini 配置文件
4. 初始化 MySQL：
   ```cmd
   mysqld --initialize-insecure
   ```
5. 启动服务：
   ```cmd
   mysqld --install
   net start mysql
   ```

### 方法三：Chocolatey

```powershell
choco install mysql
```

## macOS 安装

### 方法一：Homebrew（推荐）

```bash
# 安装 Homebrew（如果未安装）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 MySQL
brew install mysql

# 启动 MySQL
brew services start mysql

# 安全初始化
mysql_secure_installation

# 登录
mysql -u root -p
```

### 方法二：DMG 安装包

1. 下载：https://dev.mysql.com/downloads/mysql/
2. 双击 .dmg 安装包
3. 按照向导完成安装

## Linux 安装

### Ubuntu/Debian

```bash
# 更新软件源
sudo apt update

# 安装 MySQL 服务器
sudo apt install mysql-server

# 启动服务
sudo systemctl start mysql
sudo systemctl enable mysql

# 安全初始化
sudo mysql_secure_installation

# 登录
sudo mysql -u root
```

### CentOS/RHEL

```bash
# 添加 MySQL Yum 仓库
sudo yum install https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm

# 安装 MySQL
sudo yum install mysql-community-server

# 启动服务
sudo systemctl start mysqld
sudo systemctl enable mysqld

# 查看临时密码
sudo grep 'temporary password' /var/log/mysqld.log

# 安全初始化
mysql_secure_installation
```

### Fedora

```bash
sudo dnf install community-mysql-server
sudo systemctl start mysqld
sudo systemctl enable mysqld
```

## 配置

### my.ini/my.cnf 示例

```ini
[mysqld]
# 基础配置
port=3306
basedir=C:/mysql
datadir=C:/mysql/data
max_connections=200
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

# InnoDB 配置
innodb_buffer_pool_size=1G
innodb_log_file_size=256M

# 日志配置
log_error=mysql-error.log
slow_query_log=1
slow_query_log_file=mysql-slow.log
long_query_time=2

[client]
default-character-set=utf8mb4
```

### 常用配置项

```ini
[mysqld]
# 端口
port=3306

# 数据目录
datadir=/var/lib/mysql

# 最大连接数
max_connections=150

# 字符集
character-set-server=utf8mb4
collation-server=utf8mb4_unicode_ci

# InnoDB 缓冲池大小
innodb_buffer_pool_size=1G

# 日志
log_error=/var/log/mysql/error.log
slow_query_log=1
slow_query_log_file=/var/log/mysql/slow.log
```

## 验证安装

```bash
# 查看版本
mysql --version

# 查看服务状态
systemctl status mysql

# 登录 MySQL
mysql -u root -p

# 创建数据库
CREATE DATABASE myapp;

# 查看数据库
SHOW DATABASES;
```

## 常用命令

```bash
# 启动服务
sudo systemctl start mysql

# 停止服务
sudo systemctl stop mysql

# 重启服务
sudo systemctl restart mysql

# 查看服务状态
sudo systemctl status mysql

# 开机自启
sudo systemctl enable mysql

# 登录
mysql -u root -p

# 指定数据库登录
mysql -u root -p database_name

# 执行 SQL 文件
mysql -u root -p database_name < file.sql

# 导出数据库
mysqldump -u root -p database_name > backup.sql

# 导入数据库
mysql -u root -p database_name < backup.sql
```

## 常见问题

### Q1: 启动失败

**解决方案：**
```bash
# 查看错误日志
tail -f /var/log/mysql/error.log

# 重新初始化
mysqld --initialize
```

### Q2: 忘记 root 密码

**解决方案：**
```bash
# 停止 MySQL
sudo systemctl stop mysql

# 跳过权限表启动
sudo mysqld_safe --skip-grant-tables &

# 登录并修改密码
mysql -u root
FLUSH PRIVILEGES;
ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';
```

### Q3: 端口被占用

**解决方案：**
```bash
# 查看端口占用
netstat -ano | findstr :3306

# 更改端口
# 在 my.ini 中添加 port=3307
```

## 下一步

- [MySQL 使用手册](./3.使用手册.md) - 学习 SQL 语法和操作
- [MySQL 常见问题](./4.常见问题.md) - 解答常见问题
- 官方文档：https://dev.mysql.com/doc/refman/8.0/en/
